"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./src/app/globals.css":
/*!*****************************!*\
  !*** ./src/app/globals.css ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"681b12a4874f\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvZ2xvYmFscy5jc3MiLCJtYXBwaW5ncyI6IjtBQUFBLCtEQUFlLGNBQWM7QUFDN0IsSUFBSSxJQUFVLElBQUksaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvZ2xvYmFscy5jc3M/NDVjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIjY4MWIxMmE0ODc0ZlwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/globals.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/components/ChatWidget.tsx":
/*!***************************************!*\
  !*** ./src/components/ChatWidget.tsx ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ChatWidget; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(app-pages-browser)/./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _contexts_SocketContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/contexts/SocketContext */ \"(app-pages-browser)/./src/contexts/SocketContext.tsx\");\n/* harmony import */ var _contexts_ChatWidgetContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/contexts/ChatWidgetContext */ \"(app-pages-browser)/./src/contexts/ChatWidgetContext.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/api */ \"(app-pages-browser)/./src/lib/api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n// Helper function to translate service categories to Bulgarian\nconst getServiceCategoryLabel = (category)=>{\n    if (!category) return \"\";\n    const categories = {\n        \"electrician\": \"Електротехник\",\n        \"plumber\": \"Водопроводчик\",\n        \"hvac\": \"Климатик\",\n        \"carpenter\": \"Дърводелец\",\n        \"painter\": \"Бояджия\",\n        \"locksmith\": \"Ключар\",\n        \"cleaner\": \"Почистване\",\n        \"gardener\": \"Градинар\",\n        \"handyman\": \"Майстор за всичко\",\n        \"appliance_repair\": \"Ремонт на уреди\",\n        \"general\": \"Друго\"\n    };\n    return categories[category] || category;\n};\nfunction ChatWidget() {\n    _s();\n    const { isOpen, setIsOpen, activeProviderId, activeProviderName } = (0,_contexts_ChatWidgetContext__WEBPACK_IMPORTED_MODULE_5__.useChatWidget)();\n    const [isMinimized, setIsMinimized] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [conversations, setConversations] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [unreadTotal, setUnreadTotal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [activeConversation, setActiveConversation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [newMessage, setNewMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [sending, setSending] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const { socket, isConnected } = (0,_contexts_SocketContext__WEBPACK_IMPORTED_MODULE_4__.useSocket)();\n    const { user, isAuthenticated, isLoading } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const pathname = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.usePathname)();\n    // Debug authentication state\n    console.log(\"\\uD83D\\uDCAC ChatWidget - Auth Debug:\", {\n        isAuthenticated,\n        isLoading,\n        user: user ? {\n            id: user.id,\n            email: user.email,\n            role: user.role\n        } : null,\n        hasAuthToken:  true ? !!localStorage.getItem(\"auth_token\") : 0,\n        hasUserData:  true ? !!localStorage.getItem(\"user_data\") : 0\n    });\n    // Load conversations when widget opens and set up WebSocket listeners\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isOpen && isAuthenticated && user) {\n            loadConversations();\n            // Join user's personal room for real-time updates\n            if (socket && isConnected) {\n                socket.emit(\"join-user\", user.id);\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Joined user room:\", user.id);\n                // Listen for conversation updates\n                const handleConversationsUpdated = ()=>{\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Received conversations_updated event, reloading...\");\n                    loadConversations();\n                };\n                socket.on(\"conversations_updated\", handleConversationsUpdated);\n                // Cleanup\n                return ()=>{\n                    socket.off(\"conversations_updated\", handleConversationsUpdated);\n                };\n            }\n        }\n    }, [\n        isOpen,\n        isAuthenticated,\n        user,\n        socket,\n        isConnected\n    ]);\n    // Handle opening with specific provider\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (activeProviderId && isOpen && isAuthenticated && user) {\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Opening with provider:\", activeProviderId, activeProviderName);\n            // Start or get conversation with this provider\n            startConversationWithProvider(activeProviderId);\n        }\n    }, [\n        activeProviderId,\n        isOpen,\n        isAuthenticated,\n        user\n    ]);\n    // Calculate total unread messages\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const total = conversations.reduce((sum, conv)=>sum + conv.unreadCount, 0);\n        setUnreadTotal(total);\n    }, [\n        conversations\n    ]);\n    const loadConversations = async ()=>{\n        if (!user) return;\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Loading conversations for user:\", user.role, user.id);\n        setLoading(true);\n        try {\n            // For service providers, get their conversations\n            if (user.role === \"service_provider\" || user.role === \"tradesperson\") {\n                var _response_data;\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Loading provider conversations for:\", user.id);\n                console.log(\"\\uD83D\\uDCAC ChatWidget - API URL will be:\", \"/chat/provider/\".concat(user.id, \"/conversations\"));\n                const response = await _lib_api__WEBPACK_IMPORTED_MODULE_6__.apiClient.getProviderMarketplaceConversations(user.id);\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Provider conversations full response:\", response);\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Provider conversations response.data:\", response.data);\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Provider conversations response.status:\", response.status);\n                if ((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) {\n                    let conversationsData = response.data.data;\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Raw conversations data:\", JSON.stringify(conversationsData, null, 2));\n                    // Handle different response formats and map fields correctly\n                    if (Array.isArray(conversationsData)) {\n                        // Data is already an array - map the fields\n                        const mappedConversations = conversationsData.map((conv)=>({\n                                ...conv,\n                                lastActivity: conv.last_message_at || conv.created_at,\n                                unreadCount: conv.unread_count || 0\n                            }));\n                        setConversations(mappedConversations);\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Set provider conversations (array):\", mappedConversations.length, mappedConversations);\n                    } else if (conversationsData && typeof conversationsData === \"object\") {\n                        // Data is an object, check if it has a conversations property or convert to array\n                        if (conversationsData.conversations && Array.isArray(conversationsData.conversations)) {\n                            const mappedConversations = conversationsData.conversations.map((conv)=>({\n                                    ...conv,\n                                    lastActivity: conv.last_message_at || conv.created_at,\n                                    unreadCount: conv.unread_count || 0\n                                }));\n                            setConversations(mappedConversations);\n                            console.log(\"\\uD83D\\uDCAC ChatWidget - Set provider conversations (object.conversations):\", mappedConversations.length, mappedConversations);\n                        } else if (conversationsData.data && Array.isArray(conversationsData.data)) {\n                            console.log(\"\\uD83D\\uDCAC ChatWidget - Set provider conversations (object.data):\", conversationsData.data.length, conversationsData.data);\n                        } else {\n                            // Try to convert object to array or handle single conversation\n                            console.log(\"\\uD83D\\uDCAC ChatWidget - Received object data:\", conversationsData);\n                            const conversationsArray = Object.values(conversationsData).filter((item)=>item && typeof item === \"object\" && \"id\" in item);\n                            // Filter out conversations with no messages and remove duplicates\n                            const filteredConversations = conversationsArray.filter((c)=>(c.messageCount || 0) > 0) // Only show conversations with messages\n                            .filter((conv, index, self)=>index === self.findIndex((c)=>c.id === conv.id) // Remove duplicates by ID\n                            );\n                            setConversations(filteredConversations);\n                            console.log(\"\\uD83D\\uDCAC ChatWidget - Converted object to array:\", filteredConversations.length, \"(filtered from\", conversationsArray.length, \")\");\n                        }\n                    } else {\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - No conversations data found\");\n                        setConversations([]);\n                    }\n                } else {\n                    var _response_data1, _response_data2, _response_data3;\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - API response not successful\");\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Response structure:\", {\n                        hasSuccess: \"success\" in (response.data || {}),\n                        successValue: (_response_data1 = response.data) === null || _response_data1 === void 0 ? void 0 : _response_data1.success,\n                        hasData: \"data\" in (response.data || {}),\n                        dataType: typeof ((_response_data2 = response.data) === null || _response_data2 === void 0 ? void 0 : _response_data2.data),\n                        isArray: Array.isArray((_response_data3 = response.data) === null || _response_data3 === void 0 ? void 0 : _response_data3.data)\n                    });\n                    setConversations([]);\n                }\n            } else {\n                var _response_data_data, _response_data4, _response_data5;\n                // For customers, get their conversations\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Loading customer conversations\");\n                const response = await _lib_api__WEBPACK_IMPORTED_MODULE_6__.apiClient.getConversations();\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Customer conversations response:\", response.data);\n                const conversations = (_response_data4 = response.data) === null || _response_data4 === void 0 ? void 0 : (_response_data_data = _response_data4.data) === null || _response_data_data === void 0 ? void 0 : _response_data_data.conversations;\n                if (((_response_data5 = response.data) === null || _response_data5 === void 0 ? void 0 : _response_data5.success) && Array.isArray(conversations)) {\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Conversation details:\", conversations.map((c)=>({\n                            id: c.id,\n                            serviceProviderName: c.serviceProviderName,\n                            customerName: c.customerName,\n                            messageCount: c.messageCount\n                        })));\n                    // Filter out conversations with no messages and remove duplicates\n                    const filteredConversations = conversations.filter((c)=>c.messageCount > 0) // Only show conversations with messages\n                    .filter((conv, index, self)=>index === self.findIndex((c)=>c.id === conv.id) // Remove duplicates by ID\n                    );\n                    setConversations(filteredConversations);\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Set customer conversations:\", filteredConversations.length, \"(filtered from\", conversations.length, \")\");\n                } else {\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - No customer conversations found or invalid response\");\n                    setConversations([]);\n                }\n            }\n        } catch (error) {\n            var _error_response, _error_response1, _error_response2;\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error loading conversations:\", error);\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error details:\", {\n                message: error.message,\n                status: (_error_response = error.response) === null || _error_response === void 0 ? void 0 : _error_response.status,\n                statusText: (_error_response1 = error.response) === null || _error_response1 === void 0 ? void 0 : _error_response1.statusText,\n                data: (_error_response2 = error.response) === null || _error_response2 === void 0 ? void 0 : _error_response2.data\n            });\n            setConversations([]);\n        } finally{\n            setLoading(false);\n        }\n    };\n    const startConversationWithProvider = async (providerId)=>{\n        try {\n            var _response_data, _response_data_data, _response_data1;\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Starting conversation with provider:\", {\n                providerId,\n                activeProviderName,\n                activeProviderId\n            });\n            // Create or get conversation with this provider\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_6__.apiClient.startConversation({\n                providerId,\n                customerId: user === null || user === void 0 ? void 0 : user.id,\n                customerName: \"\".concat((user === null || user === void 0 ? void 0 : user.firstName) || \"\", \" \").concat((user === null || user === void 0 ? void 0 : user.lastName) || \"\").trim() || \"User\",\n                customerEmail: (user === null || user === void 0 ? void 0 : user.email) || \"\",\n                customerPhone: (user === null || user === void 0 ? void 0 : user.phoneNumber) || \"\"\n            });\n            if (((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) && ((_response_data1 = response.data) === null || _response_data1 === void 0 ? void 0 : (_response_data_data = _response_data1.data) === null || _response_data_data === void 0 ? void 0 : _response_data_data.conversationId)) {\n                const conversationId = response.data.data.conversationId;\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Conversation created/found:\", conversationId);\n                // Create a temporary conversation object to open immediately\n                const providerDisplayName = activeProviderName || \"Специалист\";\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Using provider name:\", providerDisplayName);\n                const tempConversation = {\n                    id: conversationId,\n                    customerName: \"\".concat((user === null || user === void 0 ? void 0 : user.firstName) || \"\", \" \").concat((user === null || user === void 0 ? void 0 : user.lastName) || \"\").trim() || \"Customer\",\n                    serviceProviderName: providerDisplayName,\n                    lastMessage: \"\",\n                    lastActivity: new Date().toISOString(),\n                    unreadCount: 0\n                };\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Opening temp conversation:\", tempConversation);\n                // Open the conversation immediately\n                handleConversationClick(tempConversation);\n                // Reload conversations in background to update the list\n                loadConversations();\n            }\n        } catch (error) {\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error starting conversation with provider:\", error);\n        }\n    };\n    const handleConversationClick = async (conversation)=>{\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Opening conversation inline:\", conversation.id, conversation);\n        // Set active conversation and load messages\n        setActiveConversation(conversation);\n        setMessages([]);\n        try {\n            var _response_data;\n            // Load messages for this conversation\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Loading messages for conversation:\", conversation.id);\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_6__.apiClient.getMarketplaceMessages(conversation.id);\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Messages API response:\", response);\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Messages response data:\", response.data);\n            if ((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) {\n                let messagesData = response.data.data;\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Raw messages data:\", JSON.stringify(messagesData, null, 2));\n                // Handle different response formats\n                if (Array.isArray(messagesData)) {\n                    // Data is already an array\n                    setMessages(messagesData);\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Loaded messages (array):\", messagesData.length, messagesData);\n                } else if (messagesData && typeof messagesData === \"object\") {\n                    // Data is an object, check if it has a messages property or convert to array\n                    if (messagesData.messages && Array.isArray(messagesData.messages)) {\n                        setMessages(messagesData.messages);\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Loaded messages (object.messages):\", messagesData.messages.length, messagesData.messages);\n                    } else if (messagesData.data && Array.isArray(messagesData.data)) {\n                        setMessages(messagesData.data);\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Loaded messages (object.data):\", messagesData.data.length, messagesData.data);\n                    } else {\n                        // Try to convert object to array or handle single message\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Received object messages data:\", messagesData);\n                        const messagesArray = Object.values(messagesData).filter((item)=>item && typeof item === \"object\" && \"id\" in item);\n                        setMessages(messagesArray);\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Converted messages object to array:\", messagesArray.length, messagesArray);\n                    }\n                } else {\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - No messages data found\");\n                    setMessages([]);\n                }\n            } else {\n                var _response_data1, _response_data2, _response_data3, _response_data4;\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Messages API response not successful\");\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Response structure:\", {\n                    hasSuccess: \"success\" in (response.data || {}),\n                    successValue: (_response_data1 = response.data) === null || _response_data1 === void 0 ? void 0 : _response_data1.success,\n                    hasData: \"data\" in (response.data || {}),\n                    dataType: typeof ((_response_data2 = response.data) === null || _response_data2 === void 0 ? void 0 : _response_data2.data),\n                    isArray: Array.isArray((_response_data3 = response.data) === null || _response_data3 === void 0 ? void 0 : _response_data3.data),\n                    dataContent: (_response_data4 = response.data) === null || _response_data4 === void 0 ? void 0 : _response_data4.data\n                });\n                setMessages([]);\n            }\n            // Auto-scroll to bottom after loading messages\n            setTimeout(()=>scrollToBottom(), 200);\n            // Mark conversation as read after loading messages\n            markConversationAsRead(conversation.id);\n            // Initialize socket for real-time updates if not already connected\n            if (!socket) {\n                initializeSocket(conversation.id);\n            }\n        } catch (error) {\n            var _error_response, _error_response1, _error_response2;\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error loading messages:\", error);\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error details:\", {\n                message: error.message,\n                status: (_error_response = error.response) === null || _error_response === void 0 ? void 0 : _error_response.status,\n                statusText: (_error_response1 = error.response) === null || _error_response1 === void 0 ? void 0 : _error_response1.statusText,\n                data: (_error_response2 = error.response) === null || _error_response2 === void 0 ? void 0 : _error_response2.data\n            });\n        }\n    };\n    const initializeSocket = (conversationId)=>{\n        if (!socket || !isConnected) {\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Socket not available yet\");\n            return;\n        }\n        try {\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Joining conversation room:\", conversationId);\n            socket.emit(\"join-conversation\", conversationId);\n            // Listen for new messages in this conversation\n            const handleNewMessage = (data)=>{\n                console.log(\"\\uD83D\\uDCAC ChatWidget received new message:\", data);\n                if (data.conversationId === conversationId && data.messageId) {\n                    const newMessage = {\n                        id: data.messageId,\n                        conversationId: data.conversationId,\n                        senderType: data.senderType,\n                        senderName: data.senderName,\n                        message: data.message,\n                        timestamp: data.timestamp,\n                        sent_at: data.timestamp // Add sent_at for consistency\n                    };\n                    setMessages((prev)=>{\n                        const exists = prev.some((msg)=>msg.id === data.messageId);\n                        if (!exists) {\n                            console.log(\"\\uD83D\\uDCAC Adding new message to chat:\", newMessage);\n                            return [\n                                ...prev,\n                                newMessage\n                            ];\n                        }\n                        return prev;\n                    });\n                }\n            };\n            socket.on(\"new_message\", handleNewMessage);\n            // Cleanup function\n            return ()=>{\n                socket.off(\"new_message\", handleNewMessage);\n            };\n        } catch (error) {\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Socket initialization error:\", error);\n        }\n    };\n    const sendMessage = async ()=>{\n        if (!newMessage.trim() || sending || !activeConversation) return;\n        setSending(true);\n        try {\n            var _response_data;\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_6__.apiClient.sendMessage({\n                conversationId: activeConversation.id,\n                senderType: (user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? \"provider\" : \"customer\",\n                senderName: \"\".concat(user === null || user === void 0 ? void 0 : user.firstName, \" \").concat(user === null || user === void 0 ? void 0 : user.lastName).trim() || \"User\",\n                message: newMessage\n            });\n            if ((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) {\n                var _response_data_data;\n                const newMsg = {\n                    id: ((_response_data_data = response.data.data) === null || _response_data_data === void 0 ? void 0 : _response_data_data.messageId) || Date.now().toString(),\n                    conversationId: activeConversation.id,\n                    senderType: (user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? \"provider\" : \"customer\",\n                    senderName: \"\".concat(user === null || user === void 0 ? void 0 : user.firstName, \" \").concat(user === null || user === void 0 ? void 0 : user.lastName).trim() || \"User\",\n                    message: newMessage,\n                    timestamp: new Date().toISOString()\n                };\n                setMessages((prev)=>[\n                        ...prev,\n                        newMsg\n                    ]);\n                setNewMessage(\"\");\n                // Auto-scroll after sending message\n                setTimeout(()=>scrollToBottom(), 100);\n            }\n        } catch (error) {\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error sending message:\", error);\n        } finally{\n            setSending(false);\n        }\n    };\n    const markConversationAsRead = async (conversationId)=>{\n        try {\n            console.log(\"\\uD83D\\uDCD6 Marking conversation as read:\", conversationId);\n            const senderType = (user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? \"provider\" : \"customer\";\n            await _lib_api__WEBPACK_IMPORTED_MODULE_6__.apiClient.markMarketplaceAsRead(conversationId, senderType);\n            // Update the conversation in the local state to remove unread count\n            setConversations((prev)=>prev.map((conv)=>conv.id === conversationId ? {\n                        ...conv,\n                        unreadCount: 0\n                    } : conv));\n            console.log(\"✅ Conversation marked as read\");\n        } catch (error) {\n            console.error(\"❌ Failed to mark conversation as read:\", error);\n        }\n    };\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    // Auto-scroll when messages change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (messages.length > 0) {\n            setTimeout(()=>scrollToBottom(), 100);\n        }\n    }, [\n        messages\n    ]);\n    const goBackToConversations = ()=>{\n        setActiveConversation(null);\n        setMessages([]);\n        setNewMessage(\"\");\n    // Socket is global, no need to disconnect\n    };\n    const formatMessageTime = (timestamp)=>{\n        if (!timestamp) return \"неизвестно\";\n        let date;\n        // Handle different timestamp formats\n        if (typeof timestamp === \"number\") {\n            date = new Date(timestamp > 1000000000000 ? timestamp : timestamp * 1000);\n        } else if (typeof timestamp === \"string\") {\n            // SQLite datetime format: \"2024-01-15 10:30:45\" or ISO format\n            if (timestamp.includes(\" \") && !timestamp.includes(\"T\")) {\n                // SQLite format: convert to ISO format\n                const isoTimestamp = timestamp.replace(\" \", \"T\") + \"Z\";\n                date = new Date(isoTimestamp);\n            } else {\n                date = new Date(timestamp);\n            }\n        } else {\n            return \"неизвестно\";\n        }\n        // Check if date is valid\n        if (isNaN(date.getTime())) {\n            console.warn(\"Invalid message timestamp:\", timestamp);\n            return \"неизвестно\";\n        }\n        // Return time in HH:MM format\n        try {\n            return date.toLocaleTimeString(\"bg-BG\", {\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n                hour12: false\n            });\n        } catch (e) {\n            return date.toLocaleTimeString();\n        }\n    };\n    const formatLastActivity = (timestamp)=>{\n        if (!timestamp) return \"неизвестно\";\n        let date;\n        // Handle different timestamp formats (same logic as formatMessageTime)\n        if (typeof timestamp === \"number\") {\n            date = new Date(timestamp > 1000000000000 ? timestamp : timestamp * 1000);\n        } else if (typeof timestamp === \"string\") {\n            // SQLite datetime format: \"2024-01-15 10:30:45\" or ISO format\n            if (timestamp.includes(\" \") && !timestamp.includes(\"T\")) {\n                // SQLite format: convert to ISO format\n                const isoTimestamp = timestamp.replace(\" \", \"T\") + \"Z\";\n                date = new Date(isoTimestamp);\n            } else {\n                date = new Date(timestamp);\n            }\n        } else {\n            return \"неизвестно\";\n        }\n        // Check if date is valid\n        if (isNaN(date.getTime())) {\n            console.warn(\"Invalid last activity timestamp:\", timestamp);\n            return \"неизвестно\";\n        }\n        const now = new Date();\n        const diffMs = now.getTime() - date.getTime();\n        const diffDays = Math.floor(diffMs / 86400000);\n        // Show actual time for today's messages, date for older ones\n        if (diffDays === 0) {\n            // Today - show time like \"14:30\"\n            try {\n                return date.toLocaleTimeString(\"bg-BG\", {\n                    hour: \"2-digit\",\n                    minute: \"2-digit\",\n                    hour12: false\n                });\n            } catch (e) {\n                return date.toLocaleTimeString();\n            }\n        } else if (diffDays === 1) {\n            // Yesterday - show \"вчера\"\n            return \"вчера\";\n        } else if (diffDays < 7) {\n            // This week - show day name\n            try {\n                return date.toLocaleDateString(\"bg-BG\", {\n                    weekday: \"short\"\n                });\n            } catch (e) {\n                return \"\".concat(diffDays, \"д\");\n            }\n        } else {\n            // Older - show date\n            try {\n                return date.toLocaleDateString(\"bg-BG\", {\n                    day: \"2-digit\",\n                    month: \"2-digit\"\n                });\n            } catch (e) {\n                return date.toLocaleDateString();\n            }\n        }\n    };\n    // Wait for authentication to load\n    if (isLoading) {\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Auth still loading, waiting...\");\n        return null;\n    }\n    // Don't show widget on authentication pages\n    if (pathname === null || pathname === void 0 ? void 0 : pathname.startsWith(\"/auth/\")) {\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Not showing on auth page:\", pathname);\n        return null;\n    }\n    // Don't show widget if user is not authenticated\n    if (!isAuthenticated || !user) {\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Not showing widget: user not authenticated\", {\n            isAuthenticated,\n            user: !!user\n        });\n        // Temporary: Show a login prompt widget for non-authenticated users\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n            onClick: ()=>window.location.href = \"/auth/login\",\n            className: \"fixed bottom-6 right-6 bg-gray-600 hover:bg-gray-700 text-white p-4 rounded-full shadow-lg transition-all duration-200 z-[9999] relative\",\n            \"aria-label\": \"Влезте за чат\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                    className: \"w-6 h-6\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                    }, void 0, false, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 597,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                    lineNumber: 596,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"absolute -top-2 -right-2 bg-blue-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold\",\n                    children: \"!\"\n                }, void 0, false, {\n                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                    lineNumber: 599,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n            lineNumber: 591,\n            columnNumber: 7\n        }, this);\n    }\n    console.log(\"\\uD83D\\uDCAC ChatWidget - Rendering widget for user:\", user === null || user === void 0 ? void 0 : user.role, \"isOpen:\", isOpen);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            !isOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>setIsOpen(true),\n                className: \"fixed bottom-6 right-6 bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-full shadow-lg transition-all duration-200 z-[9999] relative border-4 border-white\",\n                \"aria-label\": \"Отвори чат\",\n                style: {\n                    position: \"fixed\",\n                    bottom: \"24px\",\n                    right: \"24px\",\n                    zIndex: 9999,\n                    width: \"64px\",\n                    height: \"64px\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        className: \"w-6 h-6\",\n                        fill: \"none\",\n                        stroke: \"currentColor\",\n                        viewBox: \"0 0 24 24\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 2,\n                            d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                            lineNumber: 626,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 625,\n                        columnNumber: 11\n                    }, this),\n                    unreadTotal > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold\",\n                        children: unreadTotal > 99 ? \"99+\" : unreadTotal\n                    }, void 0, false, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 631,\n                        columnNumber: 13\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                lineNumber: 612,\n                columnNumber: 9\n            }, this),\n            isOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed bottom-6 right-6 bg-white rounded-lg shadow-xl border z-[9999] transition-all duration-200 \".concat(isMinimized ? \"w-80 h-12\" : \"w-80 h-96\"),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center justify-between p-4 border-b bg-purple-600 text-white rounded-t-lg\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center space-x-2\",\n                                children: [\n                                    activeConversation && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: goBackToConversations,\n                                        className: \"text-white hover:text-gray-200 mr-2\",\n                                        children: \"←\"\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 647,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-2 h-2 bg-green-400 rounded-full\"\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 654,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex flex-col\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"font-medium\",\n                                                children: activeConversation ? (user === null || user === void 0 ? void 0 : user.role) === \"customer\" ? activeConversation.serviceProviderName : activeConversation.customerName : \"Съобщения\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 656,\n                                                columnNumber: 17\n                                            }, this),\n                                            activeConversation && (user === null || user === void 0 ? void 0 : user.role) === \"customer\" && activeConversation.serviceCategory && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-xs text-purple-200\",\n                                                children: getServiceCategoryLabel(activeConversation.serviceCategory)\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 664,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 655,\n                                        columnNumber: 15\n                                    }, this),\n                                    !activeConversation && unreadTotal > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"bg-red-500 text-white text-xs px-2 py-1 rounded-full\",\n                                        children: unreadTotal\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 670,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                lineNumber: 645,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center space-x-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>setIsMinimized(!isMinimized),\n                                        className: \"text-white hover:text-gray-200 transition-colors\",\n                                        \"aria-label\": isMinimized ? \"Разшири\" : \"Минимизирай\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"w-4 h-4\",\n                                            fill: \"none\",\n                                            stroke: \"currentColor\",\n                                            viewBox: \"0 0 24 24\",\n                                            children: isMinimized ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 2,\n                                                d: \"M5 15l7-7 7 7\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 683,\n                                                columnNumber: 21\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 2,\n                                                d: \"M19 9l-7 7-7-7\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 685,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 681,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 676,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>setIsOpen(false),\n                                        className: \"text-white hover:text-gray-200 transition-colors\",\n                                        \"aria-label\": \"Затвори чат\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"w-4 h-4\",\n                                            fill: \"none\",\n                                            stroke: \"currentColor\",\n                                            viewBox: \"0 0 24 24\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 2,\n                                                d: \"M6 18L18 6M6 6l12 12\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 695,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 694,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 689,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                lineNumber: 675,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 644,\n                        columnNumber: 11\n                    }, this),\n                    !isMinimized && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex flex-col h-80\",\n                        children: activeConversation ? /* Active Chat View */ /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 overflow-y-auto p-3 space-y-2\",\n                                    children: [\n                                        messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-center text-gray-500 py-8\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-2xl mb-2\",\n                                                    children: \"\\uD83D\\uDCAC\"\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 711,\n                                                    columnNumber: 25\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm\",\n                                                    children: \"Няма съобщения\"\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 712,\n                                                    columnNumber: 25\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 710,\n                                            columnNumber: 23\n                                        }, this) : messages.map((msg)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex \".concat((user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? msg.senderType === \"provider\" ? \"justify-end\" : \"justify-start\" : msg.senderType === \"customer\" ? \"justify-end\" : \"justify-start\"),\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"max-w-xs px-3 py-2 rounded-lg text-sm \".concat((user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? msg.senderType === \"provider\" ? \"bg-purple-600 text-white\" : \"bg-gray-200 text-gray-800\" : msg.senderType === \"customer\" ? \"bg-purple-600 text-white\" : \"bg-gray-200 text-gray-800\"),\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            children: msg.message\n                                                        }, void 0, false, {\n                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                            lineNumber: 731,\n                                                            columnNumber: 31\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs mt-1 \".concat((user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? msg.senderType === \"provider\" ? \"text-purple-200\" : \"text-gray-500\" : msg.senderType === \"customer\" ? \"text-purple-200\" : \"text-gray-500\"),\n                                                            children: formatMessageTime(msg.sent_at || msg.timestamp)\n                                                        }, void 0, false, {\n                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                            lineNumber: 732,\n                                                            columnNumber: 31\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 724,\n                                                    columnNumber: 29\n                                                }, this)\n                                            }, msg.id, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 716,\n                                                columnNumber: 27\n                                            }, this)),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            ref: messagesEndRef\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 744,\n                                            columnNumber: 21\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 708,\n                                    columnNumber: 19\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"border-t p-3\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex space-x-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"text\",\n                                                value: newMessage,\n                                                onChange: (e)=>setNewMessage(e.target.value),\n                                                onKeyPress: (e)=>e.key === \"Enter\" && sendMessage(),\n                                                placeholder: \"Напишете съобщение...\",\n                                                className: \"flex-1 border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500\",\n                                                disabled: sending\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 750,\n                                                columnNumber: 23\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: sendMessage,\n                                                disabled: !newMessage.trim() || sending,\n                                                className: \"bg-purple-600 text-white px-3 py-2 rounded-lg disabled:opacity-50 text-sm hover:bg-purple-700\",\n                                                children: sending ? \"...\" : \"\\uD83D\\uDCE4\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 759,\n                                                columnNumber: 23\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 749,\n                                        columnNumber: 21\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 748,\n                                    columnNumber: 19\n                                }, this)\n                            ]\n                        }, void 0, true) : /* Conversations List View */ /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                loading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 flex items-center justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-2\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 775,\n                                                columnNumber: 25\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm text-gray-500\",\n                                                children: \"Зареждане...\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 776,\n                                                columnNumber: 25\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 774,\n                                        columnNumber: 23\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 773,\n                                    columnNumber: 21\n                                }, this) : conversations.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 flex items-center justify-center text-gray-500\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-4xl mb-2\",\n                                                children: \"\\uD83D\\uDCAC\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 782,\n                                                columnNumber: 25\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm\",\n                                                children: [\n                                                    \"Здравейте, \",\n                                                    user === null || user === void 0 ? void 0 : user.firstName,\n                                                    \"!\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 783,\n                                                columnNumber: 25\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs text-gray-400 mt-1\",\n                                                children: (user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? \"Няма активни разговори с клиенти\" : \"Няма активни разговори\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 784,\n                                                columnNumber: 25\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 781,\n                                        columnNumber: 23\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 780,\n                                    columnNumber: 21\n                                }, this) : /* Conversations List */ /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 overflow-y-auto\",\n                                    children: conversations.map((conversation)=>{\n                                        var _this;\n                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            onClick: ()=>handleConversationClick(conversation),\n                                            className: \"p-4 hover:bg-gray-50 cursor-pointer border-b border-gray-200 flex items-start space-x-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-purple-600 font-medium text-sm\",\n                                                        children: ((_this = (user === null || user === void 0 ? void 0 : user.role) === \"customer\" ? conversation.serviceProviderName : conversation.customerName) === null || _this === void 0 ? void 0 : _this.charAt(0)) || \"C\"\n                                                    }, void 0, false, {\n                                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                        lineNumber: 802,\n                                                        columnNumber: 31\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 801,\n                                                    columnNumber: 29\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex-1 min-w-0\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"flex items-center justify-between\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                    className: \"text-sm font-medium text-gray-900 truncate\",\n                                                                    children: (user === null || user === void 0 ? void 0 : user.role) === \"customer\" ? conversation.serviceProviderName || \"Неизвестен специалист\" : conversation.customerName || \"Неизвестен клиент\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                                    lineNumber: 808,\n                                                                    columnNumber: 33\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"flex items-center space-x-2\",\n                                                                    children: [\n                                                                        conversation.unreadCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                            className: \"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full\",\n                                                                            children: conversation.unreadCount > 99 ? \"99+\" : conversation.unreadCount\n                                                                        }, void 0, false, {\n                                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                                            lineNumber: 815,\n                                                                            columnNumber: 37\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                            className: \"text-xs text-gray-500\",\n                                                                            children: formatLastActivity(conversation.lastActivity)\n                                                                        }, void 0, false, {\n                                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                                            lineNumber: 819,\n                                                                            columnNumber: 35\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                                    lineNumber: 813,\n                                                                    columnNumber: 33\n                                                                }, this)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                            lineNumber: 807,\n                                                            columnNumber: 31\n                                                        }, this),\n                                                        conversation.lastMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-sm text-gray-500 truncate mt-1\",\n                                                            children: conversation.lastMessage\n                                                        }, void 0, false, {\n                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                            lineNumber: 825,\n                                                            columnNumber: 33\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 806,\n                                                    columnNumber: 29\n                                                }, this)\n                                            ]\n                                        }, conversation.id, true, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 796,\n                                            columnNumber: 27\n                                        }, this);\n                                    })\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 794,\n                                    columnNumber: 21\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"border-t p-3 space-y-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>window.open(\"/search\", \"_blank\"),\n                                            className: \"w-full text-left text-sm text-purple-600 hover:text-purple-800 transition-colors\",\n                                            children: \"\\uD83D\\uDD0D Търси специалисти\"\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 837,\n                                            columnNumber: 21\n                                        }, this),\n                                        ((user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\") && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: ()=>window.open(\"/dashboard\", \"_blank\"),\n                                                    className: \"w-full text-left text-sm text-purple-600 hover:text-purple-800 transition-colors\",\n                                                    children: \"\\uD83D\\uDCCA Табло за управление\"\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 845,\n                                                    columnNumber: 25\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: ()=>window.open(\"/dashboard?view=assigned\", \"_blank\"),\n                                                    className: \"w-full text-left text-sm text-purple-600 hover:text-purple-800 transition-colors\",\n                                                    children: \"\\uD83D\\uDCCB Моите заявки\"\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 851,\n                                                    columnNumber: 25\n                                                }, this)\n                                            ]\n                                        }, void 0, true)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 836,\n                                    columnNumber: 19\n                                }, this)\n                            ]\n                        }, void 0, true)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 703,\n                        columnNumber: 13\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                lineNumber: 640,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true);\n}\n_s(ChatWidget, \"ZIxIT5JL8vx4dKDQpkNNa/vxBAM=\", false, function() {\n    return [\n        _contexts_ChatWidgetContext__WEBPACK_IMPORTED_MODULE_5__.useChatWidget,\n        _contexts_SocketContext__WEBPACK_IMPORTED_MODULE_4__.useSocket,\n        _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth,\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.usePathname\n    ];\n});\n_c = ChatWidget;\nvar _c;\n$RefreshReg$(_c, \"ChatWidget\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0NoYXRXaWRnZXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBRW1EO0FBQ047QUFDRztBQUNJO0FBQ1E7QUFDdkI7QUFFckMsK0RBQStEO0FBQy9ELE1BQU1RLDBCQUEwQixDQUFDQztJQUMvQixJQUFJLENBQUNBLFVBQVUsT0FBTztJQUV0QixNQUFNQyxhQUFxQztRQUN6QyxlQUFlO1FBQ2YsV0FBVztRQUNYLFFBQVE7UUFDUixhQUFhO1FBQ2IsV0FBVztRQUNYLGFBQWE7UUFDYixXQUFXO1FBQ1gsWUFBWTtRQUNaLFlBQVk7UUFDWixvQkFBb0I7UUFDcEIsV0FBVztJQUNiO0lBRUEsT0FBT0EsVUFBVSxDQUFDRCxTQUFTLElBQUlBO0FBQ2pDO0FBYWUsU0FBU0U7O0lBQ3RCLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLGdCQUFnQixFQUFFQyxrQkFBa0IsRUFBRSxHQUFHVCwwRUFBYUE7SUFDakYsTUFBTSxDQUFDVSxhQUFhQyxlQUFlLEdBQUdqQiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNrQixlQUFlQyxpQkFBaUIsR0FBR25CLCtDQUFRQSxDQUFpQixFQUFFO0lBQ3JFLE1BQU0sQ0FBQ29CLFNBQVNDLFdBQVcsR0FBR3JCLCtDQUFRQSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQ3NCLGFBQWFDLGVBQWUsR0FBR3ZCLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ3dCLG9CQUFvQkMsc0JBQXNCLEdBQUd6QiwrQ0FBUUEsQ0FBc0I7SUFDbEYsTUFBTSxDQUFDMEIsVUFBVUMsWUFBWSxHQUFHM0IsK0NBQVFBLENBQVEsRUFBRTtJQUNsRCxNQUFNLENBQUM0QixZQUFZQyxjQUFjLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUM4QixTQUFTQyxXQUFXLEdBQUcvQiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLEVBQUVnQyxNQUFNLEVBQUVDLFdBQVcsRUFB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Ozs7Ozt3Q0FHQ3ZJLENBQUFBLENBQUFBLGlCQUFBQSwyQkFBQUEsS0FBTVMsSUFBSSxNQUFLLHNCQUFzQlQsQ0FBQUEsaUJBQUFBLDJCQUFBQSxLQUFNUyxJQUFJLE1BQUssY0FBYSxtQkFDakU7OzhEQUNFLDhEQUFDeUg7b0RBQ0NDLFNBQVMsSUFBTUMsT0FBT29DLElBQUksQ0FBQyxjQUFjO29EQUN6Q2pDLFdBQVU7OERBQ1g7Ozs7Ozs4REFHRCw4REFBQ0w7b0RBQ0NDLFNBQVMsSUFBTUMsT0FBT29DLElBQUksQ0FBQyw0QkFBNEI7b0RBQ3ZEakMsV0FBVTs4REFDWDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFjekI7R0ExekJ3QjlKOztRQUM4Q0wsc0VBQWFBO1FBU2pERCw4REFBU0E7UUFDSUQsMERBQU9BO1FBRW5DRCx3REFBV0E7OztLQWJOUSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvY29tcG9uZW50cy9DaGF0V2lkZ2V0LnRzeD83ZjZiIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHVzZVBhdGhuYW1lIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJ1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnXG5pbXBvcnQgeyB1c2VTb2NrZXQgfSBmcm9tICdAL2NvbnRleHRzL1NvY2tldENvbnRleHQnXG5pbXBvcnQgeyB1c2VDaGF0V2lkZ2V0IH0gZnJvbSAnQC9jb250ZXh0cy9DaGF0V2lkZ2V0Q29udGV4dCdcbmltcG9ydCB7IGFwaUNsaWVudCB9IGZyb20gJ0AvbGliL2FwaSdcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHRyYW5zbGF0ZSBzZXJ2aWNlIGNhdGVnb3JpZXMgdG8gQnVsZ2FyaWFuXG5jb25zdCBnZXRTZXJ2aWNlQ2F0ZWdvcnlMYWJlbCA9IChjYXRlZ29yeTogc3RyaW5nIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgaWYgKCFjYXRlZ29yeSkgcmV0dXJuICcnXG4gIFxuICBjb25zdCBjYXRlZ29yaWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICdlbGVjdHJpY2lhbic6ICfQldC70LXQutGC0YDQvtGC0LXRhdC90LjQuicsXG4gICAgJ3BsdW1iZXInOiAn0JLQvtC00L7Qv9GA0L7QstC+0LTRh9C40LonLFxuICAgICdodmFjJzogJ9Ca0LvQuNC80LDRgtC40LonLFxuICAgICdjYXJwZW50ZXInOiAn0JTRitGA0LLQvtC00LXQu9C10YYnLFxuICAgICdwYWludGVyJzogJ9CR0L7Rj9C00LbQuNGPJyxcbiAgICAnbG9ja3NtaXRoJzogJ9Ca0LvRjtGH0LDRgCcsXG4gICAgJ2NsZWFuZXInOiAn0J/QvtGH0LjRgdGC0LLQsNC90LUnLFxuICAgICdnYXJkZW5lcic6ICfQk9GA0LDQtNC40L3QsNGAJyxcbiAgICAnaGFuZHltYW4nOiAn0JzQsNC50YHRgtC+0YAg0LfQsCDQstGB0LjRh9C60L4nLFxuICAgICdhcHBsaWFuY2VfcmVwYWlyJzogJ9Cg0LXQvNC+0L3RgiDQvdCwINGD0YDQtdC00LgnLFxuICAgICdnZW5lcmFsJzogJ9CU0YDRg9Cz0L4nXG4gIH1cbiAgXG4gIHJldHVybiBjYXRlZ29yaWVzW2NhdGVnb3J5XSB8fCBjYXRlZ29yeVxufVxuXG5pbnRlcmZhY2UgQ29udmVyc2F0aW9uIHtcbiAgaWQ6IHN0cmluZ1xuICBjdXN0b21lck5hbWU6IHN0cmluZ1xuICBzZXJ2aWNlUHJvdmlkZXJOYW1lOiBzdHJpbmdcbiAgc2VydmljZUNhdGVnb3J5Pzogc3RyaW5nXG4gIGxhc3RNZXNzYWdlPzogc3RyaW5nXG4gIGxhc3RBY3Rpdml0eTogc3RyaW5nXG4gIHVucmVhZENvdW50OiBudW1iZXJcbiAgbWVzc2FnZUNvdW50PzogbnVtYmVyXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoYXRXaWRnZXQoKSB7XG4gIGNvbnN0IHsgaXNPcGVuLCBzZXRJc09wZW4sIGFjdGl2ZVByb3ZpZGVySWQsIGFjdGl2ZVByb3ZpZGVyTmFtZSB9ID0gdXNlQ2hhdFdpZGdldCgpXG4gIGNvbnN0IFtpc01pbmltaXplZCwgc2V0SXNNaW5pbWl6ZWRdID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtjb252ZXJzYXRpb25zLCBzZXRDb252ZXJzYXRpb25zXSA9IHVzZVN0YXRlPENvbnZlcnNhdGlvbltdPihbXSlcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFt1bnJlYWRUb3RhbCwgc2V0VW5yZWFkVG90YWxdID0gdXNlU3RhdGUoMClcbiAgY29uc3QgW2FjdGl2ZUNvbnZlcnNhdGlvbiwgc2V0QWN0aXZlQ29udmVyc2F0aW9uXSA9IHVzZVN0YXRlPENvbnZlcnNhdGlvbiB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8YW55W10+KFtdKVxuICBjb25zdCBbbmV3TWVzc2FnZSwgc2V0TmV3TWVzc2FnZV0gPSB1c2VTdGF0ZSgnJylcbiAgY29uc3QgW3NlbmRpbmcsIHNldFNlbmRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IHsgc29ja2V0LCBpc0Nvbm5lY3RlZCB9ID0gdXNlU29ja2V0KClcbiAgY29uc3QgeyB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQsIGlzTG9hZGluZyB9ID0gdXNlQXV0aCgpXG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBwYXRobmFtZSA9IHVzZVBhdGhuYW1lKClcblxuICAvLyBEZWJ1ZyBhdXRoZW50aWNhdGlvbiBzdGF0ZVxuICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gQXV0aCBEZWJ1ZzonLCB7XG4gICAgaXNBdXRoZW50aWNhdGVkLFxuICAgIGlzTG9hZGluZyxcbiAgICB1c2VyOiB1c2VyID8geyBpZDogdXNlci5pZCwgZW1haWw6IHVzZXIuZW1haWwsIHJvbGU6IHVzZXIucm9sZSB9IDogbnVsbCxcbiAgICBoYXNBdXRoVG9rZW46IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gISFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aF90b2tlbicpIDogJ1NTUicsXG4gICAgaGFzVXNlckRhdGE6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gISFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcl9kYXRhJykgOiAnU1NSJ1xuICB9KVxuXG4gIC8vIExvYWQgY29udmVyc2F0aW9ucyB3aGVuIHdpZGdldCBvcGVucyBhbmQgc2V0IHVwIFdlYlNvY2tldCBsaXN0ZW5lcnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNPcGVuICYmIGlzQXV0aGVudGljYXRlZCAmJiB1c2VyKSB7XG4gICAgICBsb2FkQ29udmVyc2F0aW9ucygpXG4gICAgICBcbiAgICAgIC8vIEpvaW4gdXNlcidzIHBlcnNvbmFsIHJvb20gZm9yIHJlYWwtdGltZSB1cGRhdGVzXG4gICAgICBpZiAoc29ja2V0ICYmIGlzQ29ubmVjdGVkKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdqb2luLXVzZXInLCB1c2VyLmlkKVxuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gSm9pbmVkIHVzZXIgcm9vbTonLCB1c2VyLmlkKVxuICAgICAgICBcbiAgICAgICAgLy8gTGlzdGVuIGZvciBjb252ZXJzYXRpb24gdXBkYXRlc1xuICAgICAgICBjb25zdCBoYW5kbGVDb252ZXJzYXRpb25zVXBkYXRlZCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gUmVjZWl2ZWQgY29udmVyc2F0aW9uc191cGRhdGVkIGV2ZW50LCByZWxvYWRpbmcuLi4nKVxuICAgICAgICAgIGxvYWRDb252ZXJzYXRpb25zKClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc29ja2V0Lm9uKCdjb252ZXJzYXRpb25zX3VwZGF0ZWQnLCBoYW5kbGVDb252ZXJzYXRpb25zVXBkYXRlZClcbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFudXBcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBzb2NrZXQub2ZmKCdjb252ZXJzYXRpb25zX3VwZGF0ZWQnLCBoYW5kbGVDb252ZXJzYXRpb25zVXBkYXRlZClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW2lzT3BlbiwgaXNBdXRoZW50aWNhdGVkLCB1c2VyLCBzb2NrZXQsIGlzQ29ubmVjdGVkXSlcblxuICAvLyBIYW5kbGUgb3BlbmluZyB3aXRoIHNwZWNpZmljIHByb3ZpZGVyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGFjdGl2ZVByb3ZpZGVySWQgJiYgaXNPcGVuICYmIGlzQXV0aGVudGljYXRlZCAmJiB1c2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gT3BlbmluZyB3aXRoIHByb3ZpZGVyOicsIGFjdGl2ZVByb3ZpZGVySWQsIGFjdGl2ZVByb3ZpZGVyTmFtZSlcbiAgICAgIC8vIFN0YXJ0IG9yIGdldCBjb252ZXJzYXRpb24gd2l0aCB0aGlzIHByb3ZpZGVyXG4gICAgICBzdGFydENvbnZlcnNhdGlvbldpdGhQcm92aWRlcihhY3RpdmVQcm92aWRlcklkKVxuICAgIH1cbiAgfSwgW2FjdGl2ZVByb3ZpZGVySWQsIGlzT3BlbiwgaXNBdXRoZW50aWNhdGVkLCB1c2VyXSlcblxuICAvLyBDYWxjdWxhdGUgdG90YWwgdW5yZWFkIG1lc3NhZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdG90YWwgPSBjb252ZXJzYXRpb25zLnJlZHVjZSgoc3VtLCBjb252KSA9PiBzdW0gKyBjb252LnVucmVhZENvdW50LCAwKVxuICAgIHNldFVucmVhZFRvdGFsKHRvdGFsKVxuICB9LCBbY29udmVyc2F0aW9uc10pXG5cbiAgY29uc3QgbG9hZENvbnZlcnNhdGlvbnMgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF1c2VyKSByZXR1cm5cbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTG9hZGluZyBjb252ZXJzYXRpb25zIGZvciB1c2VyOicsIHVzZXIucm9sZSwgdXNlci5pZClcbiAgICBzZXRMb2FkaW5nKHRydWUpXG4gICAgdHJ5IHtcbiAgICAgIC8vIEZvciBzZXJ2aWNlIHByb3ZpZGVycywgZ2V0IHRoZWlyIGNvbnZlcnNhdGlvbnNcbiAgICAgIGlmICh1c2VyLnJvbGUgPT09ICdzZXJ2aWNlX3Byb3ZpZGVyJyB8fCB1c2VyLnJvbGUgPT09ICd0cmFkZXNwZXJzb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBMb2FkaW5nIHByb3ZpZGVyIGNvbnZlcnNhdGlvbnMgZm9yOicsIHVzZXIuaWQpXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBBUEkgVVJMIHdpbGwgYmU6JywgYC9jaGF0L3Byb3ZpZGVyLyR7dXNlci5pZH0vY29udmVyc2F0aW9uc2ApXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUNsaWVudC5nZXRQcm92aWRlck1hcmtldHBsYWNlQ29udmVyc2F0aW9ucyh1c2VyLmlkKVxuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gUHJvdmlkZXIgY29udmVyc2F0aW9ucyBmdWxsIHJlc3BvbnNlOicsIHJlc3BvbnNlKVxuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gUHJvdmlkZXIgY29udmVyc2F0aW9ucyByZXNwb25zZS5kYXRhOicsIHJlc3BvbnNlLmRhdGEpXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBQcm92aWRlciBjb252ZXJzYXRpb25zIHJlc3BvbnNlLnN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpXG4gICAgICAgIFxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YT8uc3VjY2Vzcykge1xuICAgICAgICAgIGxldCBjb252ZXJzYXRpb25zRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBSYXcgY29udmVyc2F0aW9ucyBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGNvbnZlcnNhdGlvbnNEYXRhLCBudWxsLCAyKSlcbiAgICAgICAgICBcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHJlc3BvbnNlIGZvcm1hdHMgYW5kIG1hcCBmaWVsZHMgY29ycmVjdGx5XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29udmVyc2F0aW9uc0RhdGEpKSB7XG4gICAgICAgICAgICAvLyBEYXRhIGlzIGFscmVhZHkgYW4gYXJyYXkgLSBtYXAgdGhlIGZpZWxkc1xuICAgICAgICAgICAgY29uc3QgbWFwcGVkQ29udmVyc2F0aW9ucyA9IGNvbnZlcnNhdGlvbnNEYXRhLm1hcCgoY29udjogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAuLi5jb252LFxuICAgICAgICAgICAgICBsYXN0QWN0aXZpdHk6IGNvbnYubGFzdF9tZXNzYWdlX2F0IHx8IGNvbnYuY3JlYXRlZF9hdCwgLy8gTWFwIGxhc3RfbWVzc2FnZV9hdCB0byBsYXN0QWN0aXZpdHlcbiAgICAgICAgICAgICAgdW5yZWFkQ291bnQ6IGNvbnYudW5yZWFkX2NvdW50IHx8IDBcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgc2V0Q29udmVyc2F0aW9ucyhtYXBwZWRDb252ZXJzYXRpb25zKVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFNldCBwcm92aWRlciBjb252ZXJzYXRpb25zIChhcnJheSk6JywgbWFwcGVkQ29udmVyc2F0aW9ucy5sZW5ndGgsIG1hcHBlZENvbnZlcnNhdGlvbnMpXG4gICAgICAgICAgfSBlbHNlIGlmIChjb252ZXJzYXRpb25zRGF0YSAmJiB0eXBlb2YgY29udmVyc2F0aW9uc0RhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAvLyBEYXRhIGlzIGFuIG9iamVjdCwgY2hlY2sgaWYgaXQgaGFzIGEgY29udmVyc2F0aW9ucyBwcm9wZXJ0eSBvciBjb252ZXJ0IHRvIGFycmF5XG4gICAgICAgICAgICBpZiAoY29udmVyc2F0aW9uc0RhdGEuY29udmVyc2F0aW9ucyAmJiBBcnJheS5pc0FycmF5KGNvbnZlcnNhdGlvbnNEYXRhLmNvbnZlcnNhdGlvbnMpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG1hcHBlZENvbnZlcnNhdGlvbnMgPSBjb252ZXJzYXRpb25zRGF0YS5jb252ZXJzYXRpb25zLm1hcCgoY29udjogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLmNvbnYsXG4gICAgICAgICAgICAgICAgbGFzdEFjdGl2aXR5OiBjb252Lmxhc3RfbWVzc2FnZV9hdCB8fCBjb252LmNyZWF0ZWRfYXQsIC8vIE1hcCBsYXN0X21lc3NhZ2VfYXQgdG8gbGFzdEFjdGl2aXR5XG4gICAgICAgICAgICAgICAgdW5yZWFkQ291bnQ6IGNvbnYudW5yZWFkX2NvdW50IHx8IDBcbiAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgIHNldENvbnZlcnNhdGlvbnMobWFwcGVkQ29udmVyc2F0aW9ucylcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFNldCBwcm92aWRlciBjb252ZXJzYXRpb25zIChvYmplY3QuY29udmVyc2F0aW9ucyk6JywgbWFwcGVkQ29udmVyc2F0aW9ucy5sZW5ndGgsIG1hcHBlZENvbnZlcnNhdGlvbnMpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnZlcnNhdGlvbnNEYXRhLmRhdGEgJiYgQXJyYXkuaXNBcnJheShjb252ZXJzYXRpb25zRGF0YS5kYXRhKSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gU2V0IHByb3ZpZGVyIGNvbnZlcnNhdGlvbnMgKG9iamVjdC5kYXRhKTonLCBjb252ZXJzYXRpb25zRGF0YS5kYXRhLmxlbmd0aCwgY29udmVyc2F0aW9uc0RhdGEuZGF0YSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFRyeSB0byBjb252ZXJ0IG9iamVjdCB0byBhcnJheSBvciBoYW5kbGUgc2luZ2xlIGNvbnZlcnNhdGlvblxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gUmVjZWl2ZWQgb2JqZWN0IGRhdGE6JywgY29udmVyc2F0aW9uc0RhdGEpXG4gICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnNBcnJheSA9IE9iamVjdC52YWx1ZXMoY29udmVyc2F0aW9uc0RhdGEpLmZpbHRlcihpdGVtID0+IFxuICAgICAgICAgICAgICAgIGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICdpZCcgaW4gaXRlbVxuICAgICAgICAgICAgICApIGFzIENvbnZlcnNhdGlvbltdXG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IGNvbnZlcnNhdGlvbnMgd2l0aCBubyBtZXNzYWdlcyBhbmQgcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRDb252ZXJzYXRpb25zID0gY29udmVyc2F0aW9uc0FycmF5XG4gICAgICAgICAgICAgICAgLmZpbHRlcihjID0+IChjLm1lc3NhZ2VDb3VudCB8fCAwKSA+IDApIC8vIE9ubHkgc2hvdyBjb252ZXJzYXRpb25zIHdpdGggbWVzc2FnZXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChjb252LCBpbmRleCwgc2VsZikgPT4gXG4gICAgICAgICAgICAgICAgICBpbmRleCA9PT0gc2VsZi5maW5kSW5kZXgoYyA9PiBjLmlkID09PSBjb252LmlkKSAvLyBSZW1vdmUgZHVwbGljYXRlcyBieSBJRFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHNldENvbnZlcnNhdGlvbnMoZmlsdGVyZWRDb252ZXJzYXRpb25zKVxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gQ29udmVydGVkIG9iamVjdCB0byBhcnJheTonLCBmaWx0ZXJlZENvbnZlcnNhdGlvbnMubGVuZ3RoLCAnKGZpbHRlcmVkIGZyb20nLCBjb252ZXJzYXRpb25zQXJyYXkubGVuZ3RoLCAnKScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBObyBjb252ZXJzYXRpb25zIGRhdGEgZm91bmQnKVxuICAgICAgICAgICAgc2V0Q29udmVyc2F0aW9ucyhbXSlcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIEFQSSByZXNwb25zZSBub3Qgc3VjY2Vzc2Z1bCcpXG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFJlc3BvbnNlIHN0cnVjdHVyZTonLCB7XG4gICAgICAgICAgICBoYXNTdWNjZXNzOiAnc3VjY2VzcycgaW4gKHJlc3BvbnNlLmRhdGEgfHwge30pLFxuICAgICAgICAgICAgc3VjY2Vzc1ZhbHVlOiByZXNwb25zZS5kYXRhPy5zdWNjZXNzLFxuICAgICAgICAgICAgaGFzRGF0YTogJ2RhdGEnIGluIChyZXNwb25zZS5kYXRhIHx8IHt9KSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiB0eXBlb2YgcmVzcG9uc2UuZGF0YT8uZGF0YSxcbiAgICAgICAgICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YT8uZGF0YSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIHNldENvbnZlcnNhdGlvbnMoW10pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBjdXN0b21lcnMsIGdldCB0aGVpciBjb252ZXJzYXRpb25zXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBMb2FkaW5nIGN1c3RvbWVyIGNvbnZlcnNhdGlvbnMnKVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUNsaWVudC5nZXRDb252ZXJzYXRpb25zKClcbiAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIEN1c3RvbWVyIGNvbnZlcnNhdGlvbnMgcmVzcG9uc2U6JywgcmVzcG9uc2UuZGF0YSlcbiAgICAgICAgY29uc3QgY29udmVyc2F0aW9ucyA9IHJlc3BvbnNlLmRhdGE/LmRhdGE/LmNvbnZlcnNhdGlvbnNcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MgJiYgQXJyYXkuaXNBcnJheShjb252ZXJzYXRpb25zKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBDb252ZXJzYXRpb24gZGV0YWlsczonLCBjb252ZXJzYXRpb25zLm1hcChjID0+ICh7XG4gICAgICAgICAgICBpZDogYy5pZCxcbiAgICAgICAgICAgIHNlcnZpY2VQcm92aWRlck5hbWU6IGMuc2VydmljZVByb3ZpZGVyTmFtZSxcbiAgICAgICAgICAgIGN1c3RvbWVyTmFtZTogYy5jdXN0b21lck5hbWUsXG4gICAgICAgICAgICBtZXNzYWdlQ291bnQ6IGMubWVzc2FnZUNvdW50XG4gICAgICAgICAgfSkpKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZpbHRlciBvdXQgY29udmVyc2F0aW9ucyB3aXRoIG5vIG1lc3NhZ2VzIGFuZCByZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICAgIGNvbnN0IGZpbHRlcmVkQ29udmVyc2F0aW9ucyA9IGNvbnZlcnNhdGlvbnNcbiAgICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLm1lc3NhZ2VDb3VudCA+IDApIC8vIE9ubHkgc2hvdyBjb252ZXJzYXRpb25zIHdpdGggbWVzc2FnZXNcbiAgICAgICAgICAgIC5maWx0ZXIoKGNvbnYsIGluZGV4LCBzZWxmKSA9PiBcbiAgICAgICAgICAgICAgaW5kZXggPT09IHNlbGYuZmluZEluZGV4KGMgPT4gYy5pZCA9PT0gY29udi5pZCkgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgYnkgSURcbiAgICAgICAgICAgIClcbiAgICAgICAgICBcbiAgICAgICAgICBzZXRDb252ZXJzYXRpb25zKGZpbHRlcmVkQ29udmVyc2F0aW9ucylcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gU2V0IGN1c3RvbWVyIGNvbnZlcnNhdGlvbnM6JywgZmlsdGVyZWRDb252ZXJzYXRpb25zLmxlbmd0aCwgJyhmaWx0ZXJlZCBmcm9tJywgY29udmVyc2F0aW9ucy5sZW5ndGgsICcpJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTm8gY3VzdG9tZXIgY29udmVyc2F0aW9ucyBmb3VuZCBvciBpbnZhbGlkIHJlc3BvbnNlJylcbiAgICAgICAgICBzZXRDb252ZXJzYXRpb25zKFtdKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcign8J+SrCBDaGF0V2lkZ2V0IC0gRXJyb3IgbG9hZGluZyBjb252ZXJzYXRpb25zOicsIGVycm9yKVxuICAgICAgY29uc29sZS5lcnJvcign8J+SrCBDaGF0V2lkZ2V0IC0gRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YXR1czogZXJyb3IucmVzcG9uc2U/LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogZXJyb3IucmVzcG9uc2U/LnN0YXR1c1RleHQsXG4gICAgICAgIGRhdGE6IGVycm9yLnJlc3BvbnNlPy5kYXRhXG4gICAgICB9KVxuICAgICAgc2V0Q29udmVyc2F0aW9ucyhbXSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0TG9hZGluZyhmYWxzZSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBzdGFydENvbnZlcnNhdGlvbldpdGhQcm92aWRlciA9IGFzeW5jIChwcm92aWRlcklkOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFN0YXJ0aW5nIGNvbnZlcnNhdGlvbiB3aXRoIHByb3ZpZGVyOicsIHtcbiAgICAgICAgcHJvdmlkZXJJZCxcbiAgICAgICAgYWN0aXZlUHJvdmlkZXJOYW1lLFxuICAgICAgICBhY3RpdmVQcm92aWRlcklkXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgb3IgZ2V0IGNvbnZlcnNhdGlvbiB3aXRoIHRoaXMgcHJvdmlkZXJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpQ2xpZW50LnN0YXJ0Q29udmVyc2F0aW9uKHtcbiAgICAgICAgcHJvdmlkZXJJZCxcbiAgICAgICAgY3VzdG9tZXJJZDogdXNlcj8uaWQsXG4gICAgICAgIGN1c3RvbWVyTmFtZTogYCR7dXNlcj8uZmlyc3ROYW1lIHx8ICcnfSAke3VzZXI/Lmxhc3ROYW1lIHx8ICcnfWAudHJpbSgpIHx8ICdVc2VyJyxcbiAgICAgICAgY3VzdG9tZXJFbWFpbDogdXNlcj8uZW1haWwgfHwgJycsXG4gICAgICAgIGN1c3RvbWVyUGhvbmU6IHVzZXI/LnBob25lTnVtYmVyIHx8ICcnXG4gICAgICB9KVxuXG4gICAgICBpZiAocmVzcG9uc2UuZGF0YT8uc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhPy5kYXRhPy5jb252ZXJzYXRpb25JZCkge1xuICAgICAgICBjb25zdCBjb252ZXJzYXRpb25JZCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5jb252ZXJzYXRpb25JZFxuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gQ29udmVyc2F0aW9uIGNyZWF0ZWQvZm91bmQ6JywgY29udmVyc2F0aW9uSWQpXG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgY29udmVyc2F0aW9uIG9iamVjdCB0byBvcGVuIGltbWVkaWF0ZWx5XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyRGlzcGxheU5hbWUgPSBhY3RpdmVQcm92aWRlck5hbWUgfHwgJ9Ch0L/QtdGG0LjQsNC70LjRgdGCJ1xuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gVXNpbmcgcHJvdmlkZXIgbmFtZTonLCBwcm92aWRlckRpc3BsYXlOYW1lKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgdGVtcENvbnZlcnNhdGlvbjogQ29udmVyc2F0aW9uID0ge1xuICAgICAgICAgIGlkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICBjdXN0b21lck5hbWU6IGAke3VzZXI/LmZpcnN0TmFtZSB8fCAnJ30gJHt1c2VyPy5sYXN0TmFtZSB8fCAnJ31gLnRyaW0oKSB8fCAnQ3VzdG9tZXInLFxuICAgICAgICAgIHNlcnZpY2VQcm92aWRlck5hbWU6IHByb3ZpZGVyRGlzcGxheU5hbWUsXG4gICAgICAgICAgbGFzdE1lc3NhZ2U6ICcnLFxuICAgICAgICAgIGxhc3RBY3Rpdml0eTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIHVucmVhZENvdW50OiAwXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBPcGVuaW5nIHRlbXAgY29udmVyc2F0aW9uOicsIHRlbXBDb252ZXJzYXRpb24pXG4gICAgICAgIFxuICAgICAgICAvLyBPcGVuIHRoZSBjb252ZXJzYXRpb24gaW1tZWRpYXRlbHlcbiAgICAgICAgaGFuZGxlQ29udmVyc2F0aW9uQ2xpY2sodGVtcENvbnZlcnNhdGlvbilcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbG9hZCBjb252ZXJzYXRpb25zIGluIGJhY2tncm91bmQgdG8gdXBkYXRlIHRoZSBsaXN0XG4gICAgICAgIGxvYWRDb252ZXJzYXRpb25zKClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign8J+SrCBDaGF0V2lkZ2V0IC0gRXJyb3Igc3RhcnRpbmcgY29udmVyc2F0aW9uIHdpdGggcHJvdmlkZXI6JywgZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlQ29udmVyc2F0aW9uQ2xpY2sgPSBhc3luYyAoY29udmVyc2F0aW9uOiBDb252ZXJzYXRpb24pID0+IHtcbiAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gT3BlbmluZyBjb252ZXJzYXRpb24gaW5saW5lOicsIGNvbnZlcnNhdGlvbi5pZCwgY29udmVyc2F0aW9uKVxuICAgIFxuICAgIC8vIFNldCBhY3RpdmUgY29udmVyc2F0aW9uIGFuZCBsb2FkIG1lc3NhZ2VzXG4gICAgc2V0QWN0aXZlQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbilcbiAgICBzZXRNZXNzYWdlcyhbXSlcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gTG9hZCBtZXNzYWdlcyBmb3IgdGhpcyBjb252ZXJzYXRpb25cbiAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBMb2FkaW5nIG1lc3NhZ2VzIGZvciBjb252ZXJzYXRpb246JywgY29udmVyc2F0aW9uLmlkKVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQuZ2V0TWFya2V0cGxhY2VNZXNzYWdlcyhjb252ZXJzYXRpb24uaWQpXG4gICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTWVzc2FnZXMgQVBJIHJlc3BvbnNlOicsIHJlc3BvbnNlKVxuICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIE1lc3NhZ2VzIHJlc3BvbnNlIGRhdGE6JywgcmVzcG9uc2UuZGF0YSlcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MpIHtcbiAgICAgICAgbGV0IG1lc3NhZ2VzRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YVxuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gUmF3IG1lc3NhZ2VzIGRhdGE6JywgSlNPTi5zdHJpbmdpZnkobWVzc2FnZXNEYXRhLCBudWxsLCAyKSlcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcmVzcG9uc2UgZm9ybWF0c1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlc0RhdGEpKSB7XG4gICAgICAgICAgLy8gRGF0YSBpcyBhbHJlYWR5IGFuIGFycmF5XG4gICAgICAgICAgc2V0TWVzc2FnZXMobWVzc2FnZXNEYXRhKVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBMb2FkZWQgbWVzc2FnZXMgKGFycmF5KTonLCBtZXNzYWdlc0RhdGEubGVuZ3RoLCBtZXNzYWdlc0RhdGEpXG4gICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZXNEYXRhICYmIHR5cGVvZiBtZXNzYWdlc0RhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgLy8gRGF0YSBpcyBhbiBvYmplY3QsIGNoZWNrIGlmIGl0IGhhcyBhIG1lc3NhZ2VzIHByb3BlcnR5IG9yIGNvbnZlcnQgdG8gYXJyYXlcbiAgICAgICAgICBpZiAobWVzc2FnZXNEYXRhLm1lc3NhZ2VzICYmIEFycmF5LmlzQXJyYXkobWVzc2FnZXNEYXRhLm1lc3NhZ2VzKSkge1xuICAgICAgICAgICAgc2V0TWVzc2FnZXMobWVzc2FnZXNEYXRhLm1lc3NhZ2VzKVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIExvYWRlZCBtZXNzYWdlcyAob2JqZWN0Lm1lc3NhZ2VzKTonLCBtZXNzYWdlc0RhdGEubWVzc2FnZXMubGVuZ3RoLCBtZXNzYWdlc0RhdGEubWVzc2FnZXMpXG4gICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlc0RhdGEuZGF0YSAmJiBBcnJheS5pc0FycmF5KG1lc3NhZ2VzRGF0YS5kYXRhKSkge1xuICAgICAgICAgICAgc2V0TWVzc2FnZXMobWVzc2FnZXNEYXRhLmRhdGEpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTG9hZGVkIG1lc3NhZ2VzIChvYmplY3QuZGF0YSk6JywgbWVzc2FnZXNEYXRhLmRhdGEubGVuZ3RoLCBtZXNzYWdlc0RhdGEuZGF0YSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVHJ5IHRvIGNvbnZlcnQgb2JqZWN0IHRvIGFycmF5IG9yIGhhbmRsZSBzaW5nbGUgbWVzc2FnZVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFJlY2VpdmVkIG9iamVjdCBtZXNzYWdlcyBkYXRhOicsIG1lc3NhZ2VzRGF0YSlcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzQXJyYXkgPSBPYmplY3QudmFsdWVzKG1lc3NhZ2VzRGF0YSkuZmlsdGVyKGl0ZW0gPT4gXG4gICAgICAgICAgICAgIGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICdpZCcgaW4gaXRlbVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgc2V0TWVzc2FnZXMobWVzc2FnZXNBcnJheSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBDb252ZXJ0ZWQgbWVzc2FnZXMgb2JqZWN0IHRvIGFycmF5OicsIG1lc3NhZ2VzQXJyYXkubGVuZ3RoLCBtZXNzYWdlc0FycmF5KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTm8gbWVzc2FnZXMgZGF0YSBmb3VuZCcpXG4gICAgICAgICAgc2V0TWVzc2FnZXMoW10pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBNZXNzYWdlcyBBUEkgcmVzcG9uc2Ugbm90IHN1Y2Nlc3NmdWwnKVxuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gUmVzcG9uc2Ugc3RydWN0dXJlOicsIHtcbiAgICAgICAgICBoYXNTdWNjZXNzOiAnc3VjY2VzcycgaW4gKHJlc3BvbnNlLmRhdGEgfHwge30pLFxuICAgICAgICAgIHN1Y2Nlc3NWYWx1ZTogcmVzcG9uc2UuZGF0YT8uc3VjY2VzcyxcbiAgICAgICAgICBoYXNEYXRhOiAnZGF0YScgaW4gKHJlc3BvbnNlLmRhdGEgfHwge30pLFxuICAgICAgICAgIGRhdGFUeXBlOiB0eXBlb2YgcmVzcG9uc2UuZGF0YT8uZGF0YSxcbiAgICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGE/LmRhdGEpLFxuICAgICAgICAgIGRhdGFDb250ZW50OiByZXNwb25zZS5kYXRhPy5kYXRhXG4gICAgICAgIH0pXG4gICAgICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBdXRvLXNjcm9sbCB0byBib3R0b20gYWZ0ZXIgbG9hZGluZyBtZXNzYWdlc1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBzY3JvbGxUb0JvdHRvbSgpLCAyMDApXG4gICAgICBcbiAgICAgIC8vIE1hcmsgY29udmVyc2F0aW9uIGFzIHJlYWQgYWZ0ZXIgbG9hZGluZyBtZXNzYWdlc1xuICAgICAgbWFya0NvbnZlcnNhdGlvbkFzUmVhZChjb252ZXJzYXRpb24uaWQpXG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgc29ja2V0IGZvciByZWFsLXRpbWUgdXBkYXRlcyBpZiBub3QgYWxyZWFkeSBjb25uZWN0ZWRcbiAgICAgIGlmICghc29ja2V0KSB7XG4gICAgICAgIGluaXRpYWxpemVTb2NrZXQoY29udmVyc2F0aW9uLmlkKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfkqwgQ2hhdFdpZGdldCAtIEVycm9yIGxvYWRpbmcgbWVzc2FnZXM6JywgZXJyb3IpXG4gICAgICBjb25zb2xlLmVycm9yKCfwn5KsIENoYXRXaWRnZXQgLSBFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhdHVzOiBlcnJvci5yZXNwb25zZT8uc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiBlcnJvci5yZXNwb25zZT8uc3RhdHVzVGV4dCxcbiAgICAgICAgZGF0YTogZXJyb3IucmVzcG9uc2U/LmRhdGFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaW5pdGlhbGl6ZVNvY2tldCA9IChjb252ZXJzYXRpb25JZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFzb2NrZXQgfHwgIWlzQ29ubmVjdGVkKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gU29ja2V0IG5vdCBhdmFpbGFibGUgeWV0JylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gSm9pbmluZyBjb252ZXJzYXRpb24gcm9vbTonLCBjb252ZXJzYXRpb25JZClcbiAgICAgIHNvY2tldC5lbWl0KCdqb2luLWNvbnZlcnNhdGlvbicsIGNvbnZlcnNhdGlvbklkKVxuXG4gICAgICAvLyBMaXN0ZW4gZm9yIG5ldyBtZXNzYWdlcyBpbiB0aGlzIGNvbnZlcnNhdGlvblxuICAgICAgY29uc3QgaGFuZGxlTmV3TWVzc2FnZSA9IChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCByZWNlaXZlZCBuZXcgbWVzc2FnZTonLCBkYXRhKVxuICAgICAgICBpZiAoZGF0YS5jb252ZXJzYXRpb25JZCA9PT0gY29udmVyc2F0aW9uSWQgJiYgZGF0YS5tZXNzYWdlSWQpIHtcbiAgICAgICAgICBjb25zdCBuZXdNZXNzYWdlID0ge1xuICAgICAgICAgICAgaWQ6IGRhdGEubWVzc2FnZUlkLFxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IGRhdGEuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICBzZW5kZXJUeXBlOiBkYXRhLnNlbmRlclR5cGUsXG4gICAgICAgICAgICBzZW5kZXJOYW1lOiBkYXRhLnNlbmRlck5hbWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IGRhdGEudGltZXN0YW1wLFxuICAgICAgICAgICAgc2VudF9hdDogZGF0YS50aW1lc3RhbXAgLy8gQWRkIHNlbnRfYXQgZm9yIGNvbnNpc3RlbmN5XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RzID0gcHJldi5zb21lKG1zZyA9PiBtc2cuaWQgPT09IGRhdGEubWVzc2FnZUlkKVxuICAgICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQWRkaW5nIG5ldyBtZXNzYWdlIHRvIGNoYXQ6JywgbmV3TWVzc2FnZSlcbiAgICAgICAgICAgICAgcmV0dXJuIFsuLi5wcmV2LCBuZXdNZXNzYWdlXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByZXZcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNvY2tldC5vbignbmV3X21lc3NhZ2UnLCBoYW5kbGVOZXdNZXNzYWdlKVxuXG4gICAgICAvLyBDbGVhbnVwIGZ1bmN0aW9uXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBzb2NrZXQub2ZmKCduZXdfbWVzc2FnZScsIGhhbmRsZU5ld01lc3NhZ2UpXG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign8J+SrCBDaGF0V2lkZ2V0IC0gU29ja2V0IGluaXRpYWxpemF0aW9uIGVycm9yOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNlbmRNZXNzYWdlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghbmV3TWVzc2FnZS50cmltKCkgfHwgc2VuZGluZyB8fCAhYWN0aXZlQ29udmVyc2F0aW9uKSByZXR1cm5cblxuICAgIHNldFNlbmRpbmcodHJ1ZSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICBjb252ZXJzYXRpb25JZDogYWN0aXZlQ29udmVyc2F0aW9uLmlkLFxuICAgICAgICBzZW5kZXJUeXBlOiB1c2VyPy5yb2xlID09PSAnc2VydmljZV9wcm92aWRlcicgfHwgdXNlcj8ucm9sZSA9PT0gJ3RyYWRlc3BlcnNvbicgPyAncHJvdmlkZXInIDogJ2N1c3RvbWVyJyxcbiAgICAgICAgc2VuZGVyTmFtZTogYCR7dXNlcj8uZmlyc3ROYW1lfSAke3VzZXI/Lmxhc3ROYW1lfWAudHJpbSgpIHx8ICdVc2VyJyxcbiAgICAgICAgbWVzc2FnZTogbmV3TWVzc2FnZVxuICAgICAgfSlcblxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgbmV3TXNnID0ge1xuICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLmRhdGE/Lm1lc3NhZ2VJZCB8fCBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgY29udmVyc2F0aW9uSWQ6IGFjdGl2ZUNvbnZlcnNhdGlvbi5pZCxcbiAgICAgICAgICBzZW5kZXJUeXBlOiB1c2VyPy5yb2xlID09PSAnc2VydmljZV9wcm92aWRlcicgfHwgdXNlcj8ucm9sZSA9PT0gJ3RyYWRlc3BlcnNvbicgPyAncHJvdmlkZXInIDogJ2N1c3RvbWVyJyxcbiAgICAgICAgICBzZW5kZXJOYW1lOiBgJHt1c2VyPy5maXJzdE5hbWV9ICR7dXNlcj8ubGFzdE5hbWV9YC50cmltKCkgfHwgJ1VzZXInLFxuICAgICAgICAgIG1lc3NhZ2U6IG5ld01lc3NhZ2UsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgbmV3TXNnXSlcbiAgICAgICAgc2V0TmV3TWVzc2FnZSgnJylcbiAgICAgICAgXG4gICAgICAgIC8vIEF1dG8tc2Nyb2xsIGFmdGVyIHNlbmRpbmcgbWVzc2FnZVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNjcm9sbFRvQm90dG9tKCksIDEwMClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign8J+SrCBDaGF0V2lkZ2V0IC0gRXJyb3Igc2VuZGluZyBtZXNzYWdlOicsIGVycm9yKVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTZW5kaW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG1hcmtDb252ZXJzYXRpb25Bc1JlYWQgPSBhc3luYyAoY29udmVyc2F0aW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+TliBNYXJraW5nIGNvbnZlcnNhdGlvbiBhcyByZWFkOicsIGNvbnZlcnNhdGlvbklkKVxuICAgICAgY29uc3Qgc2VuZGVyVHlwZSA9IHVzZXI/LnJvbGUgPT09ICdzZXJ2aWNlX3Byb3ZpZGVyJyB8fCB1c2VyPy5yb2xlID09PSAndHJhZGVzcGVyc29uJyA/ICdwcm92aWRlcicgOiAnY3VzdG9tZXInXG4gICAgICBcbiAgICAgIGF3YWl0IGFwaUNsaWVudC5tYXJrTWFya2V0cGxhY2VBc1JlYWQoY29udmVyc2F0aW9uSWQsIHNlbmRlclR5cGUpXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgY29udmVyc2F0aW9uIGluIHRoZSBsb2NhbCBzdGF0ZSB0byByZW1vdmUgdW5yZWFkIGNvdW50XG4gICAgICBzZXRDb252ZXJzYXRpb25zKHByZXYgPT4gcHJldi5tYXAoY29udiA9PiBcbiAgICAgICAgY29udi5pZCA9PT0gY29udmVyc2F0aW9uSWQgXG4gICAgICAgICAgPyB7IC4uLmNvbnYsIHVucmVhZENvdW50OiAwIH1cbiAgICAgICAgICA6IGNvbnZcbiAgICAgICkpXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQ29udmVyc2F0aW9uIG1hcmtlZCBhcyByZWFkJylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBtYXJrIGNvbnZlcnNhdGlvbiBhcyByZWFkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNjcm9sbFRvQm90dG9tID0gKCkgPT4ge1xuICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0pXG4gIH1cblxuICAvLyBBdXRvLXNjcm9sbCB3aGVuIG1lc3NhZ2VzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHNjcm9sbFRvQm90dG9tKCksIDEwMClcbiAgICB9XG4gIH0sIFttZXNzYWdlc10pXG5cbiAgY29uc3QgZ29CYWNrVG9Db252ZXJzYXRpb25zID0gKCkgPT4ge1xuICAgIHNldEFjdGl2ZUNvbnZlcnNhdGlvbihudWxsKVxuICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgIHNldE5ld01lc3NhZ2UoJycpXG4gICAgLy8gU29ja2V0IGlzIGdsb2JhbCwgbm8gbmVlZCB0byBkaXNjb25uZWN0XG4gIH1cblxuICBjb25zdCBmb3JtYXRNZXNzYWdlVGltZSA9ICh0aW1lc3RhbXA6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgIGlmICghdGltZXN0YW1wKSByZXR1cm4gJ9C90LXQuNC30LLQtdGB0YLQvdC+J1xuICAgIFxuICAgIGxldCBkYXRlOiBEYXRlXG4gICAgXG4gICAgLy8gSGFuZGxlIGRpZmZlcmVudCB0aW1lc3RhbXAgZm9ybWF0c1xuICAgIGlmICh0eXBlb2YgdGltZXN0YW1wID09PSAnbnVtYmVyJykge1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCA+IDEwMDAwMDAwMDAwMDAgPyB0aW1lc3RhbXAgOiB0aW1lc3RhbXAgKiAxMDAwKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRpbWVzdGFtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIFNRTGl0ZSBkYXRldGltZSBmb3JtYXQ6IFwiMjAyNC0wMS0xNSAxMDozMDo0NVwiIG9yIElTTyBmb3JtYXRcbiAgICAgIGlmICh0aW1lc3RhbXAuaW5jbHVkZXMoJyAnKSAmJiAhdGltZXN0YW1wLmluY2x1ZGVzKCdUJykpIHtcbiAgICAgICAgLy8gU1FMaXRlIGZvcm1hdDogY29udmVydCB0byBJU08gZm9ybWF0XG4gICAgICAgIGNvbnN0IGlzb1RpbWVzdGFtcCA9IHRpbWVzdGFtcC5yZXBsYWNlKCcgJywgJ1QnKSArICdaJ1xuICAgICAgICBkYXRlID0gbmV3IERhdGUoaXNvVGltZXN0YW1wKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfQvdC10LjQt9Cy0LXRgdGC0L3QvidcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgZGF0ZSBpcyB2YWxpZFxuICAgIGlmIChpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBtZXNzYWdlIHRpbWVzdGFtcDonLCB0aW1lc3RhbXApXG4gICAgICByZXR1cm4gJ9C90LXQuNC30LLQtdGB0YLQvdC+J1xuICAgIH1cbiAgICBcbiAgICAvLyBSZXR1cm4gdGltZSBpbiBISDpNTSBmb3JtYXRcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCdiZy1CRycsIHsgXG4gICAgICAgIGhvdXI6ICcyLWRpZ2l0JywgXG4gICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgICAgICBob3VyMTI6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZm9ybWF0TGFzdEFjdGl2aXR5ID0gKHRpbWVzdGFtcDogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgaWYgKCF0aW1lc3RhbXApIHJldHVybiAn0L3QtdC40LfQstC10YHRgtC90L4nXG4gICAgXG4gICAgbGV0IGRhdGU6IERhdGVcbiAgICBcbiAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHRpbWVzdGFtcCBmb3JtYXRzIChzYW1lIGxvZ2ljIGFzIGZvcm1hdE1lc3NhZ2VUaW1lKVxuICAgIGlmICh0eXBlb2YgdGltZXN0YW1wID09PSAnbnVtYmVyJykge1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCA+IDEwMDAwMDAwMDAwMDAgPyB0aW1lc3RhbXAgOiB0aW1lc3RhbXAgKiAxMDAwKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRpbWVzdGFtcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIFNRTGl0ZSBkYXRldGltZSBmb3JtYXQ6IFwiMjAyNC0wMS0xNSAxMDozMDo0NVwiIG9yIElTTyBmb3JtYXRcbiAgICAgIGlmICh0aW1lc3RhbXAuaW5jbHVkZXMoJyAnKSAmJiAhdGltZXN0YW1wLmluY2x1ZGVzKCdUJykpIHtcbiAgICAgICAgLy8gU1FMaXRlIGZvcm1hdDogY29udmVydCB0byBJU08gZm9ybWF0XG4gICAgICAgIGNvbnN0IGlzb1RpbWVzdGFtcCA9IHRpbWVzdGFtcC5yZXBsYWNlKCcgJywgJ1QnKSArICdaJ1xuICAgICAgICBkYXRlID0gbmV3IERhdGUoaXNvVGltZXN0YW1wKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICfQvdC10LjQt9Cy0LXRgdGC0L3QvidcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgZGF0ZSBpcyB2YWxpZFxuICAgIGlmIChpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBsYXN0IGFjdGl2aXR5IHRpbWVzdGFtcDonLCB0aW1lc3RhbXApXG4gICAgICByZXR1cm4gJ9C90LXQuNC30LLQtdGB0YLQvdC+J1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgZGlmZk1zID0gbm93LmdldFRpbWUoKSAtIGRhdGUuZ2V0VGltZSgpXG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKGRpZmZNcyAvIDg2NDAwMDAwKVxuXG4gICAgLy8gU2hvdyBhY3R1YWwgdGltZSBmb3IgdG9kYXkncyBtZXNzYWdlcywgZGF0ZSBmb3Igb2xkZXIgb25lc1xuICAgIGlmIChkaWZmRGF5cyA9PT0gMCkge1xuICAgICAgLy8gVG9kYXkgLSBzaG93IHRpbWUgbGlrZSBcIjE0OjMwXCJcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygnYmctQkcnLCB7IFxuICAgICAgICAgIGhvdXI6ICcyLWRpZ2l0JywgXG4gICAgICAgICAgbWludXRlOiAnMi1kaWdpdCcsXG4gICAgICAgICAgaG91cjEyOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGlmZkRheXMgPT09IDEpIHtcbiAgICAgIC8vIFllc3RlcmRheSAtIHNob3cgXCLQstGH0LXRgNCwXCJcbiAgICAgIHJldHVybiAn0LLRh9C10YDQsCdcbiAgICB9IGVsc2UgaWYgKGRpZmZEYXlzIDwgNykge1xuICAgICAgLy8gVGhpcyB3ZWVrIC0gc2hvdyBkYXkgbmFtZVxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdiZy1CRycsIHsgd2Vla2RheTogJ3Nob3J0JyB9KVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gYCR7ZGlmZkRheXN90LRgXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9sZGVyIC0gc2hvdyBkYXRlXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2JnLUJHJywgeyBcbiAgICAgICAgICBkYXk6ICcyLWRpZ2l0JywgXG4gICAgICAgICAgbW9udGg6ICcyLWRpZ2l0JyBcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBXYWl0IGZvciBhdXRoZW50aWNhdGlvbiB0byBsb2FkXG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gQXV0aCBzdGlsbCBsb2FkaW5nLCB3YWl0aW5nLi4uJylcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLy8gRG9uJ3Qgc2hvdyB3aWRnZXQgb24gYXV0aGVudGljYXRpb24gcGFnZXNcbiAgaWYgKHBhdGhuYW1lPy5zdGFydHNXaXRoKCcvYXV0aC8nKSkge1xuICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBOb3Qgc2hvd2luZyBvbiBhdXRoIHBhZ2U6JywgcGF0aG5hbWUpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIERvbid0IHNob3cgd2lkZ2V0IGlmIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcbiAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQgfHwgIXVzZXIpIHtcbiAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTm90IHNob3dpbmcgd2lkZ2V0OiB1c2VyIG5vdCBhdXRoZW50aWNhdGVkJywgeyBpc0F1dGhlbnRpY2F0ZWQsIHVzZXI6ICEhdXNlciB9KVxuICAgIC8vIFRlbXBvcmFyeTogU2hvdyBhIGxvZ2luIHByb21wdCB3aWRnZXQgZm9yIG5vbi1hdXRoZW50aWNhdGVkIHVzZXJzXG4gICAgcmV0dXJuIChcbiAgICAgIDxidXR0b25cbiAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2F1dGgvbG9naW4nfVxuICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tNiByaWdodC02IGJnLWdyYXktNjAwIGhvdmVyOmJnLWdyYXktNzAwIHRleHQtd2hpdGUgcC00IHJvdW5kZWQtZnVsbCBzaGFkb3ctbGcgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwIHotWzk5OTldIHJlbGF0aXZlXCJcbiAgICAgICAgYXJpYS1sYWJlbD1cItCS0LvQtdC30YLQtSDQt9CwINGH0LDRglwiXG4gICAgICA+XG4gICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy02IGgtNlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk04IDEyaC4wMU0xMiAxMmguMDFNMTYgMTJoLjAxTTIxIDEyYzAgNC40MTgtNC4wMyA4LTkgOGE5Ljg2MyA5Ljg2MyAwIDAxLTQuMjU1LS45NDlMMyAyMGwxLjM5NS0zLjcyQzMuNTEyIDE1LjA0MiAzIDEzLjU3NCAzIDEyYzAtNC40MTggNC4wMy04IDktOHM5IDMuNTgyIDkgOHpcIiAvPlxuICAgICAgICA8L3N2Zz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSAtdG9wLTIgLXJpZ2h0LTIgYmctYmx1ZS01MDAgdGV4dC13aGl0ZSB0ZXh0LXhzIHJvdW5kZWQtZnVsbCB3LTYgaC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGZvbnQtYm9sZFwiPlxuICAgICAgICAgICFcbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2J1dHRvbj5cbiAgICApXG4gIH1cblxuICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gUmVuZGVyaW5nIHdpZGdldCBmb3IgdXNlcjonLCB1c2VyPy5yb2xlLCAnaXNPcGVuOicsIGlzT3BlbilcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7LyogQ2hhdCBXaWRnZXQgQnV0dG9uICovfVxuICAgICAgeyFpc09wZW4gJiYgKFxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SXNPcGVuKHRydWUpfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGJvdHRvbS02IHJpZ2h0LTYgYmctcHVycGxlLTYwMCBob3ZlcjpiZy1wdXJwbGUtNzAwIHRleHQtd2hpdGUgcC00IHJvdW5kZWQtZnVsbCBzaGFkb3ctbGcgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwIHotWzk5OTldIHJlbGF0aXZlIGJvcmRlci00IGJvcmRlci13aGl0ZVwiXG4gICAgICAgICAgYXJpYS1sYWJlbD1cItCe0YLQstC+0YDQuCDRh9Cw0YJcIlxuICAgICAgICAgIHN0eWxlPXt7IFxuICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsIFxuICAgICAgICAgICAgYm90dG9tOiAnMjRweCcsIFxuICAgICAgICAgICAgcmlnaHQ6ICcyNHB4JywgXG4gICAgICAgICAgICB6SW5kZXg6IDk5OTksXG4gICAgICAgICAgICB3aWR0aDogJzY0cHgnLFxuICAgICAgICAgICAgaGVpZ2h0OiAnNjRweCdcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTYgaC02XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNOCAxMmguMDFNMTIgMTJoLjAxTTE2IDEyaC4wMU0yMSAxMmMwIDQuNDE4LTQuMDMgOC05IDhhOS44NjMgOS44NjMgMCAwMS00LjI1NS0uOTQ5TDMgMjBsMS4zOTUtMy43MkMzLjUxMiAxNS4wNDIgMyAxMy41NzQgMyAxMmMwLTQuNDE4IDQuMDMtOCA5LThzOSAzLjU4MiA5IDh6XCIgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICBcbiAgICAgICAgICB7LyogVW5yZWFkIGJhZGdlICovfVxuICAgICAgICAgIHt1bnJlYWRUb3RhbCA+IDAgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSAtdG9wLTIgLXJpZ2h0LTIgYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHRleHQteHMgcm91bmRlZC1mdWxsIHctNiBoLTYgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZm9udC1ib2xkXCI+XG4gICAgICAgICAgICAgIHt1bnJlYWRUb3RhbCA+IDk5ID8gJzk5KycgOiB1bnJlYWRUb3RhbH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgKX1cblxuICAgICAgey8qIENoYXQgV2lkZ2V0IFdpbmRvdyAqL31cbiAgICAgIHtpc09wZW4gJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGZpeGVkIGJvdHRvbS02IHJpZ2h0LTYgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3cteGwgYm9yZGVyIHotWzk5OTldIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCAke1xuICAgICAgICAgIGlzTWluaW1pemVkID8gJ3ctODAgaC0xMicgOiAndy04MCBoLTk2J1xuICAgICAgICB9YH0+XG4gICAgICAgICAgey8qIEhlYWRlciAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTQgYm9yZGVyLWIgYmctcHVycGxlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtdC1sZ1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAge2FjdGl2ZUNvbnZlcnNhdGlvbiAmJiAoXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17Z29CYWNrVG9Db252ZXJzYXRpb25zfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZSBob3Zlcjp0ZXh0LWdyYXktMjAwIG1yLTJcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIOKGkFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgYmctZ3JlZW4tNDAwIHJvdW5kZWQtZnVsbFwiPjwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPlxuICAgICAgICAgICAgICAgICAge2FjdGl2ZUNvbnZlcnNhdGlvbiBcbiAgICAgICAgICAgICAgICAgICAgPyAodXNlcj8ucm9sZSA9PT0gJ2N1c3RvbWVyJyBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYWN0aXZlQ29udmVyc2F0aW9uLnNlcnZpY2VQcm92aWRlck5hbWUgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGFjdGl2ZUNvbnZlcnNhdGlvbi5jdXN0b21lck5hbWUpXG4gICAgICAgICAgICAgICAgICAgIDogJ9Ch0YrQvtCx0YnQtdC90LjRjyd9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIHthY3RpdmVDb252ZXJzYXRpb24gJiYgdXNlcj8ucm9sZSA9PT0gJ2N1c3RvbWVyJyAmJiBhY3RpdmVDb252ZXJzYXRpb24uc2VydmljZUNhdGVnb3J5ICYmIChcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1wdXJwbGUtMjAwXCI+XG4gICAgICAgICAgICAgICAgICAgIHtnZXRTZXJ2aWNlQ2F0ZWdvcnlMYWJlbChhY3RpdmVDb252ZXJzYXRpb24uc2VydmljZUNhdGVnb3J5KX1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgeyFhY3RpdmVDb252ZXJzYXRpb24gJiYgdW5yZWFkVG90YWwgPiAwICYmIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJiZy1yZWQtNTAwIHRleHQtd2hpdGUgdGV4dC14cyBweC0yIHB5LTEgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICB7dW5yZWFkVG90YWx9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0SXNNaW5pbWl6ZWQoIWlzTWluaW1pemVkKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIGhvdmVyOnRleHQtZ3JheS0yMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2lzTWluaW1pemVkID8gXCLQoNCw0LfRiNC40YDQuFwiIDogXCLQnNC40L3QuNC80LjQt9C40YDQsNC5XCJ9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgICAgIHtpc01pbmltaXplZCA/IChcbiAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTUgMTVsNy03IDcgN1wiIC8+XG4gICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNMTkgOWwtNyA3LTctN1wiIC8+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzT3BlbihmYWxzZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZSBob3Zlcjp0ZXh0LWdyYXktMjAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwi0JfQsNGC0LLQvtGA0Lgg0YfQsNGCXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy00IGgtNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTYgMThMMTggNk02IDZsMTIgMTJcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIENvbnRlbnQgKi99XG4gICAgICAgICAgeyFpc01pbmltaXplZCAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaC04MFwiPlxuICAgICAgICAgICAgICB7YWN0aXZlQ29udmVyc2F0aW9uID8gKFxuICAgICAgICAgICAgICAgIC8qIEFjdGl2ZSBDaGF0IFZpZXcgKi9cbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgey8qIE1lc3NhZ2VzIEFyZWEgKi99XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcC0zIHNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1ncmF5LTUwMCBweS04XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtMnhsIG1iLTJcIj7wn5KsPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+0J3Rj9C80LAg0YHRitC+0LHRidC10L3QuNGPPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLm1hcCgobXNnKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e21zZy5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4ICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodXNlcj8ucm9sZSA9PT0gJ3NlcnZpY2VfcHJvdmlkZXInIHx8IHVzZXI/LnJvbGUgPT09ICd0cmFkZXNwZXJzb24nKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAobXNnLnNlbmRlclR5cGUgPT09ICdwcm92aWRlcicgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChtc2cuc2VuZGVyVHlwZSA9PT0gJ2N1c3RvbWVyJyA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BtYXgtdy14cyBweC0zIHB5LTIgcm91bmRlZC1sZyB0ZXh0LXNtICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1c2VyPy5yb2xlID09PSAnc2VydmljZV9wcm92aWRlcicgfHwgdXNlcj8ucm9sZSA9PT0gJ3RyYWRlc3BlcnNvbicpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKG1zZy5zZW5kZXJUeXBlID09PSAncHJvdmlkZXInID8gJ2JnLXB1cnBsZS02MDAgdGV4dC13aGl0ZScgOiAnYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAobXNnLnNlbmRlclR5cGUgPT09ICdjdXN0b21lcicgPyAnYmctcHVycGxlLTYwMCB0ZXh0LXdoaXRlJyA6ICdiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+e21zZy5tZXNzYWdlfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B0ZXh0LXhzIG10LTEgJHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHVzZXI/LnJvbGUgPT09ICdzZXJ2aWNlX3Byb3ZpZGVyJyB8fCB1c2VyPy5yb2xlID09PSAndHJhZGVzcGVyc29uJykgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAobXNnLnNlbmRlclR5cGUgPT09ICdwcm92aWRlcicgPyAndGV4dC1wdXJwbGUtMjAwJyA6ICd0ZXh0LWdyYXktNTAwJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChtc2cuc2VuZGVyVHlwZSA9PT0gJ2N1c3RvbWVyJyA/ICd0ZXh0LXB1cnBsZS0yMDAnIDogJ3RleHQtZ3JheS01MDAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0TWVzc2FnZVRpbWUobXNnLnNlbnRfYXQgfHwgbXNnLnRpbWVzdGFtcCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgey8qIEludmlzaWJsZSBlbGVtZW50IHRvIHNjcm9sbCB0byAqL31cbiAgICAgICAgICAgICAgICAgICAgPGRpdiByZWY9e21lc3NhZ2VzRW5kUmVmfSAvPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBNZXNzYWdlIElucHV0ICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e25ld01lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldE5ld01lc3NhZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlQcmVzcz17KGUpID0+IGUua2V5ID09PSAnRW50ZXInICYmIHNlbmRNZXNzYWdlKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cItCd0LDQv9C40YjQtdGC0LUg0YHRitC+0LHRidC10L3QuNC1Li4uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBib3JkZXIgcm91bmRlZC1sZyBweC0zIHB5LTIgdGV4dC1zbSBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctcHVycGxlLTUwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17c2VuZGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3NlbmRNZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFuZXdNZXNzYWdlLnRyaW0oKSB8fCBzZW5kaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctcHVycGxlLTYwMCB0ZXh0LXdoaXRlIHB4LTMgcHktMiByb3VuZGVkLWxnIGRpc2FibGVkOm9wYWNpdHktNTAgdGV4dC1zbSBob3ZlcjpiZy1wdXJwbGUtNzAwXCJcbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2VuZGluZyA/ICcuLi4nIDogJ/Cfk6QnfVxuICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIC8qIENvbnZlcnNhdGlvbnMgTGlzdCBWaWV3ICovXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHtsb2FkaW5nID8gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLXB1cnBsZS02MDAgbXgtYXV0byBtYi0yXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj7Ql9Cw0YDQtdC20LTQsNC90LUuLi48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSA6IGNvbnZlcnNhdGlvbnMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTR4bCBtYi0yXCI+8J+SrDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbVwiPtCX0LTRgNCw0LLQtdC50YLQtSwge3VzZXI/LmZpcnN0TmFtZX0hPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZXI/LnJvbGUgPT09ICdzZXJ2aWNlX3Byb3ZpZGVyJyB8fCB1c2VyPy5yb2xlID09PSAndHJhZGVzcGVyc29uJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICfQndGP0LzQsCDQsNC60YLQuNCy0L3QuCDRgNCw0LfQs9C+0LLQvtGA0Lgg0YEg0LrQu9C40LXQvdGC0LgnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAn0J3Rj9C80LAg0LDQutGC0LjQstC90Lgg0YDQsNC30LPQvtCy0L7RgNC4J1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgLyogQ29udmVyc2F0aW9ucyBMaXN0ICovXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICAgIHtjb252ZXJzYXRpb25zLm1hcCgoY29udmVyc2F0aW9uKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2NvbnZlcnNhdGlvbi5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVDb252ZXJzYXRpb25DbGljayhjb252ZXJzYXRpb24pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtNCBob3ZlcjpiZy1ncmF5LTUwIGN1cnNvci1wb2ludGVyIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBmbGV4IGl0ZW1zLXN0YXJ0IHNwYWNlLXgtM1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMTAgaC0xMCBiZy1wdXJwbGUtMTAwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1wdXJwbGUtNjAwIGZvbnQtbWVkaXVtIHRleHQtc21cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyh1c2VyPy5yb2xlID09PSAnY3VzdG9tZXInID8gY29udmVyc2F0aW9uLnNlcnZpY2VQcm92aWRlck5hbWUgOiBjb252ZXJzYXRpb24uY3VzdG9tZXJOYW1lKT8uY2hhckF0KDApIHx8ICdDJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgdHJ1bmNhdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXNlcj8ucm9sZSA9PT0gJ2N1c3RvbWVyJyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGNvbnZlcnNhdGlvbi5zZXJ2aWNlUHJvdmlkZXJOYW1lIHx8ICfQndC10LjQt9Cy0LXRgdGC0LXQvSDRgdC/0LXRhtC40LDQu9C40YHRgicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChjb252ZXJzYXRpb24uY3VzdG9tZXJOYW1lIHx8ICfQndC10LjQt9Cy0LXRgdGC0LXQvSDQutC70LjQtdC90YInKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb252ZXJzYXRpb24udW5yZWFkQ291bnQgPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweC0yIHB5LTEgdGV4dC14cyBmb250LWJvbGQgbGVhZGluZy1ub25lIHRleHQtd2hpdGUgYmctcmVkLTYwMCByb3VuZGVkLWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbnZlcnNhdGlvbi51bnJlYWRDb3VudCA+IDk5ID8gJzk5KycgOiBjb252ZXJzYXRpb24udW5yZWFkQ291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRMYXN0QWN0aXZpdHkoY29udmVyc2F0aW9uLmxhc3RBY3Rpdml0eSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbnZlcnNhdGlvbi5sYXN0TWVzc2FnZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMCB0cnVuY2F0ZSBtdC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbnZlcnNhdGlvbi5sYXN0TWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgey8qIFF1aWNrIEFjdGlvbnMgKi99XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvcmRlci10IHAtMyBzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB3aW5kb3cub3BlbignL3NlYXJjaCcsICdfYmxhbmsnKX1cbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHRleHQtc20gdGV4dC1wdXJwbGUtNjAwIGhvdmVyOnRleHQtcHVycGxlLTgwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICDwn5SNINCi0YrRgNGB0Lgg0YHQv9C10YbQuNCw0LvQuNGB0YLQuFxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgeyh1c2VyPy5yb2xlID09PSAnc2VydmljZV9wcm92aWRlcicgfHwgdXNlcj8ucm9sZSA9PT0gJ3RyYWRlc3BlcnNvbicpICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93Lm9wZW4oJy9kYXNoYm9hcmQnLCAnX2JsYW5rJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgdGV4dC1zbSB0ZXh0LXB1cnBsZS02MDAgaG92ZXI6dGV4dC1wdXJwbGUtODAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAg8J+TiiDQotCw0LHQu9C+INC30LAg0YPQv9GA0LDQstC70LXQvdC40LVcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93Lm9wZW4oJy9kYXNoYm9hcmQ/dmlldz1hc3NpZ25lZCcsICdfYmxhbmsnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCB0ZXh0LXNtIHRleHQtcHVycGxlLTYwMCBob3Zlcjp0ZXh0LXB1cnBsZS04MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICDwn5OLINCc0L7QuNGC0LUg0LfQsNGP0LLQutC4XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvPlxuICApXG59XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VQYXRobmFtZSIsInVzZUF1dGgiLCJ1c2VTb2NrZXQiLCJ1c2VDaGF0V2lkZ2V0IiwiYXBpQ2xpZW50IiwiZ2V0U2VydmljZUNhdGVnb3J5TGFiZWwiLCJjYXRlZ29yeSIsImNhdGVnb3JpZXMiLCJDaGF0V2lkZ2V0IiwiaXNPcGVuIiwic2V0SXNPcGVuIiwiYWN0aXZlUHJvdmlkZXJJZCIsImFjdGl2ZVByb3ZpZGVyTmFtZSIsImlzTWluaW1pemVkIiwic2V0SXNNaW5pbWl6ZWQiLCJjb252ZXJzYXRpb25zIiwic2V0Q29udmVyc2F0aW9ucyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwidW5yZWFkVG90YWwiLCJzZXRVbnJlYWRUb3RhbCIsImFjdGl2ZUNvbnZlcnNhdGlvbiIsInNldEFjdGl2ZUNvbnZlcnNhdGlvbiIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJuZXdNZXNzYWdlIiwic2V0TmV3TWVzc2FnZSIsInNlbmRpbmciLCJzZXRTZW5kaW5nIiwic29ja2V0IiwiaXNDb25uZWN0ZWQiLCJ1c2VyIiwiaXNBdXRoZW50aWNhdGVkIiwiaXNMb2FkaW5nIiwibWVzc2FnZXNFbmRSZWYiLCJwYXRobmFtZSIsImNvbnNvbGUiLCJsb2ciLCJpZCIsImVtYWlsIiwicm9sZSIsImhhc0F1dGhUb2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJoYXNVc2VyRGF0YSIsImxvYWRDb252ZXJzYXRpb25zIiwiZW1pdCIsImhhbmRsZUNvbnZlcnNhdGlvbnNVcGRhdGVkIiwib24iLCJvZmYiLCJzdGFydENvbnZlcnNhdGlvbldpdGhQcm92aWRlciIsInRvdGFsIiwicmVkdWNlIiwic3VtIiwiY29udiIsInVucmVhZENvdW50IiwicmVzcG9uc2UiLCJnZXRQcm92aWRlck1hcmtldHBsYWNlQ29udmVyc2F0aW9ucyIsImRhdGEiLCJzdGF0dXMiLCJzdWNjZXNzIiwiY29udmVyc2F0aW9uc0RhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiQXJyYXkiLCJpc0FycmF5IiwibWFwcGVkQ29udmVyc2F0aW9ucyIsIm1hcCIsImxhc3RBY3Rpdml0eSIsImxhc3RfbWVzc2FnZV9hdCIsImNyZWF0ZWRfYXQiLCJ1bnJlYWRfY291bnQiLCJsZW5ndGgiLCJjb252ZXJzYXRpb25zQXJyYXkiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJpdGVtIiwiZmlsdGVyZWRDb252ZXJzYXRpb25zIiwiYyIsIm1lc3NhZ2VDb3VudCIsImluZGV4Iiwic2VsZiIsImZpbmRJbmRleCIsImhhc1N1Y2Nlc3MiLCJzdWNjZXNzVmFsdWUiLCJoYXNEYXRhIiwiZGF0YVR5cGUiLCJnZXRDb252ZXJzYXRpb25zIiwic2VydmljZVByb3ZpZGVyTmFtZSIsImN1c3RvbWVyTmFtZSIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1c1RleHQiLCJwcm92aWRlcklkIiwic3RhcnRDb252ZXJzYXRpb24iLCJjdXN0b21lcklkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJ0cmltIiwiY3VzdG9tZXJFbWFpbCIsImN1c3RvbWVyUGhvbmUiLCJwaG9uZU51bWJlciIsImNvbnZlcnNhdGlvbklkIiwicHJvdmlkZXJEaXNwbGF5TmFtZSIsInRlbXBDb252ZXJzYXRpb24iLCJsYXN0TWVzc2FnZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImhhbmRsZUNvbnZlcnNhdGlvbkNsaWNrIiwiY29udmVyc2F0aW9uIiwiZ2V0TWFya2V0cGxhY2VNZXNzYWdlcyIsIm1lc3NhZ2VzRGF0YSIsIm1lc3NhZ2VzQXJyYXkiLCJkYXRhQ29udGVudCIsInNldFRpbWVvdXQiLCJzY3JvbGxUb0JvdHRvbSIsIm1hcmtDb252ZXJzYXRpb25Bc1JlYWQiLCJpbml0aWFsaXplU29ja2V0IiwiaGFuZGxlTmV3TWVzc2FnZSIsIm1lc3NhZ2VJZCIsInNlbmRlclR5cGUiLCJzZW5kZXJOYW1lIiwidGltZXN0YW1wIiwic2VudF9hdCIsInByZXYiLCJleGlzdHMiLCJzb21lIiwibXNnIiwic2VuZE1lc3NhZ2UiLCJuZXdNc2ciLCJub3ciLCJ0b1N0cmluZyIsIm1hcmtNYXJrZXRwbGFjZUFzUmVhZCIsImN1cnJlbnQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiZ29CYWNrVG9Db252ZXJzYXRpb25zIiwiZm9ybWF0TWVzc2FnZVRpbWUiLCJkYXRlIiwiaW5jbHVkZXMiLCJpc29UaW1lc3RhbXAiLCJyZXBsYWNlIiwiaXNOYU4iLCJnZXRUaW1lIiwid2FybiIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJob3VyMTIiLCJlIiwiZm9ybWF0TGFzdEFjdGl2aXR5IiwiZGlmZk1zIiwiZGlmZkRheXMiLCJNYXRoIiwiZmxvb3IiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ3ZWVrZGF5IiwiZGF5IiwibW9udGgiLCJzdGFydHNXaXRoIiwiYnV0dG9uIiwib25DbGljayIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNsYXNzTmFtZSIsImFyaWEtbGFiZWwiLCJzdmciLCJmaWxsIiwic3Ryb2tlIiwidmlld0JveCIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsImQiLCJkaXYiLCJzdHlsZSIsInBvc2l0aW9uIiwiYm90dG9tIiwicmlnaHQiLCJ6SW5kZXgiLCJ3aWR0aCIsImhlaWdodCIsInNwYW4iLCJzZXJ2aWNlQ2F0ZWdvcnkiLCJwIiwicmVmIiwiaW5wdXQiLCJ0eXBlIiwidmFsdWUiLCJvbkNoYW5nZSIsInRhcmdldCIsIm9uS2V5UHJlc3MiLCJrZXkiLCJwbGFjZWhvbGRlciIsImRpc2FibGVkIiwiY2hhckF0Iiwib3BlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/ChatWidget.tsx\n"));

/***/ })

});