"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/search/page",{

/***/ "(app-pages-browser)/./src/components/ChatWidget.tsx":
/*!***************************************!*\
  !*** ./src/components/ChatWidget.tsx ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ChatWidget; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(app-pages-browser)/./src/contexts/AuthContext.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/api */ \"(app-pages-browser)/./src/lib/api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\nfunction ChatWidget() {\n    _s();\n    const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isMinimized, setIsMinimized] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [conversations, setConversations] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [unreadTotal, setUnreadTotal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [activeConversation, setActiveConversation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [newMessage, setNewMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [sending, setSending] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [socket, setSocket] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const { user, isAuthenticated, isLoading } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth)();\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const pathname = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.usePathname)();\n    // Debug authentication state\n    console.log(\"\\uD83D\\uDCAC ChatWidget - Auth Debug:\", {\n        isAuthenticated,\n        isLoading,\n        user: user ? {\n            id: user.id,\n            email: user.email,\n            role: user.role\n        } : null,\n        hasAuthToken:  true ? !!localStorage.getItem(\"auth_token\") : 0,\n        hasUserData:  true ? !!localStorage.getItem(\"user_data\") : 0\n    });\n    // Load conversations when widget opens and set up global WebSocket\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isOpen && isAuthenticated && user) {\n            loadConversations();\n            // Set up periodic refresh every 30 seconds when widget is open\n            const refreshInterval = setInterval(()=>{\n                loadConversations();\n            }, 30000);\n            return ()=>clearInterval(refreshInterval);\n        }\n    }, [\n        isOpen,\n        isAuthenticated,\n        user\n    ]);\n    // Calculate total unread messages\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const total = conversations.reduce((sum, conv)=>sum + conv.unreadCount, 0);\n        setUnreadTotal(total);\n    }, [\n        conversations\n    ]);\n    const loadConversations = async ()=>{\n        if (!user) return;\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Loading conversations for user:\", user.role, user.id);\n        setLoading(true);\n        try {\n            // For service providers, get their conversations\n            if (user.role === \"service_provider\" || user.role === \"tradesperson\") {\n                var _response_data;\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Loading provider conversations for:\", user.id);\n                console.log(\"\\uD83D\\uDCAC ChatWidget - API URL will be:\", \"/chat/provider/\".concat(user.id, \"/conversations\"));\n                const response = await _lib_api__WEBPACK_IMPORTED_MODULE_4__.apiClient.getProviderMarketplaceConversations(user.id);\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Provider conversations full response:\", response);\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Provider conversations response.data:\", response.data);\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Provider conversations response.status:\", response.status);\n                if ((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) {\n                    let conversationsData = response.data.data;\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Raw conversations data:\", JSON.stringify(conversationsData, null, 2));\n                    // Handle different response formats and map fields correctly\n                    if (Array.isArray(conversationsData)) {\n                        // Data is already an array - map the fields\n                        const mappedConversations = conversationsData.map((conv)=>({\n                                ...conv,\n                                lastActivity: conv.last_message_at || conv.created_at,\n                                unreadCount: conv.unread_count || 0\n                            }));\n                        setConversations(mappedConversations);\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Set provider conversations (array):\", mappedConversations.length, mappedConversations);\n                    } else if (conversationsData && typeof conversationsData === \"object\") {\n                        // Data is an object, check if it has a conversations property or convert to array\n                        if (conversationsData.conversations && Array.isArray(conversationsData.conversations)) {\n                            const mappedConversations = conversationsData.conversations.map((conv)=>({\n                                    ...conv,\n                                    lastActivity: conv.last_message_at || conv.created_at,\n                                    unreadCount: conv.unread_count || 0\n                                }));\n                            setConversations(mappedConversations);\n                            console.log(\"\\uD83D\\uDCAC ChatWidget - Set provider conversations (object.conversations):\", mappedConversations.length, mappedConversations);\n                        } else if (conversationsData.data && Array.isArray(conversationsData.data)) {\n                            setConversations(conversationsData.data);\n                            console.log(\"\\uD83D\\uDCAC ChatWidget - Set provider conversations (object.data):\", conversationsData.data.length, conversationsData.data);\n                        } else {\n                            // Try to convert object to array or handle single conversation\n                            console.log(\"\\uD83D\\uDCAC ChatWidget - Received object data:\", conversationsData);\n                            const conversationsArray = Object.values(conversationsData).filter((item)=>item && typeof item === \"object\" && \"id\" in item);\n                            setConversations(conversationsArray);\n                            console.log(\"\\uD83D\\uDCAC ChatWidget - Converted object to array:\", conversationsArray.length, conversationsArray);\n                        }\n                    } else {\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - No conversations data found\");\n                        setConversations([]);\n                    }\n                } else {\n                    var _response_data1, _response_data2, _response_data3;\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - API response not successful\");\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Response structure:\", {\n                        hasSuccess: \"success\" in (response.data || {}),\n                        successValue: (_response_data1 = response.data) === null || _response_data1 === void 0 ? void 0 : _response_data1.success,\n                        hasData: \"data\" in (response.data || {}),\n                        dataType: typeof ((_response_data2 = response.data) === null || _response_data2 === void 0 ? void 0 : _response_data2.data),\n                        isArray: Array.isArray((_response_data3 = response.data) === null || _response_data3 === void 0 ? void 0 : _response_data3.data)\n                    });\n                    setConversations([]);\n                }\n            } else {\n                var _response_data_data, _response_data4, _response_data5;\n                // For customers, get their conversations\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Loading customer conversations\");\n                const response = await _lib_api__WEBPACK_IMPORTED_MODULE_4__.apiClient.getConversations();\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Customer conversations response:\", response.data);\n                const conversations = (_response_data4 = response.data) === null || _response_data4 === void 0 ? void 0 : (_response_data_data = _response_data4.data) === null || _response_data_data === void 0 ? void 0 : _response_data_data.conversations;\n                if (((_response_data5 = response.data) === null || _response_data5 === void 0 ? void 0 : _response_data5.success) && Array.isArray(conversations)) {\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Conversation details:\", conversations.map((c)=>({\n                            id: c.id,\n                            serviceProviderName: c.serviceProviderName,\n                            customerName: c.customerName\n                        })));\n                    setConversations(conversations);\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Set customer conversations:\", conversations.length);\n                } else {\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - No customer conversations found or invalid response\");\n                    setConversations([]);\n                }\n            }\n        } catch (error) {\n            var _error_response, _error_response1, _error_response2;\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error loading conversations:\", error);\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error details:\", {\n                message: error.message,\n                status: (_error_response = error.response) === null || _error_response === void 0 ? void 0 : _error_response.status,\n                statusText: (_error_response1 = error.response) === null || _error_response1 === void 0 ? void 0 : _error_response1.statusText,\n                data: (_error_response2 = error.response) === null || _error_response2 === void 0 ? void 0 : _error_response2.data\n            });\n            setConversations([]);\n        } finally{\n            setLoading(false);\n        }\n    };\n    const handleConversationClick = async (conversation)=>{\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Opening conversation inline:\", conversation.id, conversation);\n        // Set active conversation and load messages\n        setActiveConversation(conversation);\n        setMessages([]);\n        try {\n            var _response_data;\n            // Load messages for this conversation\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Loading messages for conversation:\", conversation.id);\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_4__.apiClient.getMarketplaceMessages(conversation.id);\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Messages API response:\", response);\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Messages response data:\", response.data);\n            if ((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) {\n                let messagesData = response.data.data;\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Raw messages data:\", JSON.stringify(messagesData, null, 2));\n                // Handle different response formats\n                if (Array.isArray(messagesData)) {\n                    // Data is already an array\n                    setMessages(messagesData);\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - Loaded messages (array):\", messagesData.length, messagesData);\n                } else if (messagesData && typeof messagesData === \"object\") {\n                    // Data is an object, check if it has a messages property or convert to array\n                    if (messagesData.messages && Array.isArray(messagesData.messages)) {\n                        setMessages(messagesData.messages);\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Loaded messages (object.messages):\", messagesData.messages.length, messagesData.messages);\n                    } else if (messagesData.data && Array.isArray(messagesData.data)) {\n                        setMessages(messagesData.data);\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Loaded messages (object.data):\", messagesData.data.length, messagesData.data);\n                    } else {\n                        // Try to convert object to array or handle single message\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Received object messages data:\", messagesData);\n                        const messagesArray = Object.values(messagesData).filter((item)=>item && typeof item === \"object\" && \"id\" in item);\n                        setMessages(messagesArray);\n                        console.log(\"\\uD83D\\uDCAC ChatWidget - Converted messages object to array:\", messagesArray.length, messagesArray);\n                    }\n                } else {\n                    console.log(\"\\uD83D\\uDCAC ChatWidget - No messages data found\");\n                    setMessages([]);\n                }\n            } else {\n                var _response_data1, _response_data2, _response_data3, _response_data4;\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Messages API response not successful\");\n                console.log(\"\\uD83D\\uDCAC ChatWidget - Response structure:\", {\n                    hasSuccess: \"success\" in (response.data || {}),\n                    successValue: (_response_data1 = response.data) === null || _response_data1 === void 0 ? void 0 : _response_data1.success,\n                    hasData: \"data\" in (response.data || {}),\n                    dataType: typeof ((_response_data2 = response.data) === null || _response_data2 === void 0 ? void 0 : _response_data2.data),\n                    isArray: Array.isArray((_response_data3 = response.data) === null || _response_data3 === void 0 ? void 0 : _response_data3.data),\n                    dataContent: (_response_data4 = response.data) === null || _response_data4 === void 0 ? void 0 : _response_data4.data\n                });\n                setMessages([]);\n            }\n            // Auto-scroll to bottom after loading messages\n            setTimeout(()=>scrollToBottom(), 200);\n            // Mark conversation as read after loading messages\n            markConversationAsRead(conversation.id);\n            // Initialize socket for real-time updates if not already connected\n            if (!socket) {\n                initializeSocket(conversation.id);\n            }\n        } catch (error) {\n            var _error_response, _error_response1, _error_response2;\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error loading messages:\", error);\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error details:\", {\n                message: error.message,\n                status: (_error_response = error.response) === null || _error_response === void 0 ? void 0 : _error_response.status,\n                statusText: (_error_response1 = error.response) === null || _error_response1 === void 0 ? void 0 : _error_response1.statusText,\n                data: (_error_response2 = error.response) === null || _error_response2 === void 0 ? void 0 : _error_response2.data\n            });\n        }\n    };\n    const initializeSocket = (conversationId)=>{\n        try {\n            const apiUrl = \"http://192.168.0.129:3000/api/v1\" || 0;\n            const socketUrl = apiUrl.replace(\"/api/v1\", \"\");\n            console.log(\"\\uD83D\\uDCAC ChatWidget - Connecting to socket for conversation:\", conversationId);\n            const { io } = __webpack_require__(/*! socket.io-client */ \"(app-pages-browser)/./node_modules/socket.io-client/build/cjs/index.js\");\n            const socketInstance = io(socketUrl, {\n                transports: [\n                    \"websocket\",\n                    \"polling\"\n                ],\n                timeout: 10000,\n                reconnection: true\n            });\n            socketInstance.on(\"connect\", ()=>{\n                console.log(\"✅ ChatWidget connected to WebSocket\");\n                setSocket(socketInstance);\n                socketInstance.emit(\"join-conversation\", conversationId);\n            });\n            socketInstance.on(\"new_message\", (data)=>{\n                console.log(\"\\uD83D\\uDCAC ChatWidget received new message:\", data);\n                if (data.conversationId === conversationId && data.messageId) {\n                    const newMessage = {\n                        id: data.messageId,\n                        conversationId: data.conversationId,\n                        senderType: data.senderType,\n                        senderName: data.senderName,\n                        message: data.message,\n                        timestamp: data.timestamp,\n                        sent_at: data.timestamp // Add sent_at for consistency\n                    };\n                    setMessages((prev)=>{\n                        const exists = prev.some((msg)=>msg.id === data.messageId);\n                        if (!exists) {\n                            console.log(\"\\uD83D\\uDCAC Adding new message to chat:\", newMessage);\n                            return [\n                                ...prev,\n                                newMessage\n                            ];\n                        }\n                        return prev;\n                    });\n                }\n                // Also refresh conversations list to update last message\n                loadConversations();\n            });\n        } catch (error) {\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Socket initialization error:\", error);\n        }\n    };\n    const sendMessage = async ()=>{\n        if (!newMessage.trim() || sending || !activeConversation) return;\n        setSending(true);\n        try {\n            var _response_data;\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_4__.apiClient.sendMessage({\n                conversationId: activeConversation.id,\n                senderType: (user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? \"provider\" : \"customer\",\n                senderName: \"\".concat(user === null || user === void 0 ? void 0 : user.firstName, \" \").concat(user === null || user === void 0 ? void 0 : user.lastName).trim() || \"User\",\n                message: newMessage\n            });\n            if ((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) {\n                var _response_data_data;\n                const newMsg = {\n                    id: ((_response_data_data = response.data.data) === null || _response_data_data === void 0 ? void 0 : _response_data_data.messageId) || Date.now().toString(),\n                    conversationId: activeConversation.id,\n                    senderType: (user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? \"provider\" : \"customer\",\n                    senderName: \"\".concat(user === null || user === void 0 ? void 0 : user.firstName, \" \").concat(user === null || user === void 0 ? void 0 : user.lastName).trim() || \"User\",\n                    message: newMessage,\n                    timestamp: new Date().toISOString()\n                };\n                setMessages((prev)=>[\n                        ...prev,\n                        newMsg\n                    ]);\n                setNewMessage(\"\");\n                // Auto-scroll after sending message\n                setTimeout(()=>scrollToBottom(), 100);\n            }\n        } catch (error) {\n            console.error(\"\\uD83D\\uDCAC ChatWidget - Error sending message:\", error);\n        } finally{\n            setSending(false);\n        }\n    };\n    const markConversationAsRead = async (conversationId)=>{\n        try {\n            console.log(\"\\uD83D\\uDCD6 Marking conversation as read:\", conversationId);\n            const senderType = (user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? \"provider\" : \"customer\";\n            await _lib_api__WEBPACK_IMPORTED_MODULE_4__.apiClient.markMarketplaceAsRead(conversationId, senderType);\n            // Update the conversation in the local state to remove unread count\n            setConversations((prev)=>prev.map((conv)=>conv.id === conversationId ? {\n                        ...conv,\n                        unreadCount: 0\n                    } : conv));\n            console.log(\"✅ Conversation marked as read\");\n        } catch (error) {\n            console.error(\"❌ Failed to mark conversation as read:\", error);\n        }\n    };\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    // Auto-scroll when messages change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (messages.length > 0) {\n            setTimeout(()=>scrollToBottom(), 100);\n        }\n    }, [\n        messages\n    ]);\n    const goBackToConversations = ()=>{\n        setActiveConversation(null);\n        setMessages([]);\n        setNewMessage(\"\");\n        if (socket) {\n            socket.disconnect();\n            setSocket(null);\n        }\n    };\n    const formatMessageTime = (timestamp)=>{\n        if (!timestamp) return \"неизвестно\";\n        let date;\n        // Handle different timestamp formats\n        if (typeof timestamp === \"number\") {\n            date = new Date(timestamp > 1000000000000 ? timestamp : timestamp * 1000);\n        } else if (typeof timestamp === \"string\") {\n            // SQLite datetime format: \"2024-01-15 10:30:45\" or ISO format\n            if (timestamp.includes(\" \") && !timestamp.includes(\"T\")) {\n                // SQLite format: convert to ISO format\n                const isoTimestamp = timestamp.replace(\" \", \"T\") + \"Z\";\n                date = new Date(isoTimestamp);\n            } else {\n                date = new Date(timestamp);\n            }\n        } else {\n            return \"неизвестно\";\n        }\n        // Check if date is valid\n        if (isNaN(date.getTime())) {\n            console.warn(\"Invalid message timestamp:\", timestamp);\n            return \"неизвестно\";\n        }\n        // Return time in HH:MM format\n        try {\n            return date.toLocaleTimeString(\"bg-BG\", {\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n                hour12: false\n            });\n        } catch (e) {\n            return date.toLocaleTimeString();\n        }\n    };\n    const formatLastActivity = (timestamp)=>{\n        if (!timestamp) return \"неизвестно\";\n        let date;\n        // Handle different timestamp formats (same logic as formatMessageTime)\n        if (typeof timestamp === \"number\") {\n            date = new Date(timestamp > 1000000000000 ? timestamp : timestamp * 1000);\n        } else if (typeof timestamp === \"string\") {\n            // SQLite datetime format: \"2024-01-15 10:30:45\" or ISO format\n            if (timestamp.includes(\" \") && !timestamp.includes(\"T\")) {\n                // SQLite format: convert to ISO format\n                const isoTimestamp = timestamp.replace(\" \", \"T\") + \"Z\";\n                date = new Date(isoTimestamp);\n            } else {\n                date = new Date(timestamp);\n            }\n        } else {\n            return \"неизвестно\";\n        }\n        // Check if date is valid\n        if (isNaN(date.getTime())) {\n            console.warn(\"Invalid last activity timestamp:\", timestamp);\n            return \"неизвестно\";\n        }\n        const now = new Date();\n        const diffMs = now.getTime() - date.getTime();\n        const diffDays = Math.floor(diffMs / 86400000);\n        // Show actual time for today's messages, date for older ones\n        if (diffDays === 0) {\n            // Today - show time like \"14:30\"\n            try {\n                return date.toLocaleTimeString(\"bg-BG\", {\n                    hour: \"2-digit\",\n                    minute: \"2-digit\",\n                    hour12: false\n                });\n            } catch (e) {\n                return date.toLocaleTimeString();\n            }\n        } else if (diffDays === 1) {\n            // Yesterday - show \"вчера\"\n            return \"вчера\";\n        } else if (diffDays < 7) {\n            // This week - show day name\n            try {\n                return date.toLocaleDateString(\"bg-BG\", {\n                    weekday: \"short\"\n                });\n            } catch (e) {\n                return \"\".concat(diffDays, \"д\");\n            }\n        } else {\n            // Older - show date\n            try {\n                return date.toLocaleDateString(\"bg-BG\", {\n                    day: \"2-digit\",\n                    month: \"2-digit\"\n                });\n            } catch (e) {\n                return date.toLocaleDateString();\n            }\n        }\n    };\n    // Wait for authentication to load\n    if (isLoading) {\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Auth still loading, waiting...\");\n        return null;\n    }\n    // Don't show widget on authentication pages\n    if (pathname === null || pathname === void 0 ? void 0 : pathname.startsWith(\"/auth/\")) {\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Not showing on auth page:\", pathname);\n        return null;\n    }\n    // Don't show widget if user is not authenticated\n    if (!isAuthenticated || !user) {\n        console.log(\"\\uD83D\\uDCAC ChatWidget - Not showing widget: user not authenticated\", {\n            isAuthenticated,\n            user: !!user\n        });\n        // Temporary: Show a login prompt widget for non-authenticated users\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n            onClick: ()=>window.location.href = \"/auth/login\",\n            className: \"fixed bottom-6 right-6 bg-gray-600 hover:bg-gray-700 text-white p-4 rounded-full shadow-lg transition-all duration-200 z-[9999] relative\",\n            \"aria-label\": \"Влезте за чат\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                    className: \"w-6 h-6\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                    }, void 0, false, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 496,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                    lineNumber: 495,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"absolute -top-2 -right-2 bg-blue-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold\",\n                    children: \"!\"\n                }, void 0, false, {\n                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                    lineNumber: 498,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n            lineNumber: 490,\n            columnNumber: 7\n        }, this);\n    }\n    console.log(\"\\uD83D\\uDCAC ChatWidget - Rendering widget for user:\", user === null || user === void 0 ? void 0 : user.role, \"isOpen:\", isOpen);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            !isOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: ()=>setIsOpen(true),\n                className: \"fixed bottom-6 right-6 bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-full shadow-lg transition-all duration-200 z-[9999] relative border-4 border-white\",\n                \"aria-label\": \"Отвори чат\",\n                style: {\n                    position: \"fixed\",\n                    bottom: \"24px\",\n                    right: \"24px\",\n                    zIndex: 9999,\n                    width: \"64px\",\n                    height: \"64px\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        className: \"w-6 h-6\",\n                        fill: \"none\",\n                        stroke: \"currentColor\",\n                        viewBox: \"0 0 24 24\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 2,\n                            d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                            lineNumber: 525,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 524,\n                        columnNumber: 11\n                    }, this),\n                    unreadTotal > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold\",\n                        children: unreadTotal > 99 ? \"99+\" : unreadTotal\n                    }, void 0, false, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 530,\n                        columnNumber: 13\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                lineNumber: 511,\n                columnNumber: 9\n            }, this),\n            isOpen && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed bottom-6 right-6 bg-white rounded-lg shadow-xl border z-[9999] transition-all duration-200 \".concat(isMinimized ? \"w-80 h-12\" : \"w-80 h-96\"),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center justify-between p-4 border-b bg-purple-600 text-white rounded-t-lg\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center space-x-2\",\n                                children: [\n                                    activeConversation && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: goBackToConversations,\n                                        className: \"text-white hover:text-gray-200 mr-2\",\n                                        children: \"←\"\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 546,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-2 h-2 bg-green-400 rounded-full\"\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 553,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"font-medium\",\n                                        children: activeConversation ? activeConversation.customerName : \"Съобщения\"\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 554,\n                                        columnNumber: 15\n                                    }, this),\n                                    !activeConversation && unreadTotal > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"bg-red-500 text-white text-xs px-2 py-1 rounded-full\",\n                                        children: unreadTotal\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 558,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                lineNumber: 544,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center space-x-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>setIsMinimized(!isMinimized),\n                                        className: \"text-white hover:text-gray-200 transition-colors\",\n                                        \"aria-label\": isMinimized ? \"Разшири\" : \"Минимизирай\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"w-4 h-4\",\n                                            fill: \"none\",\n                                            stroke: \"currentColor\",\n                                            viewBox: \"0 0 24 24\",\n                                            children: isMinimized ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 2,\n                                                d: \"M5 15l7-7 7 7\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 571,\n                                                columnNumber: 21\n                                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 2,\n                                                d: \"M19 9l-7 7-7-7\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 573,\n                                                columnNumber: 21\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 569,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 564,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>setIsOpen(false),\n                                        className: \"text-white hover:text-gray-200 transition-colors\",\n                                        \"aria-label\": \"Затвори чат\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"w-4 h-4\",\n                                            fill: \"none\",\n                                            stroke: \"currentColor\",\n                                            viewBox: \"0 0 24 24\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 2,\n                                                d: \"M6 18L18 6M6 6l12 12\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 583,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 582,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 577,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                lineNumber: 563,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 543,\n                        columnNumber: 11\n                    }, this),\n                    !isMinimized && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex flex-col h-80\",\n                        children: activeConversation ? /* Active Chat View */ /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 overflow-y-auto p-3 space-y-2\",\n                                    children: [\n                                        messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-center text-gray-500 py-8\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-2xl mb-2\",\n                                                    children: \"\\uD83D\\uDCAC\"\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 599,\n                                                    columnNumber: 25\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm\",\n                                                    children: \"Няма съобщения\"\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 600,\n                                                    columnNumber: 25\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 598,\n                                            columnNumber: 23\n                                        }, this) : messages.map((msg)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex \".concat((user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? msg.senderType === \"provider\" ? \"justify-end\" : \"justify-start\" : msg.senderType === \"customer\" ? \"justify-end\" : \"justify-start\"),\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"max-w-xs px-3 py-2 rounded-lg text-sm \".concat((user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? msg.senderType === \"provider\" ? \"bg-purple-600 text-white\" : \"bg-gray-200 text-gray-800\" : msg.senderType === \"customer\" ? \"bg-purple-600 text-white\" : \"bg-gray-200 text-gray-800\"),\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            children: msg.message\n                                                        }, void 0, false, {\n                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                            lineNumber: 619,\n                                                            columnNumber: 31\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"text-xs mt-1 \".concat((user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? msg.senderType === \"provider\" ? \"text-purple-200\" : \"text-gray-500\" : msg.senderType === \"customer\" ? \"text-purple-200\" : \"text-gray-500\"),\n                                                            children: formatMessageTime(msg.sent_at || msg.timestamp)\n                                                        }, void 0, false, {\n                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                            lineNumber: 620,\n                                                            columnNumber: 31\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 612,\n                                                    columnNumber: 29\n                                                }, this)\n                                            }, msg.id, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 604,\n                                                columnNumber: 27\n                                            }, this)),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            ref: messagesEndRef\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 632,\n                                            columnNumber: 21\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 596,\n                                    columnNumber: 19\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"border-t p-3\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex space-x-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"text\",\n                                                value: newMessage,\n                                                onChange: (e)=>setNewMessage(e.target.value),\n                                                onKeyPress: (e)=>e.key === \"Enter\" && sendMessage(),\n                                                placeholder: \"Напишете съобщение...\",\n                                                className: \"flex-1 border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500\",\n                                                disabled: sending\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 638,\n                                                columnNumber: 23\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: sendMessage,\n                                                disabled: !newMessage.trim() || sending,\n                                                className: \"bg-purple-600 text-white px-3 py-2 rounded-lg disabled:opacity-50 text-sm hover:bg-purple-700\",\n                                                children: sending ? \"...\" : \"\\uD83D\\uDCE4\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 647,\n                                                columnNumber: 23\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 637,\n                                        columnNumber: 21\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 636,\n                                    columnNumber: 19\n                                }, this)\n                            ]\n                        }, void 0, true) : /* Conversations List View */ /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                loading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 flex items-center justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-2\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 663,\n                                                columnNumber: 25\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm text-gray-500\",\n                                                children: \"Зареждане...\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 664,\n                                                columnNumber: 25\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 662,\n                                        columnNumber: 23\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 661,\n                                    columnNumber: 21\n                                }, this) : conversations.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 flex items-center justify-center text-gray-500\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-center\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-4xl mb-2\",\n                                                children: \"\\uD83D\\uDCAC\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 670,\n                                                columnNumber: 25\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm\",\n                                                children: [\n                                                    \"Здравейте, \",\n                                                    user === null || user === void 0 ? void 0 : user.firstName,\n                                                    \"!\"\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 671,\n                                                columnNumber: 25\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-xs text-gray-400 mt-1\",\n                                                children: (user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\" ? \"Няма активни разговори с клиенти\" : \"Няма активни разговори\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                lineNumber: 672,\n                                                columnNumber: 25\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                        lineNumber: 669,\n                                        columnNumber: 23\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 668,\n                                    columnNumber: 21\n                                }, this) : /* Conversations List */ /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex-1 overflow-y-auto\",\n                                    children: conversations.map((conversation)=>{\n                                        var _this;\n                                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            onClick: ()=>handleConversationClick(conversation),\n                                            className: \"p-4 hover:bg-gray-50 cursor-pointer border-b border-gray-200 flex items-start space-x-3\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        className: \"text-purple-600 font-medium text-sm\",\n                                                        children: ((_this = (user === null || user === void 0 ? void 0 : user.role) === \"customer\" ? conversation.serviceProviderName : conversation.customerName) === null || _this === void 0 ? void 0 : _this.charAt(0)) || \"C\"\n                                                    }, void 0, false, {\n                                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                        lineNumber: 690,\n                                                        columnNumber: 31\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 689,\n                                                    columnNumber: 29\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex-1 min-w-0\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"flex items-center justify-between\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                    className: \"text-sm font-medium text-gray-900 truncate\",\n                                                                    children: (user === null || user === void 0 ? void 0 : user.role) === \"customer\" ? conversation.serviceProviderName || \"Неизвестен специалист\" : conversation.customerName || \"Неизвестен клиент\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                                    lineNumber: 696,\n                                                                    columnNumber: 33\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"flex items-center space-x-2\",\n                                                                    children: [\n                                                                        conversation.unreadCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                            className: \"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full\",\n                                                                            children: conversation.unreadCount > 99 ? \"99+\" : conversation.unreadCount\n                                                                        }, void 0, false, {\n                                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                                            lineNumber: 703,\n                                                                            columnNumber: 37\n                                                                        }, this),\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                            className: \"text-xs text-gray-500\",\n                                                                            children: formatLastActivity(conversation.lastActivity)\n                                                                        }, void 0, false, {\n                                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                                            lineNumber: 707,\n                                                                            columnNumber: 35\n                                                                        }, this)\n                                                                    ]\n                                                                }, void 0, true, {\n                                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                                    lineNumber: 701,\n                                                                    columnNumber: 33\n                                                                }, this)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                            lineNumber: 695,\n                                                            columnNumber: 31\n                                                        }, this),\n                                                        conversation.lastMessage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-sm text-gray-500 truncate mt-1\",\n                                                            children: conversation.lastMessage\n                                                        }, void 0, false, {\n                                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                            lineNumber: 713,\n                                                            columnNumber: 33\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 694,\n                                                    columnNumber: 29\n                                                }, this)\n                                            ]\n                                        }, conversation.id, true, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 684,\n                                            columnNumber: 27\n                                        }, this);\n                                    })\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 682,\n                                    columnNumber: 21\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"border-t p-3 space-y-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>window.open(\"/search\", \"_blank\"),\n                                            className: \"w-full text-left text-sm text-purple-600 hover:text-purple-800 transition-colors\",\n                                            children: \"\\uD83D\\uDD0D Търси специалисти\"\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                            lineNumber: 725,\n                                            columnNumber: 21\n                                        }, this),\n                                        ((user === null || user === void 0 ? void 0 : user.role) === \"service_provider\" || (user === null || user === void 0 ? void 0 : user.role) === \"tradesperson\") && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: ()=>window.open(\"/dashboard\", \"_blank\"),\n                                                    className: \"w-full text-left text-sm text-purple-600 hover:text-purple-800 transition-colors\",\n                                                    children: \"\\uD83D\\uDCCA Табло за управление\"\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 733,\n                                                    columnNumber: 25\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: ()=>window.open(\"/dashboard?view=assigned\", \"_blank\"),\n                                                    className: \"w-full text-left text-sm text-purple-600 hover:text-purple-800 transition-colors\",\n                                                    children: \"\\uD83D\\uDCCB Моите заявки\"\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                                    lineNumber: 739,\n                                                    columnNumber: 25\n                                                }, this)\n                                            ]\n                                        }, void 0, true)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                                    lineNumber: 724,\n                                    columnNumber: 19\n                                }, this)\n                            ]\n                        }, void 0, true)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                        lineNumber: 591,\n                        columnNumber: 13\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatWidget.tsx\",\n                lineNumber: 539,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true);\n}\n_s(ChatWidget, \"BIib//U0TaNCPRjgN3fBFLFMtRM=\", false, function() {\n    return [\n        _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_3__.useAuth,\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.usePathname\n    ];\n});\n_c = ChatWidget;\nvar _c;\n$RefreshReg$(_c, \"ChatWidget\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0NoYXRXaWRnZXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUVtRDtBQUNOO0FBQ0c7QUFDWDtBQVd0QixTQUFTTTs7SUFDdEIsTUFBTSxDQUFDQyxRQUFRQyxVQUFVLEdBQUdSLCtDQUFRQSxDQUFDO0lBQ3JDLE1BQU0sQ0FBQ1MsYUFBYUMsZUFBZSxHQUFHViwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNXLGVBQWVDLGlCQUFpQixHQUFHWiwrQ0FBUUEsQ0FBaUIsRUFBRTtJQUNyRSxNQUFNLENBQUNhLFNBQVNDLFdBQVcsR0FBR2QsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDZSxhQUFhQyxlQUFlLEdBQUdoQiwrQ0FBUUEsQ0FBQztJQUMvQyxNQUFNLENBQUNpQixvQkFBb0JDLHNCQUFzQixHQUFHbEIsK0NBQVFBLENBQXNCO0lBQ2xGLE1BQU0sQ0FBQ21CLFVBQVVDLFlBQVksR0FBR3BCLCtDQUFRQSxDQUFRLEVBQUU7SUFDbEQsTUFBTSxDQUFDcUIsWUFBWUMsY0FBYyxHQUFHdEIsK0NBQVFBLENBQUM7SUFDN0MsTUFBTSxDQUFDdUIsU0FBU0MsV0FBVyxHQUFHeEIsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDeUIsUUFBUUMsVUFBVSxHQUFHMUIsK0NBQVFBLENBQU07SUFDMUMsTUFBTSxFQUFFMkIsSUFBSSxFQUFFQyxlQUFlLEVBQUVDLFNBQVMsRUFBRSxHQUFHekIsOERBQU9BO0lBQ3BELE1BQU0wQixpQkFBaUI1Qiw2Q0FBTUEsQ0FBaUI7SUFDOUMsTUFBTTZCLFdBQVc1Qiw0REFBV0E7SUFFNUIsNkJBQTZCO0lBQzdCNkIsUUFBUUMsR0FBRyxDQUFDLHlDQUErQjtRQUN6Q0w7UUFDQUM7UUFDQUYsTUFBTUEsT0FBTztZQUFFTyxJQUFJUCxLQUFLTyxFQUFFO1lBQUVDLE9BQU9SLEtBQUtRLEtBQUs7WUFBRUMsTUFBTVQsS0FBS1MsSUFBSTtRQUFDLElBQUk7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RyxXQUFXLGtCQUN2Qiw4REFBQ1o7NERBQUVwQixXQUFVO3NFQUNWM0UsYUFBYTJHLFdBQVc7Ozs7Ozs7Ozs7Ozs7MkNBN0IxQjNHLGFBQWFsRCxFQUFFOzs7Ozs7Ozs7Ozs4Q0F1QzlCLDhEQUFDd0k7b0NBQUlYLFdBQVU7O3NEQUNiLDhEQUFDTDs0Q0FDQ0MsU0FBUyxJQUFNQyxPQUFPb0MsSUFBSSxDQUFDLFdBQVc7NENBQ3RDakMsV0FBVTtzREFDWDs7Ozs7O3dDQUdDcEksQ0FBQUEsQ0FBQUEsaUJBQUFBLDJCQUFBQSxLQUFNUyxJQUFJLE1BQUssc0JBQXNCVCxDQUFBQSxpQkFBQUEsMkJBQUFBLEtBQU1TLElBQUksTUFBSyxjQUFhLG1CQUNqRTs7OERBQ0UsOERBQUNzSDtvREFDQ0MsU0FBUyxJQUFNQyxPQUFPb0MsSUFBSSxDQUFDLGNBQWM7b0RBQ3pDakMsV0FBVTs4REFDWDs7Ozs7OzhEQUdELDhEQUFDTDtvREFDQ0MsU0FBUyxJQUFNQyxPQUFPb0MsSUFBSSxDQUFDLDRCQUE0QjtvREFDdkRqQyxXQUFVOzhEQUNYOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWN6QjtHQW51QndCeko7O1FBV3VCRiwwREFBT0E7UUFFbkNELHdEQUFXQTs7O0tBYk5HIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9jb21wb25lbnRzL0NoYXRXaWRnZXQudHN4PzdmNmIiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlUGF0aG5hbWUgfSBmcm9tICduZXh0L25hdmlnYXRpb24nXG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnQC9jb250ZXh0cy9BdXRoQ29udGV4dCdcbmltcG9ydCB7IGFwaUNsaWVudCB9IGZyb20gJ0AvbGliL2FwaSdcblxuaW50ZXJmYWNlIENvbnZlcnNhdGlvbiB7XG4gIGlkOiBzdHJpbmdcbiAgY3VzdG9tZXJOYW1lOiBzdHJpbmdcbiAgc2VydmljZVByb3ZpZGVyTmFtZTogc3RyaW5nXG4gIGxhc3RNZXNzYWdlPzogc3RyaW5nXG4gIGxhc3RBY3Rpdml0eTogc3RyaW5nXG4gIHVucmVhZENvdW50OiBudW1iZXJcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdFdpZGdldCgpIHtcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbaXNNaW5pbWl6ZWQsIHNldElzTWluaW1pemVkXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbY29udmVyc2F0aW9ucywgc2V0Q29udmVyc2F0aW9uc10gPSB1c2VTdGF0ZTxDb252ZXJzYXRpb25bXT4oW10pXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbdW5yZWFkVG90YWwsIHNldFVucmVhZFRvdGFsXSA9IHVzZVN0YXRlKDApXG4gIGNvbnN0IFthY3RpdmVDb252ZXJzYXRpb24sIHNldEFjdGl2ZUNvbnZlcnNhdGlvbl0gPSB1c2VTdGF0ZTxDb252ZXJzYXRpb24gfCBudWxsPihudWxsKVxuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPGFueVtdPihbXSlcbiAgY29uc3QgW25ld01lc3NhZ2UsIHNldE5ld01lc3NhZ2VdID0gdXNlU3RhdGUoJycpXG4gIGNvbnN0IFtzZW5kaW5nLCBzZXRTZW5kaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbc29ja2V0LCBzZXRTb2NrZXRdID0gdXNlU3RhdGU8YW55PihudWxsKVxuICBjb25zdCB7IHVzZXIsIGlzQXV0aGVudGljYXRlZCwgaXNMb2FkaW5nIH0gPSB1c2VBdXRoKClcbiAgY29uc3QgbWVzc2FnZXNFbmRSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG4gIGNvbnN0IHBhdGhuYW1lID0gdXNlUGF0aG5hbWUoKVxuXG4gIC8vIERlYnVnIGF1dGhlbnRpY2F0aW9uIHN0YXRlXG4gIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBBdXRoIERlYnVnOicsIHtcbiAgICBpc0F1dGhlbnRpY2F0ZWQsXG4gICAgaXNMb2FkaW5nLFxuICAgIHVzZXI6IHVzZXIgPyB7IGlkOiB1c2VyLmlkLCBlbWFpbDogdXNlci5lbWFpbCwgcm9sZTogdXNlci5yb2xlIH0gOiBudWxsLFxuICAgIGhhc0F1dGhUb2tlbjogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyAhIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhdXRoX3Rva2VuJykgOiAnU1NSJyxcbiAgICBoYXNVc2VyRGF0YTogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyAhIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2RhdGEnKSA6ICdTU1InXG4gIH0pXG5cbiAgLy8gTG9hZCBjb252ZXJzYXRpb25zIHdoZW4gd2lkZ2V0IG9wZW5zIGFuZCBzZXQgdXAgZ2xvYmFsIFdlYlNvY2tldFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc09wZW4gJiYgaXNBdXRoZW50aWNhdGVkICYmIHVzZXIpIHtcbiAgICAgIGxvYWRDb252ZXJzYXRpb25zKClcbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIHBlcmlvZGljIHJlZnJlc2ggZXZlcnkgMzAgc2Vjb25kcyB3aGVuIHdpZGdldCBpcyBvcGVuXG4gICAgICBjb25zdCByZWZyZXNoSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGxvYWRDb252ZXJzYXRpb25zKClcbiAgICAgIH0sIDMwMDAwKVxuICAgICAgXG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChyZWZyZXNoSW50ZXJ2YWwpXG4gICAgfVxuICB9LCBbaXNPcGVuLCBpc0F1dGhlbnRpY2F0ZWQsIHVzZXJdKVxuXG4gIC8vIENhbGN1bGF0ZSB0b3RhbCB1bnJlYWQgbWVzc2FnZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB0b3RhbCA9IGNvbnZlcnNhdGlvbnMucmVkdWNlKChzdW0sIGNvbnYpID0+IHN1bSArIGNvbnYudW5yZWFkQ291bnQsIDApXG4gICAgc2V0VW5yZWFkVG90YWwodG90YWwpXG4gIH0sIFtjb252ZXJzYXRpb25zXSlcblxuICBjb25zdCBsb2FkQ29udmVyc2F0aW9ucyA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXVzZXIpIHJldHVyblxuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBMb2FkaW5nIGNvbnZlcnNhdGlvbnMgZm9yIHVzZXI6JywgdXNlci5yb2xlLCB1c2VyLmlkKVxuICAgIHNldExvYWRpbmcodHJ1ZSlcbiAgICB0cnkge1xuICAgICAgLy8gRm9yIHNlcnZpY2UgcHJvdmlkZXJzLCBnZXQgdGhlaXIgY29udmVyc2F0aW9uc1xuICAgICAgaWYgKHVzZXIucm9sZSA9PT0gJ3NlcnZpY2VfcHJvdmlkZXInIHx8IHVzZXIucm9sZSA9PT0gJ3RyYWRlc3BlcnNvbicpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIExvYWRpbmcgcHJvdmlkZXIgY29udmVyc2F0aW9ucyBmb3I6JywgdXNlci5pZClcbiAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIEFQSSBVUkwgd2lsbCBiZTonLCBgL2NoYXQvcHJvdmlkZXIvJHt1c2VyLmlkfS9jb252ZXJzYXRpb25zYClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpQ2xpZW50LmdldFByb3ZpZGVyTWFya2V0cGxhY2VDb252ZXJzYXRpb25zKHVzZXIuaWQpXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBQcm92aWRlciBjb252ZXJzYXRpb25zIGZ1bGwgcmVzcG9uc2U6JywgcmVzcG9uc2UpXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBQcm92aWRlciBjb252ZXJzYXRpb25zIHJlc3BvbnNlLmRhdGE6JywgcmVzcG9uc2UuZGF0YSlcbiAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFByb3ZpZGVyIGNvbnZlcnNhdGlvbnMgcmVzcG9uc2Uuc3RhdHVzOicsIHJlc3BvbnNlLnN0YXR1cylcbiAgICAgICAgXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhPy5zdWNjZXNzKSB7XG4gICAgICAgICAgbGV0IGNvbnZlcnNhdGlvbnNEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhXG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFJhdyBjb252ZXJzYXRpb25zIGRhdGE6JywgSlNPTi5zdHJpbmdpZnkoY29udmVyc2F0aW9uc0RhdGEsIG51bGwsIDIpKVxuICAgICAgICAgIFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcmVzcG9uc2UgZm9ybWF0cyBhbmQgbWFwIGZpZWxkcyBjb3JyZWN0bHlcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb252ZXJzYXRpb25zRGF0YSkpIHtcbiAgICAgICAgICAgIC8vIERhdGEgaXMgYWxyZWFkeSBhbiBhcnJheSAtIG1hcCB0aGUgZmllbGRzXG4gICAgICAgICAgICBjb25zdCBtYXBwZWRDb252ZXJzYXRpb25zID0gY29udmVyc2F0aW9uc0RhdGEubWFwKChjb252OiBhbnkpID0+ICh7XG4gICAgICAgICAgICAgIC4uLmNvbnYsXG4gICAgICAgICAgICAgIGxhc3RBY3Rpdml0eTogY29udi5sYXN0X21lc3NhZ2VfYXQgfHwgY29udi5jcmVhdGVkX2F0LCAvLyBNYXAgbGFzdF9tZXNzYWdlX2F0IHRvIGxhc3RBY3Rpdml0eVxuICAgICAgICAgICAgICB1bnJlYWRDb3VudDogY29udi51bnJlYWRfY291bnQgfHwgMFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICBzZXRDb252ZXJzYXRpb25zKG1hcHBlZENvbnZlcnNhdGlvbnMpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gU2V0IHByb3ZpZGVyIGNvbnZlcnNhdGlvbnMgKGFycmF5KTonLCBtYXBwZWRDb252ZXJzYXRpb25zLmxlbmd0aCwgbWFwcGVkQ29udmVyc2F0aW9ucylcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnZlcnNhdGlvbnNEYXRhICYmIHR5cGVvZiBjb252ZXJzYXRpb25zRGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIC8vIERhdGEgaXMgYW4gb2JqZWN0LCBjaGVjayBpZiBpdCBoYXMgYSBjb252ZXJzYXRpb25zIHByb3BlcnR5IG9yIGNvbnZlcnQgdG8gYXJyYXlcbiAgICAgICAgICAgIGlmIChjb252ZXJzYXRpb25zRGF0YS5jb252ZXJzYXRpb25zICYmIEFycmF5LmlzQXJyYXkoY29udmVyc2F0aW9uc0RhdGEuY29udmVyc2F0aW9ucykpIHtcbiAgICAgICAgICAgICAgY29uc3QgbWFwcGVkQ29udmVyc2F0aW9ucyA9IGNvbnZlcnNhdGlvbnNEYXRhLmNvbnZlcnNhdGlvbnMubWFwKChjb252OiBhbnkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uY29udixcbiAgICAgICAgICAgICAgICBsYXN0QWN0aXZpdHk6IGNvbnYubGFzdF9tZXNzYWdlX2F0IHx8IGNvbnYuY3JlYXRlZF9hdCwgLy8gTWFwIGxhc3RfbWVzc2FnZV9hdCB0byBsYXN0QWN0aXZpdHlcbiAgICAgICAgICAgICAgICB1bnJlYWRDb3VudDogY29udi51bnJlYWRfY291bnQgfHwgMFxuICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgc2V0Q29udmVyc2F0aW9ucyhtYXBwZWRDb252ZXJzYXRpb25zKVxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gU2V0IHByb3ZpZGVyIGNvbnZlcnNhdGlvbnMgKG9iamVjdC5jb252ZXJzYXRpb25zKTonLCBtYXBwZWRDb252ZXJzYXRpb25zLmxlbmd0aCwgbWFwcGVkQ29udmVyc2F0aW9ucylcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29udmVyc2F0aW9uc0RhdGEuZGF0YSAmJiBBcnJheS5pc0FycmF5KGNvbnZlcnNhdGlvbnNEYXRhLmRhdGEpKSB7XG4gICAgICAgICAgICAgIHNldENvbnZlcnNhdGlvbnMoY29udmVyc2F0aW9uc0RhdGEuZGF0YSlcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFNldCBwcm92aWRlciBjb252ZXJzYXRpb25zIChvYmplY3QuZGF0YSk6JywgY29udmVyc2F0aW9uc0RhdGEuZGF0YS5sZW5ndGgsIGNvbnZlcnNhdGlvbnNEYXRhLmRhdGEpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBUcnkgdG8gY29udmVydCBvYmplY3QgdG8gYXJyYXkgb3IgaGFuZGxlIHNpbmdsZSBjb252ZXJzYXRpb25cbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFJlY2VpdmVkIG9iamVjdCBkYXRhOicsIGNvbnZlcnNhdGlvbnNEYXRhKVxuICAgICAgICAgICAgICBjb25zdCBjb252ZXJzYXRpb25zQXJyYXkgPSBPYmplY3QudmFsdWVzKGNvbnZlcnNhdGlvbnNEYXRhKS5maWx0ZXIoaXRlbSA9PiBcbiAgICAgICAgICAgICAgICBpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiAnaWQnIGluIGl0ZW1cbiAgICAgICAgICAgICAgKSBhcyBDb252ZXJzYXRpb25bXVxuICAgICAgICAgICAgICBzZXRDb252ZXJzYXRpb25zKGNvbnZlcnNhdGlvbnNBcnJheSlcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIENvbnZlcnRlZCBvYmplY3QgdG8gYXJyYXk6JywgY29udmVyc2F0aW9uc0FycmF5Lmxlbmd0aCwgY29udmVyc2F0aW9uc0FycmF5KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTm8gY29udmVyc2F0aW9ucyBkYXRhIGZvdW5kJylcbiAgICAgICAgICAgIHNldENvbnZlcnNhdGlvbnMoW10pXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBBUEkgcmVzcG9uc2Ugbm90IHN1Y2Nlc3NmdWwnKVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBSZXNwb25zZSBzdHJ1Y3R1cmU6Jywge1xuICAgICAgICAgICAgaGFzU3VjY2VzczogJ3N1Y2Nlc3MnIGluIChyZXNwb25zZS5kYXRhIHx8IHt9KSxcbiAgICAgICAgICAgIHN1Y2Nlc3NWYWx1ZTogcmVzcG9uc2UuZGF0YT8uc3VjY2VzcyxcbiAgICAgICAgICAgIGhhc0RhdGE6ICdkYXRhJyBpbiAocmVzcG9uc2UuZGF0YSB8fCB7fSksXG4gICAgICAgICAgICBkYXRhVHlwZTogdHlwZW9mIHJlc3BvbnNlLmRhdGE/LmRhdGEsXG4gICAgICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGE/LmRhdGEpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBzZXRDb252ZXJzYXRpb25zKFtdKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3IgY3VzdG9tZXJzLCBnZXQgdGhlaXIgY29udmVyc2F0aW9uc1xuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTG9hZGluZyBjdXN0b21lciBjb252ZXJzYXRpb25zJylcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQuZ2V0Q29udmVyc2F0aW9ucygpXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBDdXN0b21lciBjb252ZXJzYXRpb25zIHJlc3BvbnNlOicsIHJlc3BvbnNlLmRhdGEpXG4gICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbnMgPSByZXNwb25zZS5kYXRhPy5kYXRhPy5jb252ZXJzYXRpb25zXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhPy5zdWNjZXNzICYmIEFycmF5LmlzQXJyYXkoY29udmVyc2F0aW9ucykpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gQ29udmVyc2F0aW9uIGRldGFpbHM6JywgY29udmVyc2F0aW9ucy5tYXAoYyA9PiAoe1xuICAgICAgICAgICAgaWQ6IGMuaWQsXG4gICAgICAgICAgICBzZXJ2aWNlUHJvdmlkZXJOYW1lOiBjLnNlcnZpY2VQcm92aWRlck5hbWUsXG4gICAgICAgICAgICBjdXN0b21lck5hbWU6IGMuY3VzdG9tZXJOYW1lXG4gICAgICAgICAgfSkpKVxuICAgICAgICAgIHNldENvbnZlcnNhdGlvbnMoY29udmVyc2F0aW9ucylcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gU2V0IGN1c3RvbWVyIGNvbnZlcnNhdGlvbnM6JywgY29udmVyc2F0aW9ucy5sZW5ndGgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIE5vIGN1c3RvbWVyIGNvbnZlcnNhdGlvbnMgZm91bmQgb3IgaW52YWxpZCByZXNwb25zZScpXG4gICAgICAgICAgc2V0Q29udmVyc2F0aW9ucyhbXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfkqwgQ2hhdFdpZGdldCAtIEVycm9yIGxvYWRpbmcgY29udmVyc2F0aW9uczonLCBlcnJvcilcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfkqwgQ2hhdFdpZGdldCAtIEVycm9yIGRldGFpbHM6Jywge1xuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBzdGF0dXM6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXNUZXh0LFxuICAgICAgICBkYXRhOiBlcnJvci5yZXNwb25zZT8uZGF0YVxuICAgICAgfSlcbiAgICAgIHNldENvbnZlcnNhdGlvbnMoW10pXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaGFuZGxlQ29udmVyc2F0aW9uQ2xpY2sgPSBhc3luYyAoY29udmVyc2F0aW9uOiBDb252ZXJzYXRpb24pID0+IHtcbiAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gT3BlbmluZyBjb252ZXJzYXRpb24gaW5saW5lOicsIGNvbnZlcnNhdGlvbi5pZCwgY29udmVyc2F0aW9uKVxuICAgIFxuICAgIC8vIFNldCBhY3RpdmUgY29udmVyc2F0aW9uIGFuZCBsb2FkIG1lc3NhZ2VzXG4gICAgc2V0QWN0aXZlQ29udmVyc2F0aW9uKGNvbnZlcnNhdGlvbilcbiAgICBzZXRNZXNzYWdlcyhbXSlcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gTG9hZCBtZXNzYWdlcyBmb3IgdGhpcyBjb252ZXJzYXRpb25cbiAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBMb2FkaW5nIG1lc3NhZ2VzIGZvciBjb252ZXJzYXRpb246JywgY29udmVyc2F0aW9uLmlkKVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQuZ2V0TWFya2V0cGxhY2VNZXNzYWdlcyhjb252ZXJzYXRpb24uaWQpXG4gICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTWVzc2FnZXMgQVBJIHJlc3BvbnNlOicsIHJlc3BvbnNlKVxuICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIE1lc3NhZ2VzIHJlc3BvbnNlIGRhdGE6JywgcmVzcG9uc2UuZGF0YSlcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MpIHtcbiAgICAgICAgbGV0IG1lc3NhZ2VzRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YVxuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gUmF3IG1lc3NhZ2VzIGRhdGE6JywgSlNPTi5zdHJpbmdpZnkobWVzc2FnZXNEYXRhLCBudWxsLCAyKSlcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcmVzcG9uc2UgZm9ybWF0c1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlc0RhdGEpKSB7XG4gICAgICAgICAgLy8gRGF0YSBpcyBhbHJlYWR5IGFuIGFycmF5XG4gICAgICAgICAgc2V0TWVzc2FnZXMobWVzc2FnZXNEYXRhKVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBMb2FkZWQgbWVzc2FnZXMgKGFycmF5KTonLCBtZXNzYWdlc0RhdGEubGVuZ3RoLCBtZXNzYWdlc0RhdGEpXG4gICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZXNEYXRhICYmIHR5cGVvZiBtZXNzYWdlc0RhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgLy8gRGF0YSBpcyBhbiBvYmplY3QsIGNoZWNrIGlmIGl0IGhhcyBhIG1lc3NhZ2VzIHByb3BlcnR5IG9yIGNvbnZlcnQgdG8gYXJyYXlcbiAgICAgICAgICBpZiAobWVzc2FnZXNEYXRhLm1lc3NhZ2VzICYmIEFycmF5LmlzQXJyYXkobWVzc2FnZXNEYXRhLm1lc3NhZ2VzKSkge1xuICAgICAgICAgICAgc2V0TWVzc2FnZXMobWVzc2FnZXNEYXRhLm1lc3NhZ2VzKVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIExvYWRlZCBtZXNzYWdlcyAob2JqZWN0Lm1lc3NhZ2VzKTonLCBtZXNzYWdlc0RhdGEubWVzc2FnZXMubGVuZ3RoLCBtZXNzYWdlc0RhdGEubWVzc2FnZXMpXG4gICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlc0RhdGEuZGF0YSAmJiBBcnJheS5pc0FycmF5KG1lc3NhZ2VzRGF0YS5kYXRhKSkge1xuICAgICAgICAgICAgc2V0TWVzc2FnZXMobWVzc2FnZXNEYXRhLmRhdGEpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTG9hZGVkIG1lc3NhZ2VzIChvYmplY3QuZGF0YSk6JywgbWVzc2FnZXNEYXRhLmRhdGEubGVuZ3RoLCBtZXNzYWdlc0RhdGEuZGF0YSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVHJ5IHRvIGNvbnZlcnQgb2JqZWN0IHRvIGFycmF5IG9yIGhhbmRsZSBzaW5nbGUgbWVzc2FnZVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFJlY2VpdmVkIG9iamVjdCBtZXNzYWdlcyBkYXRhOicsIG1lc3NhZ2VzRGF0YSlcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzQXJyYXkgPSBPYmplY3QudmFsdWVzKG1lc3NhZ2VzRGF0YSkuZmlsdGVyKGl0ZW0gPT4gXG4gICAgICAgICAgICAgIGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICdpZCcgaW4gaXRlbVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgc2V0TWVzc2FnZXMobWVzc2FnZXNBcnJheSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBDb252ZXJ0ZWQgbWVzc2FnZXMgb2JqZWN0IHRvIGFycmF5OicsIG1lc3NhZ2VzQXJyYXkubGVuZ3RoLCBtZXNzYWdlc0FycmF5KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTm8gbWVzc2FnZXMgZGF0YSBmb3VuZCcpXG4gICAgICAgICAgc2V0TWVzc2FnZXMoW10pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgLSBNZXNzYWdlcyBBUEkgcmVzcG9uc2Ugbm90IHN1Y2Nlc3NmdWwnKVxuICAgICAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gUmVzcG9uc2Ugc3RydWN0dXJlOicsIHtcbiAgICAgICAgICBoYXNTdWNjZXNzOiAnc3VjY2VzcycgaW4gKHJlc3BvbnNlLmRhdGEgfHwge30pLFxuICAgICAgICAgIHN1Y2Nlc3NWYWx1ZTogcmVzcG9uc2UuZGF0YT8uc3VjY2VzcyxcbiAgICAgICAgICBoYXNEYXRhOiAnZGF0YScgaW4gKHJlc3BvbnNlLmRhdGEgfHwge30pLFxuICAgICAgICAgIGRhdGFUeXBlOiB0eXBlb2YgcmVzcG9uc2UuZGF0YT8uZGF0YSxcbiAgICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGE/LmRhdGEpLFxuICAgICAgICAgIGRhdGFDb250ZW50OiByZXNwb25zZS5kYXRhPy5kYXRhXG4gICAgICAgIH0pXG4gICAgICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBdXRvLXNjcm9sbCB0byBib3R0b20gYWZ0ZXIgbG9hZGluZyBtZXNzYWdlc1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBzY3JvbGxUb0JvdHRvbSgpLCAyMDApXG4gICAgICBcbiAgICAgIC8vIE1hcmsgY29udmVyc2F0aW9uIGFzIHJlYWQgYWZ0ZXIgbG9hZGluZyBtZXNzYWdlc1xuICAgICAgbWFya0NvbnZlcnNhdGlvbkFzUmVhZChjb252ZXJzYXRpb24uaWQpXG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgc29ja2V0IGZvciByZWFsLXRpbWUgdXBkYXRlcyBpZiBub3QgYWxyZWFkeSBjb25uZWN0ZWRcbiAgICAgIGlmICghc29ja2V0KSB7XG4gICAgICAgIGluaXRpYWxpemVTb2NrZXQoY29udmVyc2F0aW9uLmlkKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfkqwgQ2hhdFdpZGdldCAtIEVycm9yIGxvYWRpbmcgbWVzc2FnZXM6JywgZXJyb3IpXG4gICAgICBjb25zb2xlLmVycm9yKCfwn5KsIENoYXRXaWRnZXQgLSBFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhdHVzOiBlcnJvci5yZXNwb25zZT8uc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiBlcnJvci5yZXNwb25zZT8uc3RhdHVzVGV4dCxcbiAgICAgICAgZGF0YTogZXJyb3IucmVzcG9uc2U/LmRhdGFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaW5pdGlhbGl6ZVNvY2tldCA9IChjb252ZXJzYXRpb25JZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFwaVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgfHwgJ2h0dHA6Ly8xOTIuMTY4LjAuMTI5OjMwMDAvYXBpL3YxJ1xuICAgICAgY29uc3Qgc29ja2V0VXJsID0gYXBpVXJsLnJlcGxhY2UoJy9hcGkvdjEnLCAnJylcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIENvbm5lY3RpbmcgdG8gc29ja2V0IGZvciBjb252ZXJzYXRpb246JywgY29udmVyc2F0aW9uSWQpXG4gICAgICBcbiAgICAgIGNvbnN0IHsgaW8gfSA9IHJlcXVpcmUoJ3NvY2tldC5pby1jbGllbnQnKVxuICAgICAgY29uc3Qgc29ja2V0SW5zdGFuY2UgPSBpbyhzb2NrZXRVcmwsIHtcbiAgICAgICAgdHJhbnNwb3J0czogWyd3ZWJzb2NrZXQnLCAncG9sbGluZyddLFxuICAgICAgICB0aW1lb3V0OiAxMDAwMCxcbiAgICAgICAgcmVjb25uZWN0aW9uOiB0cnVlXG4gICAgICB9KVxuXG4gICAgICBzb2NrZXRJbnN0YW5jZS5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBDaGF0V2lkZ2V0IGNvbm5lY3RlZCB0byBXZWJTb2NrZXQnKVxuICAgICAgICBzZXRTb2NrZXQoc29ja2V0SW5zdGFuY2UpXG4gICAgICAgIHNvY2tldEluc3RhbmNlLmVtaXQoJ2pvaW4tY29udmVyc2F0aW9uJywgY29udmVyc2F0aW9uSWQpXG4gICAgICB9KVxuXG4gICAgICBzb2NrZXRJbnN0YW5jZS5vbignbmV3X21lc3NhZ2UnLCAoZGF0YTogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIENoYXRXaWRnZXQgcmVjZWl2ZWQgbmV3IG1lc3NhZ2U6JywgZGF0YSlcbiAgICAgICAgaWYgKGRhdGEuY29udmVyc2F0aW9uSWQgPT09IGNvbnZlcnNhdGlvbklkICYmIGRhdGEubWVzc2FnZUlkKSB7XG4gICAgICAgICAgY29uc3QgbmV3TWVzc2FnZSA9IHtcbiAgICAgICAgICAgIGlkOiBkYXRhLm1lc3NhZ2VJZCxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBkYXRhLmNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgc2VuZGVyVHlwZTogZGF0YS5zZW5kZXJUeXBlLFxuICAgICAgICAgICAgc2VuZGVyTmFtZTogZGF0YS5zZW5kZXJOYW1lLFxuICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBkYXRhLnRpbWVzdGFtcCxcbiAgICAgICAgICAgIHNlbnRfYXQ6IGRhdGEudGltZXN0YW1wIC8vIEFkZCBzZW50X2F0IGZvciBjb25zaXN0ZW5jeVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IHByZXYuc29tZShtc2cgPT4gbXNnLmlkID09PSBkYXRhLm1lc3NhZ2VJZClcbiAgICAgICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIEFkZGluZyBuZXcgbWVzc2FnZSB0byBjaGF0OicsIG5ld01lc3NhZ2UpXG4gICAgICAgICAgICAgIHJldHVybiBbLi4ucHJldiwgbmV3TWVzc2FnZV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcmV2XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyByZWZyZXNoIGNvbnZlcnNhdGlvbnMgbGlzdCB0byB1cGRhdGUgbGFzdCBtZXNzYWdlXG4gICAgICAgIGxvYWRDb252ZXJzYXRpb25zKClcbiAgICAgIH0pXG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign8J+SrCBDaGF0V2lkZ2V0IC0gU29ja2V0IGluaXRpYWxpemF0aW9uIGVycm9yOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNlbmRNZXNzYWdlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghbmV3TWVzc2FnZS50cmltKCkgfHwgc2VuZGluZyB8fCAhYWN0aXZlQ29udmVyc2F0aW9uKSByZXR1cm5cblxuICAgIHNldFNlbmRpbmcodHJ1ZSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICBjb252ZXJzYXRpb25JZDogYWN0aXZlQ29udmVyc2F0aW9uLmlkLFxuICAgICAgICBzZW5kZXJUeXBlOiB1c2VyPy5yb2xlID09PSAnc2VydmljZV9wcm92aWRlcicgfHwgdXNlcj8ucm9sZSA9PT0gJ3RyYWRlc3BlcnNvbicgPyAncHJvdmlkZXInIDogJ2N1c3RvbWVyJyxcbiAgICAgICAgc2VuZGVyTmFtZTogYCR7dXNlcj8uZmlyc3ROYW1lfSAke3VzZXI/Lmxhc3ROYW1lfWAudHJpbSgpIHx8ICdVc2VyJyxcbiAgICAgICAgbWVzc2FnZTogbmV3TWVzc2FnZVxuICAgICAgfSlcblxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgbmV3TXNnID0ge1xuICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLmRhdGE/Lm1lc3NhZ2VJZCB8fCBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgY29udmVyc2F0aW9uSWQ6IGFjdGl2ZUNvbnZlcnNhdGlvbi5pZCxcbiAgICAgICAgICBzZW5kZXJUeXBlOiB1c2VyPy5yb2xlID09PSAnc2VydmljZV9wcm92aWRlcicgfHwgdXNlcj8ucm9sZSA9PT0gJ3RyYWRlc3BlcnNvbicgPyAncHJvdmlkZXInIDogJ2N1c3RvbWVyJyxcbiAgICAgICAgICBzZW5kZXJOYW1lOiBgJHt1c2VyPy5maXJzdE5hbWV9ICR7dXNlcj8ubGFzdE5hbWV9YC50cmltKCkgfHwgJ1VzZXInLFxuICAgICAgICAgIG1lc3NhZ2U6IG5ld01lc3NhZ2UsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc2V0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgbmV3TXNnXSlcbiAgICAgICAgc2V0TmV3TWVzc2FnZSgnJylcbiAgICAgICAgXG4gICAgICAgIC8vIEF1dG8tc2Nyb2xsIGFmdGVyIHNlbmRpbmcgbWVzc2FnZVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNjcm9sbFRvQm90dG9tKCksIDEwMClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign8J+SrCBDaGF0V2lkZ2V0IC0gRXJyb3Igc2VuZGluZyBtZXNzYWdlOicsIGVycm9yKVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTZW5kaW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG1hcmtDb252ZXJzYXRpb25Bc1JlYWQgPSBhc3luYyAoY29udmVyc2F0aW9uSWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+TliBNYXJraW5nIGNvbnZlcnNhdGlvbiBhcyByZWFkOicsIGNvbnZlcnNhdGlvbklkKVxuICAgICAgY29uc3Qgc2VuZGVyVHlwZSA9IHVzZXI/LnJvbGUgPT09ICdzZXJ2aWNlX3Byb3ZpZGVyJyB8fCB1c2VyPy5yb2xlID09PSAndHJhZGVzcGVyc29uJyA/ICdwcm92aWRlcicgOiAnY3VzdG9tZXInXG4gICAgICBcbiAgICAgIGF3YWl0IGFwaUNsaWVudC5tYXJrTWFya2V0cGxhY2VBc1JlYWQoY29udmVyc2F0aW9uSWQsIHNlbmRlclR5cGUpXG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgY29udmVyc2F0aW9uIGluIHRoZSBsb2NhbCBzdGF0ZSB0byByZW1vdmUgdW5yZWFkIGNvdW50XG4gICAgICBzZXRDb252ZXJzYXRpb25zKHByZXYgPT4gcHJldi5tYXAoY29udiA9PiBcbiAgICAgICAgY29udi5pZCA9PT0gY29udmVyc2F0aW9uSWQgXG4gICAgICAgICAgPyB7IC4uLmNvbnYsIHVucmVhZENvdW50OiAwIH1cbiAgICAgICAgICA6IGNvbnZcbiAgICAgICkpXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQ29udmVyc2F0aW9uIG1hcmtlZCBhcyByZWFkJylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBtYXJrIGNvbnZlcnNhdGlvbiBhcyByZWFkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNjcm9sbFRvQm90dG9tID0gKCkgPT4ge1xuICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0pXG4gIH1cblxuICAvLyBBdXRvLXNjcm9sbCB3aGVuIG1lc3NhZ2VzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHNjcm9sbFRvQm90dG9tKCksIDEwMClcbiAgICB9XG4gIH0sIFttZXNzYWdlc10pXG5cbiAgY29uc3QgZ29CYWNrVG9Db252ZXJzYXRpb25zID0gKCkgPT4ge1xuICAgIHNldEFjdGl2ZUNvbnZlcnNhdGlvbihudWxsKVxuICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgIHNldE5ld01lc3NhZ2UoJycpXG4gICAgaWYgKHNvY2tldCkge1xuICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKVxuICAgICAgc2V0U29ja2V0KG51bGwpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZm9ybWF0TWVzc2FnZVRpbWUgPSAodGltZXN0YW1wOiBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICBpZiAoIXRpbWVzdGFtcCkgcmV0dXJuICfQvdC10LjQt9Cy0LXRgdGC0L3QvidcbiAgICBcbiAgICBsZXQgZGF0ZTogRGF0ZVxuICAgIFxuICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgdGltZXN0YW1wIGZvcm1hdHNcbiAgICBpZiAodHlwZW9mIHRpbWVzdGFtcCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgPiAxMDAwMDAwMDAwMDAwID8gdGltZXN0YW1wIDogdGltZXN0YW1wICogMTAwMClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aW1lc3RhbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBTUUxpdGUgZGF0ZXRpbWUgZm9ybWF0OiBcIjIwMjQtMDEtMTUgMTA6MzA6NDVcIiBvciBJU08gZm9ybWF0XG4gICAgICBpZiAodGltZXN0YW1wLmluY2x1ZGVzKCcgJykgJiYgIXRpbWVzdGFtcC5pbmNsdWRlcygnVCcpKSB7XG4gICAgICAgIC8vIFNRTGl0ZSBmb3JtYXQ6IGNvbnZlcnQgdG8gSVNPIGZvcm1hdFxuICAgICAgICBjb25zdCBpc29UaW1lc3RhbXAgPSB0aW1lc3RhbXAucmVwbGFjZSgnICcsICdUJykgKyAnWidcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKGlzb1RpbWVzdGFtcClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn0L3QtdC40LfQstC10YHRgtC90L4nXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIGRhdGUgaXMgdmFsaWRcbiAgICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgbWVzc2FnZSB0aW1lc3RhbXA6JywgdGltZXN0YW1wKVxuICAgICAgcmV0dXJuICfQvdC10LjQt9Cy0LXRgdGC0L3QvidcbiAgICB9XG4gICAgXG4gICAgLy8gUmV0dXJuIHRpbWUgaW4gSEg6TU0gZm9ybWF0XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygnYmctQkcnLCB7IFxuICAgICAgICBob3VyOiAnMi1kaWdpdCcsIFxuICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICAgICAgaG91cjEyOiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGZvcm1hdExhc3RBY3Rpdml0eSA9ICh0aW1lc3RhbXA6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgIGlmICghdGltZXN0YW1wKSByZXR1cm4gJ9C90LXQuNC30LLQtdGB0YLQvdC+J1xuICAgIFxuICAgIGxldCBkYXRlOiBEYXRlXG4gICAgXG4gICAgLy8gSGFuZGxlIGRpZmZlcmVudCB0aW1lc3RhbXAgZm9ybWF0cyAoc2FtZSBsb2dpYyBhcyBmb3JtYXRNZXNzYWdlVGltZSlcbiAgICBpZiAodHlwZW9mIHRpbWVzdGFtcCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgPiAxMDAwMDAwMDAwMDAwID8gdGltZXN0YW1wIDogdGltZXN0YW1wICogMTAwMClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aW1lc3RhbXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBTUUxpdGUgZGF0ZXRpbWUgZm9ybWF0OiBcIjIwMjQtMDEtMTUgMTA6MzA6NDVcIiBvciBJU08gZm9ybWF0XG4gICAgICBpZiAodGltZXN0YW1wLmluY2x1ZGVzKCcgJykgJiYgIXRpbWVzdGFtcC5pbmNsdWRlcygnVCcpKSB7XG4gICAgICAgIC8vIFNRTGl0ZSBmb3JtYXQ6IGNvbnZlcnQgdG8gSVNPIGZvcm1hdFxuICAgICAgICBjb25zdCBpc29UaW1lc3RhbXAgPSB0aW1lc3RhbXAucmVwbGFjZSgnICcsICdUJykgKyAnWidcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKGlzb1RpbWVzdGFtcClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAn0L3QtdC40LfQstC10YHRgtC90L4nXG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIGRhdGUgaXMgdmFsaWRcbiAgICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgbGFzdCBhY3Rpdml0eSB0aW1lc3RhbXA6JywgdGltZXN0YW1wKVxuICAgICAgcmV0dXJuICfQvdC10LjQt9Cy0LXRgdGC0L3QvidcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IGRpZmZNcyA9IG5vdy5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWUoKVxuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5mbG9vcihkaWZmTXMgLyA4NjQwMDAwMClcblxuICAgIC8vIFNob3cgYWN0dWFsIHRpbWUgZm9yIHRvZGF5J3MgbWVzc2FnZXMsIGRhdGUgZm9yIG9sZGVyIG9uZXNcbiAgICBpZiAoZGlmZkRheXMgPT09IDApIHtcbiAgICAgIC8vIFRvZGF5IC0gc2hvdyB0aW1lIGxpa2UgXCIxNDozMFwiXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoJ2JnLUJHJywgeyBcbiAgICAgICAgICBob3VyOiAnMi1kaWdpdCcsIFxuICAgICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgICAgICAgIGhvdXIxMjogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRpZmZEYXlzID09PSAxKSB7XG4gICAgICAvLyBZZXN0ZXJkYXkgLSBzaG93IFwi0LLRh9C10YDQsFwiXG4gICAgICByZXR1cm4gJ9Cy0YfQtdGA0LAnXG4gICAgfSBlbHNlIGlmIChkaWZmRGF5cyA8IDcpIHtcbiAgICAgIC8vIFRoaXMgd2VlayAtIHNob3cgZGF5IG5hbWVcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnYmctQkcnLCB7IHdlZWtkYXk6ICdzaG9ydCcgfSlcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGAke2RpZmZEYXlzfdC0YFxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPbGRlciAtIHNob3cgZGF0ZVxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdiZy1CRycsIHsgXG4gICAgICAgICAgZGF5OiAnMi1kaWdpdCcsIFxuICAgICAgICAgIG1vbnRoOiAnMi1kaWdpdCcgXG4gICAgICAgIH0pXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gV2FpdCBmb3IgYXV0aGVudGljYXRpb24gdG8gbG9hZFxuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIEF1dGggc3RpbGwgbG9hZGluZywgd2FpdGluZy4uLicpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIERvbid0IHNob3cgd2lkZ2V0IG9uIGF1dGhlbnRpY2F0aW9uIHBhZ2VzXG4gIGlmIChwYXRobmFtZT8uc3RhcnRzV2l0aCgnL2F1dGgvJykpIHtcbiAgICBjb25zb2xlLmxvZygn8J+SrCBDaGF0V2lkZ2V0IC0gTm90IHNob3dpbmcgb24gYXV0aCBwYWdlOicsIHBhdGhuYW1lKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvLyBEb24ndCBzaG93IHdpZGdldCBpZiB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gIGlmICghaXNBdXRoZW50aWNhdGVkIHx8ICF1c2VyKSB7XG4gICAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIE5vdCBzaG93aW5nIHdpZGdldDogdXNlciBub3QgYXV0aGVudGljYXRlZCcsIHsgaXNBdXRoZW50aWNhdGVkLCB1c2VyOiAhIXVzZXIgfSlcbiAgICAvLyBUZW1wb3Jhcnk6IFNob3cgYSBsb2dpbiBwcm9tcHQgd2lkZ2V0IGZvciBub24tYXV0aGVudGljYXRlZCB1c2Vyc1xuICAgIHJldHVybiAoXG4gICAgICA8YnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hdXRoL2xvZ2luJ31cbiAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTYgcmlnaHQtNiBiZy1ncmF5LTYwMCBob3ZlcjpiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlIHAtNCByb3VuZGVkLWZ1bGwgc2hhZG93LWxnIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCB6LVs5OTk5XSByZWxhdGl2ZVwiXG4gICAgICAgIGFyaWEtbGFiZWw9XCLQktC70LXQt9GC0LUg0LfQsCDRh9Cw0YJcIlxuICAgICAgPlxuICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNiBoLTZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNOCAxMmguMDFNMTIgMTJoLjAxTTE2IDEyaC4wMU0yMSAxMmMwIDQuNDE4LTQuMDMgOC05IDhhOS44NjMgOS44NjMgMCAwMS00LjI1NS0uOTQ5TDMgMjBsMS4zOTUtMy43MkMzLjUxMiAxNS4wNDIgMyAxMy41NzQgMyAxMmMwLTQuNDE4IDQuMDMtOCA5LThzOSAzLjU4MiA5IDh6XCIgLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLXRvcC0yIC1yaWdodC0yIGJnLWJsdWUtNTAwIHRleHQtd2hpdGUgdGV4dC14cyByb3VuZGVkLWZ1bGwgdy02IGgtNiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBmb250LWJvbGRcIj5cbiAgICAgICAgICAhXG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9idXR0b24+XG4gICAgKVxuICB9XG5cbiAgY29uc29sZS5sb2coJ/CfkqwgQ2hhdFdpZGdldCAtIFJlbmRlcmluZyB3aWRnZXQgZm9yIHVzZXI6JywgdXNlcj8ucm9sZSwgJ2lzT3BlbjonLCBpc09wZW4pXG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgey8qIENoYXQgV2lkZ2V0IEJ1dHRvbiAqL31cbiAgICAgIHshaXNPcGVuICYmIChcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzT3Blbih0cnVlKX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tNiByaWdodC02IGJnLXB1cnBsZS02MDAgaG92ZXI6YmctcHVycGxlLTcwMCB0ZXh0LXdoaXRlIHAtNCByb3VuZGVkLWZ1bGwgc2hhZG93LWxnIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCB6LVs5OTk5XSByZWxhdGl2ZSBib3JkZXItNCBib3JkZXItd2hpdGVcIlxuICAgICAgICAgIGFyaWEtbGFiZWw9XCLQntGC0LLQvtGA0Lgg0YfQsNGCXCJcbiAgICAgICAgICBzdHlsZT17eyBcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLCBcbiAgICAgICAgICAgIGJvdHRvbTogJzI0cHgnLCBcbiAgICAgICAgICAgIHJpZ2h0OiAnMjRweCcsIFxuICAgICAgICAgICAgekluZGV4OiA5OTk5LFxuICAgICAgICAgICAgd2lkdGg6ICc2NHB4JyxcbiAgICAgICAgICAgIGhlaWdodDogJzY0cHgnXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy02IGgtNlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxuICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTggMTJoLjAxTTEyIDEyaC4wMU0xNiAxMmguMDFNMjEgMTJjMCA0LjQxOC00LjAzIDgtOSA4YTkuODYzIDkuODYzIDAgMDEtNC4yNTUtLjk0OUwzIDIwbDEuMzk1LTMuNzJDMy41MTIgMTUuMDQyIDMgMTMuNTc0IDMgMTJjMC00LjQxOCA0LjAzLTggOS04czkgMy41ODIgOSA4elwiIC8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgXG4gICAgICAgICAgey8qIFVucmVhZCBiYWRnZSAqL31cbiAgICAgICAgICB7dW5yZWFkVG90YWwgPiAwICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLXRvcC0yIC1yaWdodC0yIGJnLXJlZC01MDAgdGV4dC13aGl0ZSB0ZXh0LXhzIHJvdW5kZWQtZnVsbCB3LTYgaC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGZvbnQtYm9sZFwiPlxuICAgICAgICAgICAgICB7dW5yZWFkVG90YWwgPiA5OSA/ICc5OSsnIDogdW5yZWFkVG90YWx9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBDaGF0IFdpZGdldCBXaW5kb3cgKi99XG4gICAgICB7aXNPcGVuICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BmaXhlZCBib3R0b20tNiByaWdodC02IGJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXhsIGJvcmRlciB6LVs5OTk5XSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgJHtcbiAgICAgICAgICBpc01pbmltaXplZCA/ICd3LTgwIGgtMTInIDogJ3ctODAgaC05NidcbiAgICAgICAgfWB9PlxuICAgICAgICAgIHsvKiBIZWFkZXIgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC00IGJvcmRlci1iIGJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkLXQtbGdcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICAgIHthY3RpdmVDb252ZXJzYXRpb24gJiYgKFxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2dvQmFja1RvQ29udmVyc2F0aW9uc31cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgaG92ZXI6dGV4dC1ncmF5LTIwMCBtci0yXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICDihpBcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIgaC0yIGJnLWdyZWVuLTQwMCByb3VuZGVkLWZ1bGxcIj48L2Rpdj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5cbiAgICAgICAgICAgICAgICB7YWN0aXZlQ29udmVyc2F0aW9uID8gYWN0aXZlQ29udmVyc2F0aW9uLmN1c3RvbWVyTmFtZSA6ICfQodGK0L7QsdGJ0LXQvdC40Y8nfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIHshYWN0aXZlQ29udmVyc2F0aW9uICYmIHVucmVhZFRvdGFsID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHRleHQteHMgcHgtMiBweS0xIHJvdW5kZWQtZnVsbFwiPlxuICAgICAgICAgICAgICAgICAge3VucmVhZFRvdGFsfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzTWluaW1pemVkKCFpc01pbmltaXplZCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC13aGl0ZSBob3Zlcjp0ZXh0LWdyYXktMjAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtpc01pbmltaXplZCA/IFwi0KDQsNC30YjQuNGA0LhcIiA6IFwi0JzQuNC90LjQvNC40LfQuNGA0LDQuVwifVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTQgaC00XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICAgICAgICB7aXNNaW5pbWl6ZWQgPyAoXG4gICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk01IDE1bDctNyA3IDdcIiAvPlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTE5IDlsLTcgNy03LTdcIiAvPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc09wZW4oZmFsc2UpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgaG92ZXI6dGV4dC1ncmF5LTIwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cItCX0LDRgtCy0L7RgNC4INGH0LDRglwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctNCBoLTRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBDb250ZW50ICovfVxuICAgICAgICAgIHshaXNNaW5pbWl6ZWQgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGgtODBcIj5cbiAgICAgICAgICAgICAge2FjdGl2ZUNvbnZlcnNhdGlvbiA/IChcbiAgICAgICAgICAgICAgICAvKiBBY3RpdmUgQ2hhdCBWaWV3ICovXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIHsvKiBNZXNzYWdlcyBBcmVhICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtMyBzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgICAgICAge21lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtZ3JheS01MDAgcHktOFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBtYi0yXCI+8J+SrDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbVwiPtCd0Y/QvNCwINGB0YrQvtCx0YnQtdC90LjRjzwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlcy5tYXAoKG1zZykgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXttc2cuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHVzZXI/LnJvbGUgPT09ICdzZXJ2aWNlX3Byb3ZpZGVyJyB8fCB1c2VyPy5yb2xlID09PSAndHJhZGVzcGVyc29uJykgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKG1zZy5zZW5kZXJUeXBlID09PSAncHJvdmlkZXInID8gJ2p1c3RpZnktZW5kJyA6ICdqdXN0aWZ5LXN0YXJ0JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAobXNnLnNlbmRlclR5cGUgPT09ICdjdXN0b21lcicgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgbWF4LXcteHMgcHgtMyBweS0yIHJvdW5kZWQtbGcgdGV4dC1zbSAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodXNlcj8ucm9sZSA9PT0gJ3NlcnZpY2VfcHJvdmlkZXInIHx8IHVzZXI/LnJvbGUgPT09ICd0cmFkZXNwZXJzb24nKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChtc2cuc2VuZGVyVHlwZSA9PT0gJ3Byb3ZpZGVyJyA/ICdiZy1wdXJwbGUtNjAwIHRleHQtd2hpdGUnIDogJ2JnLWdyYXktMjAwIHRleHQtZ3JheS04MDAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKG1zZy5zZW5kZXJUeXBlID09PSAnY3VzdG9tZXInID8gJ2JnLXB1cnBsZS02MDAgdGV4dC13aGl0ZScgOiAnYmctZ3JheS0yMDAgdGV4dC1ncmF5LTgwMCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pnttc2cubWVzc2FnZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgdGV4dC14cyBtdC0xICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1c2VyPy5yb2xlID09PSAnc2VydmljZV9wcm92aWRlcicgfHwgdXNlcj8ucm9sZSA9PT0gJ3RyYWRlc3BlcnNvbicpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKG1zZy5zZW5kZXJUeXBlID09PSAncHJvdmlkZXInID8gJ3RleHQtcHVycGxlLTIwMCcgOiAndGV4dC1ncmF5LTUwMCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAobXNnLnNlbmRlclR5cGUgPT09ICdjdXN0b21lcicgPyAndGV4dC1wdXJwbGUtMjAwJyA6ICd0ZXh0LWdyYXktNTAwJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Zvcm1hdE1lc3NhZ2VUaW1lKG1zZy5zZW50X2F0IHx8IG1zZy50aW1lc3RhbXApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICkpXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIHsvKiBJbnZpc2libGUgZWxlbWVudCB0byBzY3JvbGwgdG8gKi99XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB7LyogTWVzc2FnZSBJbnB1dCAqL31cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLXQgcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtuZXdNZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXROZXdNZXNzYWdlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5UHJlc3M9eyhlKSA9PiBlLmtleSA9PT0gJ0VudGVyJyAmJiBzZW5kTWVzc2FnZSgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLQndCw0L/QuNGI0LXRgtC1INGB0YrQvtCx0YnQtdC90LjQtS4uLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYm9yZGVyIHJvdW5kZWQtbGcgcHgtMyBweS0yIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXB1cnBsZS01MDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3NlbmRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtzZW5kTWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshbmV3TWVzc2FnZS50cmltKCkgfHwgc2VuZGluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBweC0zIHB5LTIgcm91bmRlZC1sZyBkaXNhYmxlZDpvcGFjaXR5LTUwIHRleHQtc20gaG92ZXI6YmctcHVycGxlLTcwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3NlbmRpbmcgPyAnLi4uJyA6ICfwn5OkJ31cbiAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAvKiBDb252ZXJzYXRpb25zIExpc3QgVmlldyAqL1xuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICB7bG9hZGluZyA/IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC04IHctOCBib3JkZXItYi0yIGJvcmRlci1wdXJwbGUtNjAwIG14LWF1dG8gbWItMlwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+0JfQsNGA0LXQttC00LDQvdC1Li4uPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkgOiBjb252ZXJzYXRpb25zLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC00eGwgbWItMlwiPvCfkqw8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc21cIj7Ql9C00YDQsNCy0LXQudGC0LUsIHt1c2VyPy5maXJzdE5hbWV9ITwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyPy5yb2xlID09PSAnc2VydmljZV9wcm92aWRlcicgfHwgdXNlcj8ucm9sZSA9PT0gJ3RyYWRlc3BlcnNvbicgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAn0J3Rj9C80LAg0LDQutGC0LjQstC90Lgg0YDQsNC30LPQvtCy0L7RgNC4INGBINC60LvQuNC10L3RgtC4J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ9Cd0Y/QvNCwINCw0LrRgtC40LLQvdC4INGA0LDQt9Cz0L7QstC+0YDQuCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIC8qIENvbnZlcnNhdGlvbnMgTGlzdCAqL1xuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICB7Y29udmVyc2F0aW9ucy5tYXAoKGNvbnZlcnNhdGlvbikgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtjb252ZXJzYXRpb24uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQ29udmVyc2F0aW9uQ2xpY2soY29udmVyc2F0aW9uKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTQgaG92ZXI6YmctZ3JheS01MCBjdXJzb3ItcG9pbnRlciBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgZmxleCBpdGVtcy1zdGFydCBzcGFjZS14LTNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTEwIGgtMTAgYmctcHVycGxlLTEwMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtcHVycGxlLTYwMCBmb250LW1lZGl1bSB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsodXNlcj8ucm9sZSA9PT0gJ2N1c3RvbWVyJyA/IGNvbnZlcnNhdGlvbi5zZXJ2aWNlUHJvdmlkZXJOYW1lIDogY29udmVyc2F0aW9uLmN1c3RvbWVyTmFtZSk/LmNoYXJBdCgwKSB8fCAnQyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgbWluLXctMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIHRydW5jYXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZXI/LnJvbGUgPT09ICdjdXN0b21lcicgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChjb252ZXJzYXRpb24uc2VydmljZVByb3ZpZGVyTmFtZSB8fCAn0J3QtdC40LfQstC10YHRgtC10L0g0YHQv9C10YbQuNCw0LvQuNGB0YInKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoY29udmVyc2F0aW9uLmN1c3RvbWVyTmFtZSB8fCAn0J3QtdC40LfQstC10YHRgtC10L0g0LrQu9C40LXQvdGCJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y29udmVyc2F0aW9uLnVucmVhZENvdW50ID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHgtMiBweS0xIHRleHQteHMgZm9udC1ib2xkIGxlYWRpbmctbm9uZSB0ZXh0LXdoaXRlIGJnLXJlZC02MDAgcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb252ZXJzYXRpb24udW5yZWFkQ291bnQgPiA5OSA/ICc5OSsnIDogY29udmVyc2F0aW9uLnVucmVhZENvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0TGFzdEFjdGl2aXR5KGNvbnZlcnNhdGlvbi5sYXN0QWN0aXZpdHkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb252ZXJzYXRpb24ubGFzdE1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgdHJ1bmNhdGUgbXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb252ZXJzYXRpb24ubGFzdE1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBRdWljayBBY3Rpb25zICovfVxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJib3JkZXItdCBwLTMgc3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93Lm9wZW4oJy9zZWFyY2gnLCAnX2JsYW5rJyl9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHRleHQtbGVmdCB0ZXh0LXNtIHRleHQtcHVycGxlLTYwMCBob3Zlcjp0ZXh0LXB1cnBsZS04MDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAg8J+UjSDQotGK0YDRgdC4INGB0L/QtdGG0LjQsNC70LjRgdGC0LhcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIHsodXNlcj8ucm9sZSA9PT0gJ3NlcnZpY2VfcHJvdmlkZXInIHx8IHVzZXI/LnJvbGUgPT09ICd0cmFkZXNwZXJzb24nKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5vcGVuKCcvZGFzaGJvYXJkJywgJ19ibGFuaycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgdGV4dC1sZWZ0IHRleHQtc20gdGV4dC1wdXJwbGUtNjAwIGhvdmVyOnRleHQtcHVycGxlLTgwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIPCfk4og0KLQsNCx0LvQviDQt9CwINGD0L/RgNCw0LLQu9C10L3QuNC1XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5vcGVuKCcvZGFzaGJvYXJkP3ZpZXc9YXNzaWduZWQnLCAnX2JsYW5rJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWxlZnQgdGV4dC1zbSB0ZXh0LXB1cnBsZS02MDAgaG92ZXI6dGV4dC1wdXJwbGUtODAwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAg8J+TiyDQnNC+0LjRgtC1INC30LDRj9Cy0LrQuFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKVxufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlUGF0aG5hbWUiLCJ1c2VBdXRoIiwiYXBpQ2xpZW50IiwiQ2hhdFdpZGdldCIsImlzT3BlbiIsInNldElzT3BlbiIsImlzTWluaW1pemVkIiwic2V0SXNNaW5pbWl6ZWQiLCJjb252ZXJzYXRpb25zIiwic2V0Q29udmVyc2F0aW9ucyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwidW5yZWFkVG90YWwiLCJzZXRVbnJlYWRUb3RhbCIsImFjdGl2ZUNvbnZlcnNhdGlvbiIsInNldEFjdGl2ZUNvbnZlcnNhdGlvbiIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJuZXdNZXNzYWdlIiwic2V0TmV3TWVzc2FnZSIsInNlbmRpbmciLCJzZXRTZW5kaW5nIiwic29ja2V0Iiwic2V0U29ja2V0IiwidXNlciIsImlzQXV0aGVudGljYXRlZCIsImlzTG9hZGluZyIsIm1lc3NhZ2VzRW5kUmVmIiwicGF0aG5hbWUiLCJjb25zb2xlIiwibG9nIiwiaWQiLCJlbWFpbCIsInJvbGUiLCJoYXNBdXRoVG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaGFzVXNlckRhdGEiLCJsb2FkQ29udmVyc2F0aW9ucyIsInJlZnJlc2hJbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInRvdGFsIiwicmVkdWNlIiwic3VtIiwiY29udiIsInVucmVhZENvdW50IiwicmVzcG9uc2UiLCJnZXRQcm92aWRlck1hcmtldHBsYWNlQ29udmVyc2F0aW9ucyIsImRhdGEiLCJzdGF0dXMiLCJzdWNjZXNzIiwiY29udmVyc2F0aW9uc0RhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiQXJyYXkiLCJpc0FycmF5IiwibWFwcGVkQ29udmVyc2F0aW9ucyIsIm1hcCIsImxhc3RBY3Rpdml0eSIsImxhc3RfbWVzc2FnZV9hdCIsImNyZWF0ZWRfYXQiLCJ1bnJlYWRfY291bnQiLCJsZW5ndGgiLCJjb252ZXJzYXRpb25zQXJyYXkiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJpdGVtIiwiaGFzU3VjY2VzcyIsInN1Y2Nlc3NWYWx1ZSIsImhhc0RhdGEiLCJkYXRhVHlwZSIsImdldENvbnZlcnNhdGlvbnMiLCJjIiwic2VydmljZVByb3ZpZGVyTmFtZSIsImN1c3RvbWVyTmFtZSIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1c1RleHQiLCJoYW5kbGVDb252ZXJzYXRpb25DbGljayIsImNvbnZlcnNhdGlvbiIsImdldE1hcmtldHBsYWNlTWVzc2FnZXMiLCJtZXNzYWdlc0RhdGEiLCJtZXNzYWdlc0FycmF5IiwiZGF0YUNvbnRlbnQiLCJzZXRUaW1lb3V0Iiwic2Nyb2xsVG9Cb3R0b20iLCJtYXJrQ29udmVyc2F0aW9uQXNSZWFkIiwiaW5pdGlhbGl6ZVNvY2tldCIsImNvbnZlcnNhdGlvbklkIiwiYXBpVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJzb2NrZXRVcmwiLCJyZXBsYWNlIiwiaW8iLCJyZXF1aXJlIiwic29ja2V0SW5zdGFuY2UiLCJ0cmFuc3BvcnRzIiwidGltZW91dCIsInJlY29ubmVjdGlvbiIsIm9uIiwiZW1pdCIsIm1lc3NhZ2VJZCIsInNlbmRlclR5cGUiLCJzZW5kZXJOYW1lIiwidGltZXN0YW1wIiwic2VudF9hdCIsInByZXYiLCJleGlzdHMiLCJzb21lIiwibXNnIiwic2VuZE1lc3NhZ2UiLCJ0cmltIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJuZXdNc2ciLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJ0b0lTT1N0cmluZyIsIm1hcmtNYXJrZXRwbGFjZUFzUmVhZCIsImN1cnJlbnQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiZ29CYWNrVG9Db252ZXJzYXRpb25zIiwiZGlzY29ubmVjdCIsImZvcm1hdE1lc3NhZ2VUaW1lIiwiZGF0ZSIsImluY2x1ZGVzIiwiaXNvVGltZXN0YW1wIiwiaXNOYU4iLCJnZXRUaW1lIiwid2FybiIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJob3VyMTIiLCJlIiwiZm9ybWF0TGFzdEFjdGl2aXR5IiwiZGlmZk1zIiwiZGlmZkRheXMiLCJNYXRoIiwiZmxvb3IiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ3ZWVrZGF5IiwiZGF5IiwibW9udGgiLCJzdGFydHNXaXRoIiwiYnV0dG9uIiwib25DbGljayIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNsYXNzTmFtZSIsImFyaWEtbGFiZWwiLCJzdmciLCJmaWxsIiwic3Ryb2tlIiwidmlld0JveCIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsImQiLCJkaXYiLCJzdHlsZSIsInBvc2l0aW9uIiwiYm90dG9tIiwicmlnaHQiLCJ6SW5kZXgiLCJ3aWR0aCIsImhlaWdodCIsInNwYW4iLCJwIiwicmVmIiwiaW5wdXQiLCJ0eXBlIiwidmFsdWUiLCJvbkNoYW5nZSIsInRhcmdldCIsIm9uS2V5UHJlc3MiLCJrZXkiLCJwbGFjZWhvbGRlciIsImRpc2FibGVkIiwiY2hhckF0IiwibGFzdE1lc3NhZ2UiLCJvcGVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/ChatWidget.tsx\n"));

/***/ })

});