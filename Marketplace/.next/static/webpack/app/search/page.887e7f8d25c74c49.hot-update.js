"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/search/page",{

/***/ "(app-pages-browser)/./src/components/ChatModal.tsx":
/*!**************************************!*\
  !*** ./src/components/ChatModal.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ChatModal; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _UnifiedCaseModal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./UnifiedCaseModal */ \"(app-pages-browser)/./src/components/UnifiedCaseModal.tsx\");\n/* harmony import */ var _ServiceRequestButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ServiceRequestButton */ \"(app-pages-browser)/./src/components/ServiceRequestButton.tsx\");\n/* harmony import */ var _SurveyModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SurveyModal */ \"(app-pages-browser)/./src/components/SurveyModal.tsx\");\n/* harmony import */ var _lib_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/api */ \"(app-pages-browser)/./src/lib/api.ts\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(app-pages-browser)/./src/contexts/AuthContext.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\nfunction ChatModal(param) {\n    let { provider, isOpen, onClose } = param;\n    _s();\n    const { user, isAuthenticated } = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_6__.useAuth)();\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [newMessage, setNewMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [conversationId, setConversationId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [customerName, setCustomerName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [customerEmail, setCustomerEmail] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [customerPhone, setCustomerPhone] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isStarted, setIsStarted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [socket, setSocket] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showUnifiedModal, setShowUnifiedModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [currentTemplate, setCurrentTemplate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isSubmittingTemplate, setIsSubmittingTemplate] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [modalMode, setModalMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"direct\");\n    const [showSurveyModal, setShowSurveyModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [surveyCase, setSurveyCase] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const messagesEndRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Storage keys for persistence\n    const storageKey = \"chat_\".concat(provider.id);\n    const conversationKey = \"conversation_\".concat(provider.id);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: \"smooth\"\n        });\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        scrollToBottom();\n    }, [\n        messages\n    ]);\n    // Initialize user data only once when modal opens\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isOpen && isAuthenticated && user && !isStarted) {\n            console.log(\"\\uD83D\\uDDE8️ ChatModal opened for provider:\", provider.id);\n            const fullName = \"\".concat(user.firstName || \"\", \" \").concat(user.lastName || \"\").trim();\n            const finalName = fullName || \"User\";\n            setCustomerName(finalName);\n            setCustomerEmail(user.email || \"\");\n            setCustomerPhone(user.phoneNumber || \"\");\n            // Check for existing conversation\n            const savedConversationId = localStorage.getItem(conversationKey);\n            if (savedConversationId) {\n                setConversationId(savedConversationId);\n                setIsStarted(true);\n                loadMessages(savedConversationId);\n            } else {\n                // Auto-start conversation for authenticated users\n                startConversation({\n                    name: finalName,\n                    email: user.email || \"\",\n                    phone: user.phoneNumber || \"\"\n                });\n            }\n        }\n    }, [\n        isOpen,\n        isAuthenticated,\n        user,\n        provider.id\n    ]);\n    // Initialize socket for real-time messaging\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isOpen || !conversationId || \"object\" === \"undefined\") return;\n        const initSocket = ()=>{\n            try {\n                const apiUrl = \"http://192.168.0.129:3000/api/v1\" || 0;\n                const socketUrl = apiUrl.replace(\"/api/v1\", \"\");\n                console.log(\"\\uD83D\\uDCAC Customer connecting to socket:\", socketUrl);\n                const socketInstance = io(socketUrl, {\n                    transports: [\n                        \"websocket\",\n                        \"polling\"\n                    ],\n                    timeout: 10000,\n                    reconnection: true,\n                    reconnectionAttempts: 5,\n                    reconnectionDelay: 1000\n                });\n                socketInstance.on(\"connect\", ()=>{\n                    console.log(\"✅ Customer connected to WebSocket server\");\n                    setSocket(socketInstance);\n                    // Join conversation room for real-time updates\n                    socketInstance.emit(\"join-conversation\", conversationId);\n                    console.log(\"\\uD83C\\uDFE0 Customer joined conversation room:\", conversationId);\n                });\n                socketInstance.on(\"disconnect\", (reason)=>{\n                    console.log(\"❌ Customer disconnected from WebSocket server:\", reason);\n                });\n                socketInstance.on(\"connect_error\", (error)=>{\n                    console.error(\"❌ Customer WebSocket connection error:\", error);\n                });\n            } catch (error) {\n                console.error(\"Failed to create customer socket:\", error);\n            }\n        };\n        initSocket();\n        return ()=>{\n            if (socket) {\n                socket.disconnect();\n                console.log(\"\\uD83D\\uDD0C Customer socket disconnected\");\n            }\n        };\n    }, [\n        isOpen,\n        conversationId\n    ]);\n    // Setup real-time message listeners\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!socket || !conversationId) return;\n        const handleNewMessage = (data)=>{\n            console.log(\"\\uD83D\\uDCAC Customer received new message:\", data);\n            // Only add messages from providers (not our own messages)\n            if (data.conversationId === conversationId && data.messageId && data.senderType === \"provider\") {\n                const newMessage = {\n                    id: data.messageId,\n                    conversationId: data.conversationId,\n                    senderType: data.senderType,\n                    senderName: data.senderName,\n                    message: data.message,\n                    messageType: data.messageType,\n                    timestamp: data.timestamp\n                };\n                setMessages((prev)=>{\n                    const messageExists = prev.some((msg)=>msg.id === data.messageId);\n                    if (messageExists) return prev;\n                    console.log(\"\\uD83D\\uDCDD Adding provider message to customer chat:\", newMessage);\n                    return [\n                        ...prev,\n                        newMessage\n                    ];\n                });\n                scrollToBottom();\n            }\n        };\n        socket.on(\"new_message\", handleNewMessage);\n        return ()=>{\n            socket.off(\"new_message\", handleNewMessage);\n        };\n    }, [\n        socket,\n        conversationId\n    ]);\n    const startConversation = async (overrideData)=>{\n        if (loading || isStarted) return;\n        setLoading(true);\n        try {\n            var _response_data, _response_data_data, _response_data1;\n            const data = {\n                providerId: provider.id,\n                customerName: (overrideData === null || overrideData === void 0 ? void 0 : overrideData.name) || customerName,\n                customerEmail: (overrideData === null || overrideData === void 0 ? void 0 : overrideData.email) || customerEmail,\n                customerPhone: (overrideData === null || overrideData === void 0 ? void 0 : overrideData.phone) || customerPhone\n            };\n            console.log(\"\\uD83D\\uDE80 Starting conversation with data:\", data);\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.createOrGetConversation(data);\n            if (((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) && ((_response_data1 = response.data) === null || _response_data1 === void 0 ? void 0 : (_response_data_data = _response_data1.data) === null || _response_data_data === void 0 ? void 0 : _response_data_data.conversationId)) {\n                const newConversationId = response.data.data.conversationId;\n                setConversationId(newConversationId);\n                setIsStarted(true);\n                // Save to localStorage\n                localStorage.setItem(storageKey, JSON.stringify(data));\n                localStorage.setItem(conversationKey, newConversationId);\n                // Load existing messages\n                await loadMessages(newConversationId);\n            }\n        } catch (error) {\n            console.error(\"Error starting conversation:\", error);\n        } finally{\n            setLoading(false);\n        }\n    };\n    const loadMessages = async (convId)=>{\n        try {\n            var _response_data;\n            setLoading(true);\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.getMarketplaceMessages(convId);\n            if (((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) && Array.isArray(response.data.data)) {\n                setMessages(response.data.data);\n                scrollToBottom();\n            }\n        } catch (error) {\n            var _error_response;\n            console.error(\"Error loading messages:\", error);\n            // If conversation doesn't exist, auto-recreate it\n            if ((error === null || error === void 0 ? void 0 : (_error_response = error.response) === null || _error_response === void 0 ? void 0 : _error_response.status) === 404) {\n                console.log(\"\\uD83D\\uDD27 Conversation not found, attempting to recreate...\");\n                await recreateConversation();\n            }\n        } finally{\n            setLoading(false);\n        }\n    };\n    const recreateConversation = async ()=>{\n        try {\n            var _response_data, _response_data_data, _response_data1;\n            const data = {\n                providerId: provider.id,\n                customerName: customerName,\n                customerEmail: customerEmail,\n                customerPhone: customerPhone\n            };\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.createOrGetConversation(data);\n            if (((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) && ((_response_data1 = response.data) === null || _response_data1 === void 0 ? void 0 : (_response_data_data = _response_data1.data) === null || _response_data_data === void 0 ? void 0 : _response_data_data.conversationId)) {\n                const newConversationId = response.data.data.conversationId;\n                setConversationId(newConversationId);\n                localStorage.setItem(conversationKey, newConversationId);\n                console.log(\"✅ Conversation recreated:\", newConversationId);\n            }\n        } catch (error) {\n            console.error(\"Failed to recreate conversation:\", error);\n        }\n    };\n    const handleCaseTemplateClick = async (message)=>{\n        if (message.messageType !== \"case_template\") return;\n        try {\n            var _response_data, _response_data1;\n            // Get the service category from provider\n            const serviceCategory = provider.serviceCategory || provider.service_category || \"general\";\n            // Fetch the case template\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.getCaseTemplate(serviceCategory);\n            if (((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) && ((_response_data1 = response.data) === null || _response_data1 === void 0 ? void 0 : _response_data1.data)) {\n                const templateData = JSON.parse(response.data.data.template_data);\n                setCurrentTemplate({\n                    ...response.data.data,\n                    templateData\n                });\n                setModalMode(\"template\");\n                setShowUnifiedModal(true);\n            }\n        } catch (error) {\n            console.error(\"Error loading case template:\", error);\n        }\n    };\n    const handleTemplateSubmit = async (formData)=>{\n        if (!conversationId || !currentTemplate) return;\n        setIsSubmittingTemplate(true);\n        try {\n            var _response_data;\n            // Create or update service case with filled data\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.createServiceCase({\n                conversationId,\n                templateId: currentTemplate.id,\n                caseData: formData\n            });\n            if ((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) {\n                // Send a message to the provider with the filled template\n                const summaryMessage = \"\\uD83D\\uDCCB Попълних формата с информация за проблема:\\n\\n\".concat(Object.entries(formData).map((param)=>{\n                    let [key, value] = param;\n                    const field = currentTemplate.templateData.fields.find((f)=>f.id === key);\n                    const label = (field === null || field === void 0 ? void 0 : field.label) || key;\n                    return \"\".concat(label, \": \").concat(value);\n                }).join(\"\\n\"));\n                // Send the summary message\n                const messageResponse = await fetch(\"\".concat(\"http://192.168.0.129:3000/api/v1\" || 0, \"/chat/messages\"), {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        conversationId,\n                        senderType: \"customer\",\n                        senderName: customerName,\n                        message: summaryMessage,\n                        messageType: \"case_filled\"\n                    })\n                });\n                if (messageResponse.ok) {\n                    // Add message to local state\n                    const newMessage = {\n                        id: Date.now().toString(),\n                        conversationId: conversationId,\n                        senderType: \"customer\",\n                        senderName: customerName,\n                        message: summaryMessage,\n                        messageType: \"case_filled\",\n                        timestamp: new Date().toISOString()\n                    };\n                    setMessages((prev)=>[\n                            ...prev,\n                            newMessage\n                        ]);\n                }\n                setShowUnifiedModal(false);\n                setCurrentTemplate(null);\n            }\n        } catch (error) {\n            console.error(\"Error submitting template:\", error);\n            alert(\"Възникна грешка при изпращането на формата\");\n        } finally{\n            setIsSubmittingTemplate(false);\n        }\n    };\n    const handleCaseCreation = async (caseData)=>{\n        if (!conversationId) return;\n        try {\n            var _caseResponse_data;\n            console.log(\"\\uD83D\\uDCCB ChatModal - Creating case with data:\", caseData);\n            console.log(\"\\uD83D\\uDCCB ChatModal - Provider object:\", provider);\n            console.log(\"\\uD83D\\uDCCB ChatModal - Assignment type:\", caseData.assignmentType);\n            // Prepare case data for API\n            const casePayload = {\n                serviceType: caseData.serviceType,\n                description: caseData.description,\n                preferredDate: caseData.preferredDate,\n                preferredTime: caseData.preferredTime,\n                priority: caseData.priority || \"normal\",\n                address: caseData.address,\n                phone: caseData.phone,\n                additionalDetails: caseData.additionalDetails || \"\",\n                // Handle assignment based on \"тип заявка\" selection\n                assignmentType: caseData.assignmentType || \"specific\",\n                providerId: caseData.assignmentType === \"specific\" ? provider.id : null,\n                conversationId: conversationId,\n                customerId: user.id,\n                customerName: customerName,\n                customerEmail: customerEmail,\n                customerPhone: customerPhone\n            };\n            console.log(\"\\uD83D\\uDCCB ChatModal - Case payload:\", casePayload);\n            console.log(\"\\uD83D\\uDCCB ChatModal - Final providerId for assignment:\", casePayload.providerId);\n            console.log(\"\\uD83D\\uDCCB ChatModal - Assignment logic: assignmentType =\", caseData.assignmentType, \"provider.id =\", provider.id);\n            // Create the actual case in the system\n            const caseResponse = await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.createCase(casePayload);\n            if ((_caseResponse_data = caseResponse.data) === null || _caseResponse_data === void 0 ? void 0 : _caseResponse_data.success) {\n                const createdCase = caseResponse.data.data;\n                console.log(\"✅ ChatModal - Case created successfully:\", createdCase);\n                // Create a notification message in the chat\n                let notificationMessage = \"✅ Заявката е създадена успешно!\\n\\n\\uD83D\\uDCCB Номер на заявката: #\".concat(createdCase.id, \"\\n\\uD83D\\uDD27 Услуга: \").concat(caseData.serviceType, \"\\n\\uD83D\\uDCCD Адрес: \").concat(caseData.address, \"\\n\\uD83D\\uDCC5 Дата: \").concat(caseData.preferredDate, \"\\n⏰ Време: \").concat(caseData.preferredTime || \"Сутрин (8:00-12:00)\", \"\\n\\n\").concat(caseData.assignmentType === \"specific\" ? \"\\uD83C\\uDFAF Заявката е насочена директно към \".concat(provider.businessName || provider.business_name) : \"\\uD83C\\uDF10 Заявката е поставена в общата опашка за всички специалисти\");\n                // Try to send notification message to chat (non-critical)\n                try {\n                    await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.sendMessage({\n                        conversationId,\n                        senderType: \"customer\",\n                        senderName: customerName,\n                        message: notificationMessage,\n                        messageType: \"case_created\"\n                    });\n                    // Add message to local state\n                    const newMessage = {\n                        id: Date.now().toString(),\n                        conversationId: conversationId,\n                        senderType: \"customer\",\n                        senderName: customerName,\n                        message: notificationMessage,\n                        messageType: \"case_created\",\n                        timestamp: new Date().toISOString()\n                    };\n                    setMessages((prev)=>[\n                            ...prev,\n                            newMessage\n                        ]);\n                } catch (chatError) {\n                    console.error(\"\\uD83D\\uDCCB ChatModal - Failed to send chat notification (non-critical):\", chatError);\n                // Don't throw error here since case was created successfully\n                }\n                // Show success feedback\n                alert(\"Заявката е създадена успешно! Номер: #\".concat(createdCase.id));\n            } else {\n                var _caseResponse_data1;\n                throw new Error(((_caseResponse_data1 = caseResponse.data) === null || _caseResponse_data1 === void 0 ? void 0 : _caseResponse_data1.message) || \"Грешка при създаването на заявката\");\n            }\n            setShowUnifiedModal(false);\n        } catch (error) {\n            console.error(\"Error creating case:\", error);\n            alert(\"Възникна грешка при създаването на заявката\");\n        }\n    };\n    const sendMessage = async ()=>{\n        if (!newMessage.trim() || loading) return;\n        // If no conversation exists, create one first\n        if (!conversationId) {\n            console.log(\"\\uD83D\\uDD27 No conversation found, creating new one...\");\n            await startConversation();\n            if (!conversationId) {\n                console.error(\"❌ Failed to create conversation\");\n                return;\n            }\n        }\n        setLoading(true);\n        try {\n            var _response_data;\n            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.sendMessage({\n                conversationId,\n                senderType: \"customer\",\n                senderName: customerName,\n                message: newMessage\n            });\n            if ((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) {\n                var _response_data_data;\n                // Add customer message to UI immediately (won't come back via WebSocket)\n                const newMsg = {\n                    id: ((_response_data_data = response.data.data) === null || _response_data_data === void 0 ? void 0 : _response_data_data.messageId) || Date.now().toString(),\n                    conversationId: conversationId,\n                    senderType: \"customer\",\n                    senderName: customerName,\n                    message: newMessage,\n                    timestamp: new Date().toISOString()\n                };\n                setMessages((prev)=>[\n                        ...prev,\n                        newMsg\n                    ]);\n                setNewMessage(\"\");\n            }\n        } catch (error) {\n            var _error_response;\n            console.error(\"Error sending message:\", error);\n            // If conversation was deleted, try to recreate and resend\n            if ((error === null || error === void 0 ? void 0 : (_error_response = error.response) === null || _error_response === void 0 ? void 0 : _error_response.status) === 404) {\n                console.log(\"\\uD83D\\uDD27 Conversation deleted, recreating and retrying...\");\n                await recreateConversation();\n                // Retry sending the message\n                setTimeout(()=>sendMessage(), 1000);\n            }\n        } finally{\n            setLoading(false);\n        }\n    };\n    const handleClose = ()=>{\n        // Reset state when closing\n        setMessages([]);\n        setNewMessage(\"\");\n        setConversationId(null);\n        setIsStarted(false);\n        onClose();\n    };\n    if (!isOpen) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-slate-800 rounded-xl shadow-2xl w-full max-w-md mx-4 h-96 flex flex-col border border-white/20\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 rounded-t-xl flex justify-between items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"font-semibold\",\n                                        children: provider.businessName || provider.business_name || \"\".concat(provider.firstName || provider.first_name, \" \").concat(provider.lastName || provider.last_name)\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                        lineNumber: 524,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-sm text-white/80\",\n                                        children: provider.serviceCategory || provider.service_category\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                        lineNumber: 527,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                lineNumber: 523,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleClose,\n                                className: \"text-white/80 hover:text-white transition-colors\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"w-6 h-6\",\n                                    fill: \"none\",\n                                    stroke: \"currentColor\",\n                                    viewBox: \"0 0 24 24\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: 2,\n                                        d: \"M6 18L18 6M6 6l12 12\"\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                        lineNumber: 536,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                    lineNumber: 535,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                lineNumber: 531,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                        lineNumber: 522,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-900/50\",\n                        children: [\n                            loading && messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-center text-slate-400\",\n                                children: \"Зареждане...\"\n                            }, void 0, false, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                lineNumber: 544,\n                                columnNumber: 13\n                            }, this) : messages.map((msg)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex \".concat(msg.senderType === \"customer\" ? \"justify-end\" : \"justify-start\"),\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"max-w-xs px-3 py-2 rounded-lg text-sm \".concat(msg.senderType === \"customer\" ? \"bg-gradient-to-r from-indigo-600 to-purple-600 text-white\" : \"bg-slate-700 text-slate-100 border border-slate-600\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                children: msg.message\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                                lineNumber: 558,\n                                                columnNumber: 19\n                                            }, this),\n                                            msg.messageType === \"case_template\" && msg.senderType === \"provider\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: ()=>handleCaseTemplateClick(msg),\n                                                className: \"mt-2 px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-xs rounded hover:shadow-lg transform hover:scale-105 transition-all duration-300\",\n                                                children: \"\\uD83D\\uDCCB Попълни формата\"\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                                lineNumber: 562,\n                                                columnNumber: 21\n                                            }, this),\n                                            msg.messageType === \"service_request\" && msg.senderType === \"provider\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-2\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ServiceRequestButton__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                                    providerName: provider.businessName || provider.business_name || \"\".concat(provider.firstName || provider.first_name, \" \").concat(provider.lastName || provider.last_name),\n                                                    onClick: ()=>{\n                                                        setModalMode(\"direct\");\n                                                        setShowUnifiedModal(true);\n                                                    }\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                                    lineNumber: 573,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                                lineNumber: 572,\n                                                columnNumber: 21\n                                            }, this),\n                                            msg.messageType === \"survey_request\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: async ()=>{\n                                                    // Extract case ID from message data\n                                                    console.log(\"\\uD83D\\uDD0D Survey button clicked, message data:\", msg);\n                                                    let caseId = msg.caseId;\n                                                    // Try to parse data field if it exists\n                                                    if (msg.data) {\n                                                        try {\n                                                            const parsedData = typeof msg.data === \"string\" ? JSON.parse(msg.data) : msg.data;\n                                                            console.log(\"\\uD83D\\uDD0D Parsed message data:\", parsedData);\n                                                            caseId = parsedData.caseId || caseId;\n                                                        } catch (e) {\n                                                            console.log(\"Could not parse message data:\", msg.data);\n                                                        }\n                                                    }\n                                                    console.log(\"\\uD83D\\uDD0D Final caseId extracted:\", caseId);\n                                                    if (caseId) {\n                                                        try {\n                                                            var _response_data;\n                                                            // Fetch case details for the survey\n                                                            const response = await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.getCase(caseId);\n                                                            if ((_response_data = response.data) === null || _response_data === void 0 ? void 0 : _response_data.success) {\n                                                                setSurveyCase({\n                                                                    id: caseId,\n                                                                    providerName: provider.businessName || provider.business_name || \"\".concat(provider.firstName || provider.first_name, \" \").concat(provider.lastName || provider.last_name),\n                                                                    serviceType: response.data.data.service_type,\n                                                                    completedAt: response.data.data.completed_at,\n                                                                    description: response.data.data.description\n                                                                });\n                                                                setShowSurveyModal(true);\n                                                            }\n                                                        } catch (error) {\n                                                            console.error(\"Error fetching case details:\", error);\n                                                            alert(\"Възникна грешка при зареждането на детайлите за заявката\");\n                                                        }\n                                                    } else {\n                                                        alert(\"Не може да се намери ID на заявката\");\n                                                    }\n                                                },\n                                                className: \"mt-2 px-4 py-2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-sm rounded-lg hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 flex items-center space-x-2\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        children: \"⭐\"\n                                                    }, void 0, false, {\n                                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                                        lineNumber: 628,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                        children: \"Оценете услугата\"\n                                                    }, void 0, false, {\n                                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                                        lineNumber: 629,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                                lineNumber: 585,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-xs mt-1 \".concat(msg.senderType === \"customer\" ? \"text-white/60\" : \"text-slate-400\"),\n                                                children: new Date(msg.timestamp).toLocaleTimeString(\"bg-BG\", {\n                                                    hour: \"2-digit\",\n                                                    minute: \"2-digit\"\n                                                })\n                                            }, void 0, false, {\n                                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                                lineNumber: 633,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                        lineNumber: 551,\n                                        columnNumber: 17\n                                    }, this)\n                                }, msg.id, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                    lineNumber: 547,\n                                    columnNumber: 15\n                                }, this)),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                ref: messagesEndRef\n                            }, void 0, false, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                lineNumber: 645,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                        lineNumber: 542,\n                        columnNumber: 9\n                    }, this),\n                    isStarted && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"border-t border-slate-700 p-4 bg-slate-800/50\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex space-x-2 mb-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        type: \"text\",\n                                        value: newMessage,\n                                        onChange: (e)=>setNewMessage(e.target.value),\n                                        onKeyPress: (e)=>e.key === \"Enter\" && sendMessage(),\n                                        placeholder: \"Напишете съобщение...\",\n                                        className: \"flex-1 bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder:text-slate-400\",\n                                        disabled: loading\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                        lineNumber: 652,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: sendMessage,\n                                        disabled: !newMessage.trim() || loading,\n                                        className: \"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transform hover:scale-105 transition-all duration-300\",\n                                        children: loading ? \"...\" : \"Изпрати\"\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                        lineNumber: 661,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                lineNumber: 651,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex justify-center\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>{\n                                        setModalMode(\"direct\");\n                                        setShowUnifiedModal(true);\n                                    },\n                                    className: \"bg-gradient-to-r from-green-500 to-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:from-green-600 hover:to-blue-600 transition-all duration-200 flex items-center space-x-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"\\uD83D\\uDD27\"\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                            lineNumber: 679,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"Създай заявка за услуга\"\n                                        }, void 0, false, {\n                                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                            lineNumber: 680,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                    lineNumber: 672,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                lineNumber: 671,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                        lineNumber: 650,\n                        columnNumber: 11\n                    }, this),\n                    !isStarted && !loading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"p-4 border-t border-slate-700 bg-slate-800/50\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"text\",\n                                    placeholder: \"Вашето име\",\n                                    value: customerName,\n                                    onChange: (e)=>setCustomerName(e.target.value),\n                                    className: \"w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder:text-slate-400\"\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                    lineNumber: 690,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"email\",\n                                    placeholder: \"Email адрес\",\n                                    value: customerEmail,\n                                    onChange: (e)=>setCustomerEmail(e.target.value),\n                                    className: \"w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder:text-slate-400\"\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                    lineNumber: 697,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"tel\",\n                                    placeholder: \"Телефон\",\n                                    value: customerPhone,\n                                    onChange: (e)=>setCustomerPhone(e.target.value),\n                                    className: \"w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder:text-slate-400\"\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                    lineNumber: 704,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>startConversation(),\n                                    disabled: !customerName || !customerEmail,\n                                    className: \"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transform hover:scale-105 transition-all duration-300\",\n                                    children: \"Започни разговор\"\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                                    lineNumber: 711,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                            lineNumber: 689,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                        lineNumber: 688,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                lineNumber: 520,\n                columnNumber: 7\n            }, this),\n            showUnifiedModal && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_UnifiedCaseModal__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                isOpen: showUnifiedModal,\n                mode: modalMode,\n                templateData: currentTemplate === null || currentTemplate === void 0 ? void 0 : currentTemplate.templateData,\n                onClose: ()=>{\n                    setShowUnifiedModal(false);\n                    setCurrentTemplate(null);\n                },\n                onSubmit: modalMode === \"template\" ? handleTemplateSubmit : handleCaseCreation,\n                isSubmitting: isSubmittingTemplate,\n                providerName: provider.businessName || provider.business_name || \"специалиста\",\n                providerId: provider.id,\n                providerCategory: provider.serviceCategory || provider.service_category,\n                customerPhone: customerPhone\n            }, void 0, false, {\n                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                lineNumber: 725,\n                columnNumber: 7\n            }, this),\n            showSurveyModal && surveyCase && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_SurveyModal__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                isOpen: showSurveyModal,\n                onClose: ()=>{\n                    setShowSurveyModal(false);\n                    setSurveyCase(null);\n                },\n                caseId: surveyCase.id,\n                providerId: provider.id,\n                providerName: provider.businessName || provider.business_name || \"\".concat(provider.firstName || provider.first_name, \" \").concat(provider.lastName || provider.last_name),\n                onSubmitSuccess: async ()=>{\n                    // Send a thank you message to the chat\n                    const thankYouMessage = \"✅ Благодарим ви за оценката! \\n\\nВашето мнение е важно за нас и помага на други клиенти да направят правилния избор.\";\n                    try {\n                        await _lib_api__WEBPACK_IMPORTED_MODULE_5__.apiClient.sendMessage({\n                            conversationId: conversationId,\n                            senderType: \"customer\",\n                            senderName: customerName,\n                            message: thankYouMessage,\n                            messageType: \"text\"\n                        });\n                        // Add thank you message to local state\n                        const newMessage = {\n                            id: Date.now().toString(),\n                            conversationId: conversationId,\n                            senderType: \"customer\",\n                            senderName: customerName,\n                            message: thankYouMessage,\n                            messageType: \"text\",\n                            timestamp: new Date().toISOString()\n                        };\n                        setMessages((prev)=>[\n                                ...prev,\n                                newMessage\n                            ]);\n                    } catch (error) {\n                        console.error(\"Error sending thank you message:\", error);\n                    }\n                    setShowSurveyModal(false);\n                    setSurveyCase(null);\n                    alert(\"Благодарим ви за оценката!\");\n                }\n            }, void 0, false, {\n                fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n                lineNumber: 744,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"D:\\\\newtry1\\\\Marketplace\\\\src\\\\components\\\\ChatModal.tsx\",\n        lineNumber: 519,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatModal, \"Xit6dNUiNEZT9/todgLmlFa5I8I=\", false, function() {\n    return [\n        _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_6__.useAuth\n    ];\n});\n_c = ChatModal;\nvar _c;\n$RefreshReg$(_c, \"ChatModal\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0NoYXRNb2RhbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFFMkQ7QUFFVDtBQUNRO0FBQ2xCO0FBQ0g7QUFDVztBQStDakMsU0FBU1MsVUFBVSxLQUE2QztRQUE3QyxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFrQixHQUE3Qzs7SUFDaEMsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLGVBQWUsRUFBRSxHQUFHTiw4REFBT0E7SUFDekMsTUFBTSxDQUFDTyxVQUFVQyxZQUFZLEdBQUdmLCtDQUFRQSxDQUFZLEVBQUU7SUFDdEQsTUFBTSxDQUFDZ0IsWUFBWUMsY0FBYyxHQUFHakIsK0NBQVFBLENBQUM7SUFDN0MsTUFBTSxDQUFDa0IsU0FBU0MsV0FBVyxHQUFHbkIsK0NBQVFBLENBQUM7SUFDdkMsTUFBTSxDQUFDb0IsZ0JBQWdCQyxrQkFBa0IsR0FBR3JCLCtDQUFRQSxDQUFnQjtJQUNwRSxNQUFNLENBQUNzQixjQUFjQyxnQkFBZ0IsR0FBR3ZCLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ3dCLGVBQWVDLGlCQUFpQixHQUFHekIsK0NBQVFBLENBQUM7SUFDbkQsTUFBTSxDQUFDMEIsZUFBZUMsaUJBQWlCLEdBQUczQiwrQ0FBUUEsQ0FBQztJQUNuRCxNQUFNLENBQUM0QixXQUFXQyxhQUFhLEdBQUc3QiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUM4QixRQUFRQyxVQUFVLEdBQUcvQiwrQ0FBUUEsQ0FBZ0I7SUFDcEQsTUFBTSxDQUFDZ0Msa0JBQWtCQyxvQkFBb0IsR0FBR2pDLCtDQUFRQSxDQUFDO0lBQ3pELE1BQU0sQ0FBQ2tDLGlCQUFpQkMsbUJBQW1CLEdBQUduQywrQ0FBUUEsQ0FBTTtJQUM1RCxNQUFNLENBQUNvQyxzQkFBc0JDLHdCQUF3QixHQUFHckMsK0NBQVFBLENBQUM7SUFDakUsTUFBTSxDQUFDc0MsV0FBV0MsYUFBYSxHQUFHdkMsK0NB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dHMvQ2hhdE1vZGFsLnRzeD83ODdjIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU29ja2V0IH0gZnJvbSAnc29ja2V0LmlvLWNsaWVudCc7XG5pbXBvcnQgVW5pZmllZENhc2VNb2RhbCBmcm9tICcuL1VuaWZpZWRDYXNlTW9kYWwnO1xuaW1wb3J0IFNlcnZpY2VSZXF1ZXN0QnV0dG9uIGZyb20gJy4vU2VydmljZVJlcXVlc3RCdXR0b24nO1xuaW1wb3J0IFN1cnZleU1vZGFsIGZyb20gJy4vU3VydmV5TW9kYWwnO1xuaW1wb3J0IHsgYXBpQ2xpZW50IH0gZnJvbSAnQC9saWIvYXBpJ1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnXG5pbXBvcnQgeyB1c2VTb2NrZXQgfSBmcm9tICdAL2NvbnRleHRzL1NvY2tldENvbnRleHQnXG5cbmludGVyZmFjZSBTZXJ2aWNlUHJvdmlkZXIge1xuICBpZDogc3RyaW5nXG4gIC8vIFN1cHBvcnQgYm90aCBuYW1pbmcgY29udmVudGlvbnMgLSBtYWtlIGFsbCBvcHRpb25hbCBhbmQgaGFuZGxlIGJvdGhcbiAgYnVzaW5lc3NOYW1lPzogc3RyaW5nXG4gIGJ1c2luZXNzX25hbWU/OiBzdHJpbmdcbiAgc2VydmljZUNhdGVnb3J5Pzogc3RyaW5nXG4gIHNlcnZpY2VfY2F0ZWdvcnk/OiBzdHJpbmdcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmdcbiAgZXhwZXJpZW5jZVllYXJzPzogbnVtYmVyXG4gIGV4cGVyaWVuY2VfeWVhcnM/OiBudW1iZXJcbiAgaG91cmx5UmF0ZT86IG51bWJlclxuICBob3VybHlfcmF0ZT86IG51bWJlclxuICBjaXR5OiBzdHJpbmdcbiAgbmVpZ2hib3Job29kPzogc3RyaW5nXG4gIHBob25lTnVtYmVyPzogc3RyaW5nXG4gIHBob25lX251bWJlcj86IHN0cmluZ1xuICBlbWFpbD86IHN0cmluZ1xuICByYXRpbmc6IG51bWJlclxuICB0b3RhbFJldmlld3M/OiBudW1iZXJcbiAgdG90YWxfcmV2aWV3cz86IG51bWJlclxuICBmaXJzdE5hbWU/OiBzdHJpbmdcbiAgZmlyc3RfbmFtZT86IHN0cmluZ1xuICBsYXN0TmFtZT86IHN0cmluZ1xuICBsYXN0X25hbWU/OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICBpZDogc3RyaW5nXG4gIGNvbnZlcnNhdGlvbklkOiBzdHJpbmdcbiAgc2VuZGVyVHlwZTogJ2N1c3RvbWVyJyB8ICdwcm92aWRlcicgfCAnc3lzdGVtJ1xuICBzZW5kZXJOYW1lOiBzdHJpbmdcbiAgbWVzc2FnZTogc3RyaW5nXG4gIG1lc3NhZ2VUeXBlPzogc3RyaW5nXG4gIHRpbWVzdGFtcDogc3RyaW5nXG4gIGRhdGE/OiBhbnkgLy8gRm9yIGFkZGl0aW9uYWwgbWVzc2FnZSBkYXRhIGxpa2UgY2FzZUlkXG4gIGNhc2VJZD86IHN0cmluZyAvLyBEaXJlY3QgY2FzZSBJRCBmb3Igc3VydmV5IG1lc3NhZ2VzXG59XG5cbmludGVyZmFjZSBDaGF0TW9kYWxQcm9wcyB7XG4gIHByb3ZpZGVyOiBTZXJ2aWNlUHJvdmlkZXJcbiAgaXNPcGVuOiBib29sZWFuXG4gIG9uQ2xvc2U6ICgpID0+IHZvaWRcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ2hhdE1vZGFsKHsgcHJvdmlkZXIsIGlzT3Blbiwgb25DbG9zZSB9OiBDaGF0TW9kYWxQcm9wcykge1xuICBjb25zdCB7IHVzZXIsIGlzQXV0aGVudGljYXRlZCB9ID0gdXNlQXV0aCgpXG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8TWVzc2FnZVtdPihbXSlcbiAgY29uc3QgW25ld01lc3NhZ2UsIHNldE5ld01lc3NhZ2VdID0gdXNlU3RhdGUoJycpXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbY29udmVyc2F0aW9uSWQsIHNldENvbnZlcnNhdGlvbklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFtjdXN0b21lck5hbWUsIHNldEN1c3RvbWVyTmFtZV0gPSB1c2VTdGF0ZSgnJylcbiAgY29uc3QgW2N1c3RvbWVyRW1haWwsIHNldEN1c3RvbWVyRW1haWxdID0gdXNlU3RhdGUoJycpXG4gIGNvbnN0IFtjdXN0b21lclBob25lLCBzZXRDdXN0b21lclBob25lXSA9IHVzZVN0YXRlKCcnKVxuICBjb25zdCBbaXNTdGFydGVkLCBzZXRJc1N0YXJ0ZWRdID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtzb2NrZXQsIHNldFNvY2tldF0gPSB1c2VTdGF0ZTxTb2NrZXQgfCBudWxsPihudWxsKVxuICBjb25zdCBbc2hvd1VuaWZpZWRNb2RhbCwgc2V0U2hvd1VuaWZpZWRNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2N1cnJlbnRUZW1wbGF0ZSwgc2V0Q3VycmVudFRlbXBsYXRlXSA9IHVzZVN0YXRlPGFueT4obnVsbClcbiAgY29uc3QgW2lzU3VibWl0dGluZ1RlbXBsYXRlLCBzZXRJc1N1Ym1pdHRpbmdUZW1wbGF0ZV0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW21vZGFsTW9kZSwgc2V0TW9kYWxNb2RlXSA9IHVzZVN0YXRlPCd0ZW1wbGF0ZScgfCAnZGlyZWN0Jz4oJ2RpcmVjdCcpXG4gIGNvbnN0IFtzaG93U3VydmV5TW9kYWwsIHNldFNob3dTdXJ2ZXlNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3N1cnZleUNhc2UsIHNldFN1cnZleUNhc2VdID0gdXNlU3RhdGU8YW55PihudWxsKVxuICBjb25zdCBtZXNzYWdlc0VuZFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbClcblxuICAvLyBTdG9yYWdlIGtleXMgZm9yIHBlcnNpc3RlbmNlXG4gIGNvbnN0IHN0b3JhZ2VLZXkgPSBgY2hhdF8ke3Byb3ZpZGVyLmlkfWBcbiAgY29uc3QgY29udmVyc2F0aW9uS2V5ID0gYGNvbnZlcnNhdGlvbl8ke3Byb3ZpZGVyLmlkfWBcblxuICBjb25zdCBzY3JvbGxUb0JvdHRvbSA9ICgpID0+IHtcbiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJyB9KVxuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzY3JvbGxUb0JvdHRvbSgpXG4gIH0sIFttZXNzYWdlc10pXG5cbiAgLy8gSW5pdGlhbGl6ZSB1c2VyIGRhdGEgb25seSBvbmNlIHdoZW4gbW9kYWwgb3BlbnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNPcGVuICYmIGlzQXV0aGVudGljYXRlZCAmJiB1c2VyICYmICFpc1N0YXJ0ZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5eo77iPIENoYXRNb2RhbCBvcGVuZWQgZm9yIHByb3ZpZGVyOicsIHByb3ZpZGVyLmlkKVxuICAgICAgXG4gICAgICBjb25zdCBmdWxsTmFtZSA9IGAke3VzZXIuZmlyc3ROYW1lIHx8ICcnfSAke3VzZXIubGFzdE5hbWUgfHwgJyd9YC50cmltKClcbiAgICAgIGNvbnN0IGZpbmFsTmFtZSA9IGZ1bGxOYW1lIHx8ICdVc2VyJ1xuICAgICAgXG4gICAgICBzZXRDdXN0b21lck5hbWUoZmluYWxOYW1lKVxuICAgICAgc2V0Q3VzdG9tZXJFbWFpbCh1c2VyLmVtYWlsIHx8ICcnKVxuICAgICAgc2V0Q3VzdG9tZXJQaG9uZSh1c2VyLnBob25lTnVtYmVyIHx8ICcnKVxuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgY29udmVyc2F0aW9uXG4gICAgICBjb25zdCBzYXZlZENvbnZlcnNhdGlvbklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY29udmVyc2F0aW9uS2V5KVxuICAgICAgaWYgKHNhdmVkQ29udmVyc2F0aW9uSWQpIHtcbiAgICAgICAgc2V0Q29udmVyc2F0aW9uSWQoc2F2ZWRDb252ZXJzYXRpb25JZClcbiAgICAgICAgc2V0SXNTdGFydGVkKHRydWUpXG4gICAgICAgIGxvYWRNZXNzYWdlcyhzYXZlZENvbnZlcnNhdGlvbklkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXV0by1zdGFydCBjb252ZXJzYXRpb24gZm9yIGF1dGhlbnRpY2F0ZWQgdXNlcnNcbiAgICAgICAgc3RhcnRDb252ZXJzYXRpb24oeyBcbiAgICAgICAgICBuYW1lOiBmaW5hbE5hbWUsIFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsIHx8ICcnLCBcbiAgICAgICAgICBwaG9uZTogdXNlci5waG9uZU51bWJlciB8fCAnJyBcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtpc09wZW4sIGlzQXV0aGVudGljYXRlZCwgdXNlciwgcHJvdmlkZXIuaWRdKVxuXG4gIC8vIEluaXRpYWxpemUgc29ja2V0IGZvciByZWFsLXRpbWUgbWVzc2FnaW5nXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpc09wZW4gfHwgIWNvbnZlcnNhdGlvbklkIHx8IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm5cblxuICAgIGNvbnN0IGluaXRTb2NrZXQgPSAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhcGlVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vMTkyLjE2OC4wLjEyOTozMDAwL2FwaS92MSdcbiAgICAgICAgY29uc3Qgc29ja2V0VXJsID0gYXBpVXJsLnJlcGxhY2UoJy9hcGkvdjEnLCAnJylcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5KsIEN1c3RvbWVyIGNvbm5lY3RpbmcgdG8gc29ja2V0OicsIHNvY2tldFVybClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNvY2tldEluc3RhbmNlID0gaW8oc29ja2V0VXJsLCB7XG4gICAgICAgICAgdHJhbnNwb3J0czogWyd3ZWJzb2NrZXQnLCAncG9sbGluZyddLFxuICAgICAgICAgIHRpbWVvdXQ6IDEwMDAwLFxuICAgICAgICAgIHJlY29ubmVjdGlvbjogdHJ1ZSxcbiAgICAgICAgICByZWNvbm5lY3Rpb25BdHRlbXB0czogNSxcbiAgICAgICAgICByZWNvbm5lY3Rpb25EZWxheTogMTAwMFxuICAgICAgICB9KVxuXG4gICAgICAgIHNvY2tldEluc3RhbmNlLm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ3VzdG9tZXIgY29ubmVjdGVkIHRvIFdlYlNvY2tldCBzZXJ2ZXInKVxuICAgICAgICAgIHNldFNvY2tldChzb2NrZXRJbnN0YW5jZSlcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBKb2luIGNvbnZlcnNhdGlvbiByb29tIGZvciByZWFsLXRpbWUgdXBkYXRlc1xuICAgICAgICAgIHNvY2tldEluc3RhbmNlLmVtaXQoJ2pvaW4tY29udmVyc2F0aW9uJywgY29udmVyc2F0aW9uSWQpXG4gICAgICAgICAgY29uc29sZS5sb2coJ/Cfj6AgQ3VzdG9tZXIgam9pbmVkIGNvbnZlcnNhdGlvbiByb29tOicsIGNvbnZlcnNhdGlvbklkKVxuICAgICAgICB9KVxuXG4gICAgICAgIHNvY2tldEluc3RhbmNlLm9uKCdkaXNjb25uZWN0JywgKHJlYXNvbikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfinYwgQ3VzdG9tZXIgZGlzY29ubmVjdGVkIGZyb20gV2ViU29ja2V0IHNlcnZlcjonLCByZWFzb24pXG4gICAgICAgIH0pXG5cbiAgICAgICAgc29ja2V0SW5zdGFuY2Uub24oJ2Nvbm5lY3RfZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgQ3VzdG9tZXIgV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IpXG4gICAgICAgIH0pXG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgY3VzdG9tZXIgc29ja2V0OicsIGVycm9yKVxuICAgICAgfVxuICAgIH1cblxuICAgIGluaXRTb2NrZXQoKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChzb2NrZXQpIHtcbiAgICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKVxuICAgICAgICBjb25zb2xlLmxvZygn8J+UjCBDdXN0b21lciBzb2NrZXQgZGlzY29ubmVjdGVkJylcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtpc09wZW4sIGNvbnZlcnNhdGlvbklkXSlcblxuICAvLyBTZXR1cCByZWFsLXRpbWUgbWVzc2FnZSBsaXN0ZW5lcnNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXNvY2tldCB8fCAhY29udmVyc2F0aW9uSWQpIHJldHVyblxuXG4gICAgY29uc3QgaGFuZGxlTmV3TWVzc2FnZSA9IChkYXRhOiBhbnkpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5KsIEN1c3RvbWVyIHJlY2VpdmVkIG5ldyBtZXNzYWdlOicsIGRhdGEpXG4gICAgICBcbiAgICAgIC8vIE9ubHkgYWRkIG1lc3NhZ2VzIGZyb20gcHJvdmlkZXJzIChub3Qgb3VyIG93biBtZXNzYWdlcylcbiAgICAgIGlmIChkYXRhLmNvbnZlcnNhdGlvbklkID09PSBjb252ZXJzYXRpb25JZCAmJiBkYXRhLm1lc3NhZ2VJZCAmJiBkYXRhLnNlbmRlclR5cGUgPT09ICdwcm92aWRlcicpIHtcbiAgICAgICAgY29uc3QgbmV3TWVzc2FnZTogTWVzc2FnZSA9IHtcbiAgICAgICAgICBpZDogZGF0YS5tZXNzYWdlSWQsXG4gICAgICAgICAgY29udmVyc2F0aW9uSWQ6IGRhdGEuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgc2VuZGVyVHlwZTogZGF0YS5zZW5kZXJUeXBlLFxuICAgICAgICAgIHNlbmRlck5hbWU6IGRhdGEuc2VuZGVyTmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UsXG4gICAgICAgICAgbWVzc2FnZVR5cGU6IGRhdGEubWVzc2FnZVR5cGUsXG4gICAgICAgICAgdGltZXN0YW1wOiBkYXRhLnRpbWVzdGFtcFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzZXRNZXNzYWdlcyhwcmV2ID0+IHtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlRXhpc3RzID0gcHJldi5zb21lKG1zZyA9PiBtc2cuaWQgPT09IGRhdGEubWVzc2FnZUlkKVxuICAgICAgICAgIGlmIChtZXNzYWdlRXhpc3RzKSByZXR1cm4gcHJldlxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OdIEFkZGluZyBwcm92aWRlciBtZXNzYWdlIHRvIGN1c3RvbWVyIGNoYXQ6JywgbmV3TWVzc2FnZSlcbiAgICAgICAgICByZXR1cm4gWy4uLnByZXYsIG5ld01lc3NhZ2VdXG4gICAgICAgIH0pXG4gICAgICAgIHNjcm9sbFRvQm90dG9tKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzb2NrZXQub24oJ25ld19tZXNzYWdlJywgaGFuZGxlTmV3TWVzc2FnZSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzb2NrZXQub2ZmKCduZXdfbWVzc2FnZScsIGhhbmRsZU5ld01lc3NhZ2UpXG4gICAgfVxuICB9LCBbc29ja2V0LCBjb252ZXJzYXRpb25JZF0pXG5cbiAgY29uc3Qgc3RhcnRDb252ZXJzYXRpb24gPSBhc3luYyAob3ZlcnJpZGVEYXRhPzogeyBuYW1lPzogc3RyaW5nLCBlbWFpbD86IHN0cmluZywgcGhvbmU/OiBzdHJpbmcgfSkgPT4ge1xuICAgIGlmIChsb2FkaW5nIHx8IGlzU3RhcnRlZCkgcmV0dXJuXG5cbiAgICBzZXRMb2FkaW5nKHRydWUpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuICAgICAgICBjdXN0b21lck5hbWU6IG92ZXJyaWRlRGF0YT8ubmFtZSB8fCBjdXN0b21lck5hbWUsXG4gICAgICAgIGN1c3RvbWVyRW1haWw6IG92ZXJyaWRlRGF0YT8uZW1haWwgfHwgY3VzdG9tZXJFbWFpbCxcbiAgICAgICAgY3VzdG9tZXJQaG9uZTogb3ZlcnJpZGVEYXRhPy5waG9uZSB8fCBjdXN0b21lclBob25lXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5qAIFN0YXJ0aW5nIGNvbnZlcnNhdGlvbiB3aXRoIGRhdGE6JywgZGF0YSlcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQuY3JlYXRlT3JHZXRDb252ZXJzYXRpb24oZGF0YSlcbiAgICAgIFxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YT8uZGF0YT8uY29udmVyc2F0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgbmV3Q29udmVyc2F0aW9uSWQgPSByZXNwb25zZS5kYXRhLmRhdGEuY29udmVyc2F0aW9uSWRcbiAgICAgICAgc2V0Q29udmVyc2F0aW9uSWQobmV3Q29udmVyc2F0aW9uSWQpXG4gICAgICAgIHNldElzU3RhcnRlZCh0cnVlKVxuICAgICAgICBcbiAgICAgICAgLy8gU2F2ZSB0byBsb2NhbFN0b3JhZ2VcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc3RvcmFnZUtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnZlcnNhdGlvbktleSwgbmV3Q29udmVyc2F0aW9uSWQpXG4gICAgICAgIFxuICAgICAgICAvLyBMb2FkIGV4aXN0aW5nIG1lc3NhZ2VzXG4gICAgICAgIGF3YWl0IGxvYWRNZXNzYWdlcyhuZXdDb252ZXJzYXRpb25JZClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3RhcnRpbmcgY29udmVyc2F0aW9uOicsIGVycm9yKVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGxvYWRNZXNzYWdlcyA9IGFzeW5jIChjb252SWQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUNsaWVudC5nZXRNYXJrZXRwbGFjZU1lc3NhZ2VzKGNvbnZJZClcbiAgICAgIGlmIChyZXNwb25zZS5kYXRhPy5zdWNjZXNzICYmIEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YS5kYXRhKSkge1xuICAgICAgICBzZXRNZXNzYWdlcyhyZXNwb25zZS5kYXRhLmRhdGEpXG4gICAgICAgIHNjcm9sbFRvQm90dG9tKClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIG1lc3NhZ2VzOicsIGVycm9yKVxuICAgICAgLy8gSWYgY29udmVyc2F0aW9uIGRvZXNuJ3QgZXhpc3QsIGF1dG8tcmVjcmVhdGUgaXRcbiAgICAgIGlmIChlcnJvcj8ucmVzcG9uc2U/LnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SnIENvbnZlcnNhdGlvbiBub3QgZm91bmQsIGF0dGVtcHRpbmcgdG8gcmVjcmVhdGUuLi4nKVxuICAgICAgICBhd2FpdCByZWNyZWF0ZUNvbnZlcnNhdGlvbigpXG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgcmVjcmVhdGVDb252ZXJzYXRpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuICAgICAgICBjdXN0b21lck5hbWU6IGN1c3RvbWVyTmFtZSxcbiAgICAgICAgY3VzdG9tZXJFbWFpbDogY3VzdG9tZXJFbWFpbCxcbiAgICAgICAgY3VzdG9tZXJQaG9uZTogY3VzdG9tZXJQaG9uZVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUNsaWVudC5jcmVhdGVPckdldENvbnZlcnNhdGlvbihkYXRhKVxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YT8uZGF0YT8uY29udmVyc2F0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgbmV3Q29udmVyc2F0aW9uSWQgPSByZXNwb25zZS5kYXRhLmRhdGEuY29udmVyc2F0aW9uSWRcbiAgICAgICAgc2V0Q29udmVyc2F0aW9uSWQobmV3Q29udmVyc2F0aW9uSWQpXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNvbnZlcnNhdGlvbktleSwgbmV3Q29udmVyc2F0aW9uSWQpXG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ29udmVyc2F0aW9uIHJlY3JlYXRlZDonLCBuZXdDb252ZXJzYXRpb25JZClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHJlY3JlYXRlIGNvbnZlcnNhdGlvbjonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICBjb25zdCBoYW5kbGVDYXNlVGVtcGxhdGVDbGljayA9IGFzeW5jIChtZXNzYWdlOiBNZXNzYWdlKSA9PiB7XG4gICAgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgIT09ICdjYXNlX3RlbXBsYXRlJykgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdGhlIHNlcnZpY2UgY2F0ZWdvcnkgZnJvbSBwcm92aWRlclxuICAgICAgY29uc3Qgc2VydmljZUNhdGVnb3J5ID0gcHJvdmlkZXIuc2VydmljZUNhdGVnb3J5IHx8IHByb3ZpZGVyLnNlcnZpY2VfY2F0ZWdvcnkgfHwgJ2dlbmVyYWwnO1xuICAgICAgXG4gICAgICAvLyBGZXRjaCB0aGUgY2FzZSB0ZW1wbGF0ZVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQuZ2V0Q2FzZVRlbXBsYXRlKHNlcnZpY2VDYXRlZ29yeSk7XG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS5kYXRhPy5zdWNjZXNzICYmIHJlc3BvbnNlLmRhdGE/LmRhdGEpIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVEYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLmRhdGEudGVtcGxhdGVfZGF0YSk7XG4gICAgICAgIHNldEN1cnJlbnRUZW1wbGF0ZSh7XG4gICAgICAgICAgLi4ucmVzcG9uc2UuZGF0YS5kYXRhLFxuICAgICAgICAgIHRlbXBsYXRlRGF0YVxuICAgICAgICB9KTtcbiAgICAgICAgc2V0TW9kYWxNb2RlKCd0ZW1wbGF0ZScpO1xuICAgICAgICBzZXRTaG93VW5pZmllZE1vZGFsKHRydWUpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGNhc2UgdGVtcGxhdGU6JywgZXJyb3IpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVUZW1wbGF0ZVN1Ym1pdCA9IGFzeW5jIChmb3JtRGF0YTogUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xuICAgIGlmICghY29udmVyc2F0aW9uSWQgfHwgIWN1cnJlbnRUZW1wbGF0ZSkgcmV0dXJuO1xuXG4gICAgc2V0SXNTdWJtaXR0aW5nVGVtcGxhdGUodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBvciB1cGRhdGUgc2VydmljZSBjYXNlIHdpdGggZmlsbGVkIGRhdGFcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXBpQ2xpZW50LmNyZWF0ZVNlcnZpY2VDYXNlKHtcbiAgICAgICAgY29udmVyc2F0aW9uSWQsXG4gICAgICAgIHRlbXBsYXRlSWQ6IGN1cnJlbnRUZW1wbGF0ZS5pZCxcbiAgICAgICAgY2FzZURhdGE6IGZvcm1EYXRhXG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MpIHtcbiAgICAgICAgLy8gU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIHByb3ZpZGVyIHdpdGggdGhlIGZpbGxlZCB0ZW1wbGF0ZVxuICAgICAgICBjb25zdCBzdW1tYXJ5TWVzc2FnZSA9IGDwn5OLINCf0L7Qv9GK0LvQvdC40YUg0YTQvtGA0LzQsNGC0LAg0YEg0LjQvdGE0L7RgNC80LDRhtC40Y8g0LfQsCDQv9GA0L7QsdC70LXQvNCwOlxuXG4ke09iamVjdC5lbnRyaWVzKGZvcm1EYXRhKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICBjb25zdCBmaWVsZCA9IGN1cnJlbnRUZW1wbGF0ZS50ZW1wbGF0ZURhdGEuZmllbGRzLmZpbmQoKGY6IGFueSkgPT4gZi5pZCA9PT0ga2V5KTtcbiAgY29uc3QgbGFiZWwgPSBmaWVsZD8ubGFiZWwgfHwga2V5O1xuICByZXR1cm4gYCR7bGFiZWx9OiAke3ZhbHVlfWA7XG59KS5qb2luKCdcXG4nKX1gO1xuXG4gICAgICAgIC8vIFNlbmQgdGhlIHN1bW1hcnkgbWVzc2FnZVxuICAgICAgICBjb25zdCBtZXNzYWdlUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfVVJMIHx8ICdodHRwOi8vMTkyLjE2OC4wLjEyOTozMDAwL2FwaS92MSd9L2NoYXQvbWVzc2FnZXNgLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICBzZW5kZXJUeXBlOiAnY3VzdG9tZXInLFxuICAgICAgICAgICAgc2VuZGVyTmFtZTogY3VzdG9tZXJOYW1lLFxuICAgICAgICAgICAgbWVzc2FnZTogc3VtbWFyeU1lc3NhZ2UsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogJ2Nhc2VfZmlsbGVkJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChtZXNzYWdlUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAvLyBBZGQgbWVzc2FnZSB0byBsb2NhbCBzdGF0ZVxuICAgICAgICAgIGNvbnN0IG5ld01lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IGNvbnZlcnNhdGlvbklkISxcbiAgICAgICAgICAgIHNlbmRlclR5cGU6ICdjdXN0b21lcicsXG4gICAgICAgICAgICBzZW5kZXJOYW1lOiBjdXN0b21lck5hbWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBzdW1tYXJ5TWVzc2FnZSxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiAnY2FzZV9maWxsZWQnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9O1xuICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIG5ld01lc3NhZ2VdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFNob3dVbmlmaWVkTW9kYWwoZmFsc2UpO1xuICAgICAgICBzZXRDdXJyZW50VGVtcGxhdGUobnVsbCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN1Ym1pdHRpbmcgdGVtcGxhdGU6JywgZXJyb3IpXG4gICAgICBhbGVydCgn0JLRitC30L3QuNC60L3QsCDQs9GA0LXRiNC60LAg0L/RgNC4INC40LfQv9GA0LDRidCw0L3QtdGC0L4g0L3QsCDRhNC+0YDQvNCw0YLQsCcpXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzU3VibWl0dGluZ1RlbXBsYXRlKGZhbHNlKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUNhc2VDcmVhdGlvbiA9IGFzeW5jIChjYXNlRGF0YTogYW55KSA9PiB7XG4gICAgaWYgKCFjb252ZXJzYXRpb25JZCkgcmV0dXJuXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OLIENoYXRNb2RhbCAtIENyZWF0aW5nIGNhc2Ugd2l0aCBkYXRhOicsIGNhc2VEYXRhKVxuICAgICAgY29uc29sZS5sb2coJ/Cfk4sgQ2hhdE1vZGFsIC0gUHJvdmlkZXIgb2JqZWN0OicsIHByb3ZpZGVyKVxuICAgICAgY29uc29sZS5sb2coJ/Cfk4sgQ2hhdE1vZGFsIC0gQXNzaWdubWVudCB0eXBlOicsIGNhc2VEYXRhLmFzc2lnbm1lbnRUeXBlKVxuICAgICAgXG4gICAgICAvLyBQcmVwYXJlIGNhc2UgZGF0YSBmb3IgQVBJXG4gICAgICBjb25zdCBjYXNlUGF5bG9hZCA9IHtcbiAgICAgICAgc2VydmljZVR5cGU6IGNhc2VEYXRhLnNlcnZpY2VUeXBlLFxuICAgICAgICBkZXNjcmlwdGlvbjogY2FzZURhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIHByZWZlcnJlZERhdGU6IGNhc2VEYXRhLnByZWZlcnJlZERhdGUsXG4gICAgICAgIHByZWZlcnJlZFRpbWU6IGNhc2VEYXRhLnByZWZlcnJlZFRpbWUsXG4gICAgICAgIHByaW9yaXR5OiBjYXNlRGF0YS5wcmlvcml0eSB8fCAnbm9ybWFsJyxcbiAgICAgICAgYWRkcmVzczogY2FzZURhdGEuYWRkcmVzcyxcbiAgICAgICAgcGhvbmU6IGNhc2VEYXRhLnBob25lLFxuICAgICAgICBhZGRpdGlvbmFsRGV0YWlsczogY2FzZURhdGEuYWRkaXRpb25hbERldGFpbHMgfHwgJycsXG4gICAgICAgIC8vIEhhbmRsZSBhc3NpZ25tZW50IGJhc2VkIG9uIFwi0YLQuNC/INC30LDRj9Cy0LrQsFwiIHNlbGVjdGlvblxuICAgICAgICBhc3NpZ25tZW50VHlwZTogY2FzZURhdGEuYXNzaWdubWVudFR5cGUgfHwgJ3NwZWNpZmljJyxcbiAgICAgICAgcHJvdmlkZXJJZDogY2FzZURhdGEuYXNzaWdubWVudFR5cGUgPT09ICdzcGVjaWZpYycgPyBwcm92aWRlci5pZCA6IG51bGwsXG4gICAgICAgIGNvbnZlcnNhdGlvbklkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgY3VzdG9tZXJJZDogdXNlciEuaWQsIC8vIEFkZCB0aGUgYWN0dWFsIHVzZXIgSURcbiAgICAgICAgY3VzdG9tZXJOYW1lOiBjdXN0b21lck5hbWUsXG4gICAgICAgIGN1c3RvbWVyRW1haWw6IGN1c3RvbWVyRW1haWwsXG4gICAgICAgIGN1c3RvbWVyUGhvbmU6IGN1c3RvbWVyUGhvbmVcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCfwn5OLIENoYXRNb2RhbCAtIENhc2UgcGF5bG9hZDonLCBjYXNlUGF5bG9hZClcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OLIENoYXRNb2RhbCAtIEZpbmFsIHByb3ZpZGVySWQgZm9yIGFzc2lnbm1lbnQ6JywgY2FzZVBheWxvYWQucHJvdmlkZXJJZClcbiAgICAgIGNvbnNvbGUubG9nKCfwn5OLIENoYXRNb2RhbCAtIEFzc2lnbm1lbnQgbG9naWM6IGFzc2lnbm1lbnRUeXBlID0nLCBjYXNlRGF0YS5hc3NpZ25tZW50VHlwZSwgJ3Byb3ZpZGVyLmlkID0nLCBwcm92aWRlci5pZClcblxuICAgICAgLy8gQ3JlYXRlIHRoZSBhY3R1YWwgY2FzZSBpbiB0aGUgc3lzdGVtXG4gICAgICBjb25zdCBjYXNlUmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQuY3JlYXRlQ2FzZShjYXNlUGF5bG9hZClcbiAgICAgIFxuICAgICAgaWYgKGNhc2VSZXNwb25zZS5kYXRhPy5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRDYXNlID0gY2FzZVJlc3BvbnNlLmRhdGEuZGF0YVxuICAgICAgICBjb25zb2xlLmxvZygn4pyFIENoYXRNb2RhbCAtIENhc2UgY3JlYXRlZCBzdWNjZXNzZnVsbHk6JywgY3JlYXRlZENhc2UpXG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbm90aWZpY2F0aW9uIG1lc3NhZ2UgaW4gdGhlIGNoYXRcbiAgICAgICAgbGV0IG5vdGlmaWNhdGlvbk1lc3NhZ2UgPSBg4pyFINCX0LDRj9Cy0LrQsNGC0LAg0LUg0YHRitC30LTQsNC00LXQvdCwINGD0YHQv9C10YjQvdC+IVxuXG7wn5OLINCd0L7QvNC10YAg0L3QsCDQt9Cw0Y/QstC60LDRgtCwOiAjJHtjcmVhdGVkQ2FzZS5pZH1cbvCflKcg0KPRgdC70YPQs9CwOiAke2Nhc2VEYXRhLnNlcnZpY2VUeXBlfVxu8J+TjSDQkNC00YDQtdGBOiAke2Nhc2VEYXRhLmFkZHJlc3N9XG7wn5OFINCU0LDRgtCwOiAke2Nhc2VEYXRhLnByZWZlcnJlZERhdGV9XG7ij7Ag0JLRgNC10LzQtTogJHtjYXNlRGF0YS5wcmVmZXJyZWRUaW1lIHx8ICfQodGD0YLRgNC40L0gKDg6MDAtMTI6MDApJ31cblxuJHtjYXNlRGF0YS5hc3NpZ25tZW50VHlwZSA9PT0gJ3NwZWNpZmljJyBcbiAgPyBg8J+OryDQl9Cw0Y/QstC60LDRgtCwINC1INC90LDRgdC+0YfQtdC90LAg0LTQuNGA0LXQutGC0L3QviDQutGK0LwgJHtwcm92aWRlci5idXNpbmVzc05hbWUgfHwgcHJvdmlkZXIuYnVzaW5lc3NfbmFtZX1gXG4gIDogJ/CfjJAg0JfQsNGP0LLQutCw0YLQsCDQtSDQv9C+0YHRgtCw0LLQtdC90LAg0LIg0L7QsdGJ0LDRgtCwINC+0L/QsNGI0LrQsCDQt9CwINCy0YHQuNGH0LrQuCDRgdC/0LXRhtC40LDQu9C40YHRgtC4J1xufWBcblxuICAgICAgICAvLyBUcnkgdG8gc2VuZCBub3RpZmljYXRpb24gbWVzc2FnZSB0byBjaGF0IChub24tY3JpdGljYWwpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgYXBpQ2xpZW50LnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgc2VuZGVyVHlwZTogJ2N1c3RvbWVyJyxcbiAgICAgICAgICAgIHNlbmRlck5hbWU6IGN1c3RvbWVyTmFtZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG5vdGlmaWNhdGlvbk1lc3NhZ2UsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogJ2Nhc2VfY3JlYXRlZCdcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgLy8gQWRkIG1lc3NhZ2UgdG8gbG9jYWwgc3RhdGVcbiAgICAgICAgICBjb25zdCBuZXdNZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBjb252ZXJzYXRpb25JZCEsXG4gICAgICAgICAgICBzZW5kZXJUeXBlOiAnY3VzdG9tZXInLFxuICAgICAgICAgICAgc2VuZGVyTmFtZTogY3VzdG9tZXJOYW1lLFxuICAgICAgICAgICAgbWVzc2FnZTogbm90aWZpY2F0aW9uTWVzc2FnZSxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiAnY2FzZV9jcmVhdGVkJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgfVxuICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIG5ld01lc3NhZ2VdKVxuICAgICAgICB9IGNhdGNoIChjaGF0RXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfwn5OLIENoYXRNb2RhbCAtIEZhaWxlZCB0byBzZW5kIGNoYXQgbm90aWZpY2F0aW9uIChub24tY3JpdGljYWwpOicsIGNoYXRFcnJvcilcbiAgICAgICAgICAvLyBEb24ndCB0aHJvdyBlcnJvciBoZXJlIHNpbmNlIGNhc2Ugd2FzIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG93IHN1Y2Nlc3MgZmVlZGJhY2tcbiAgICAgICAgYWxlcnQoYNCX0LDRj9Cy0LrQsNGC0LAg0LUg0YHRitC30LTQsNC00LXQvdCwINGD0YHQv9C10YjQvdC+ISDQndC+0LzQtdGAOiAjJHtjcmVhdGVkQ2FzZS5pZH1gKVxuICAgICAgICBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihjYXNlUmVzcG9uc2UuZGF0YT8ubWVzc2FnZSB8fCAn0JPRgNC10YjQutCwINC/0YDQuCDRgdGK0LfQtNCw0LLQsNC90LXRgtC+INC90LAg0LfQsNGP0LLQutCw0YLQsCcpXG4gICAgICB9XG4gICAgICBcbiAgICAgIHNldFNob3dVbmlmaWVkTW9kYWwoZmFsc2UpXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY2FzZTonLCBlcnJvcilcbiAgICAgIGFsZXJ0KCfQktGK0LfQvdC40LrQvdCwINCz0YDQtdGI0LrQsCDQv9GA0Lgg0YHRitC30LTQsNCy0LDQvdC10YLQviDQvdCwINC30LDRj9Cy0LrQsNGC0LAnKVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBzZW5kTWVzc2FnZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIW5ld01lc3NhZ2UudHJpbSgpIHx8IGxvYWRpbmcpIHJldHVyblxuXG4gICAgLy8gSWYgbm8gY29udmVyc2F0aW9uIGV4aXN0cywgY3JlYXRlIG9uZSBmaXJzdFxuICAgIGlmICghY29udmVyc2F0aW9uSWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SnIE5vIGNvbnZlcnNhdGlvbiBmb3VuZCwgY3JlYXRpbmcgbmV3IG9uZS4uLicpXG4gICAgICBhd2FpdCBzdGFydENvbnZlcnNhdGlvbigpXG4gICAgICBpZiAoIWNvbnZlcnNhdGlvbklkKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gY3JlYXRlIGNvbnZlcnNhdGlvbicpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cblxuICAgIHNldExvYWRpbmcodHJ1ZSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGlDbGllbnQuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgc2VuZGVyVHlwZTogJ2N1c3RvbWVyJyxcbiAgICAgICAgc2VuZGVyTmFtZTogY3VzdG9tZXJOYW1lLFxuICAgICAgICBtZXNzYWdlOiBuZXdNZXNzYWdlXG4gICAgICB9KVxuXG4gICAgICBpZiAocmVzcG9uc2UuZGF0YT8uc3VjY2Vzcykge1xuICAgICAgICAvLyBBZGQgY3VzdG9tZXIgbWVzc2FnZSB0byBVSSBpbW1lZGlhdGVseSAod29uJ3QgY29tZSBiYWNrIHZpYSBXZWJTb2NrZXQpXG4gICAgICAgIGNvbnN0IG5ld01zZzogTWVzc2FnZSA9IHtcbiAgICAgICAgICBpZDogcmVzcG9uc2UuZGF0YS5kYXRhPy5tZXNzYWdlSWQgfHwgRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBjb252ZXJzYXRpb25JZCxcbiAgICAgICAgICBzZW5kZXJUeXBlOiAnY3VzdG9tZXInLFxuICAgICAgICAgIHNlbmRlck5hbWU6IGN1c3RvbWVyTmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBuZXdNZXNzYWdlLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIG5ld01zZ10pXG4gICAgICAgIHNldE5ld01lc3NhZ2UoJycpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBtZXNzYWdlOicsIGVycm9yKVxuICAgICAgXG4gICAgICAvLyBJZiBjb252ZXJzYXRpb24gd2FzIGRlbGV0ZWQsIHRyeSB0byByZWNyZWF0ZSBhbmQgcmVzZW5kXG4gICAgICBpZiAoZXJyb3I/LnJlc3BvbnNlPy5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UpyBDb252ZXJzYXRpb24gZGVsZXRlZCwgcmVjcmVhdGluZyBhbmQgcmV0cnlpbmcuLi4nKVxuICAgICAgICBhd2FpdCByZWNyZWF0ZUNvbnZlcnNhdGlvbigpXG4gICAgICAgIC8vIFJldHJ5IHNlbmRpbmcgdGhlIG1lc3NhZ2VcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzZW5kTWVzc2FnZSgpLCAxMDAwKVxuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGhhbmRsZUNsb3NlID0gKCkgPT4ge1xuICAgIC8vIFJlc2V0IHN0YXRlIHdoZW4gY2xvc2luZ1xuICAgIHNldE1lc3NhZ2VzKFtdKVxuICAgIHNldE5ld01lc3NhZ2UoJycpXG4gICAgc2V0Q29udmVyc2F0aW9uSWQobnVsbClcbiAgICBzZXRJc1N0YXJ0ZWQoZmFsc2UpXG4gICAgb25DbG9zZSgpXG4gIH1cblxuICBpZiAoIWlzT3BlbikgcmV0dXJuIG51bGxcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjay83MCBiYWNrZHJvcC1ibHVyLXNtIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTBcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctc2xhdGUtODAwIHJvdW5kZWQteGwgc2hhZG93LTJ4bCB3LWZ1bGwgbWF4LXctbWQgbXgtNCBoLTk2IGZsZXggZmxleC1jb2wgYm9yZGVyIGJvcmRlci13aGl0ZS8yMFwiPlxuICAgICAgICB7LyogSGVhZGVyICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLXIgZnJvbS1pbmRpZ28tNjAwIHRvLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBwLTQgcm91bmRlZC10LXhsIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPlxuICAgICAgICAgICAgICB7cHJvdmlkZXIuYnVzaW5lc3NOYW1lIHx8IHByb3ZpZGVyLmJ1c2luZXNzX25hbWUgfHwgYCR7cHJvdmlkZXIuZmlyc3ROYW1lIHx8IHByb3ZpZGVyLmZpcnN0X25hbWV9ICR7cHJvdmlkZXIubGFzdE5hbWUgfHwgcHJvdmlkZXIubGFzdF9uYW1lfWB9XG4gICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXdoaXRlLzgwXCI+XG4gICAgICAgICAgICAgIHtwcm92aWRlci5zZXJ2aWNlQ2F0ZWdvcnkgfHwgcHJvdmlkZXIuc2VydmljZV9jYXRlZ29yeX1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDbG9zZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtd2hpdGUvODAgaG92ZXI6dGV4dC13aGl0ZSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTYgaC02XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+XG4gICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCIgLz5cbiAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogTWVzc2FnZXMgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS0zIGJnLXNsYXRlLTkwMC81MFwiPlxuICAgICAgICAgIHtsb2FkaW5nICYmIG1lc3NhZ2VzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1zbGF0ZS00MDBcIj7Ql9Cw0YDQtdC20LTQsNC90LUuLi48L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgbWVzc2FnZXMubWFwKChtc2cpID0+IChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGtleT17bXNnLmlkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggJHttc2cuc2VuZGVyVHlwZSA9PT0gJ2N1c3RvbWVyJyA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCd9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1heC13LXhzIHB4LTMgcHktMiByb3VuZGVkLWxnIHRleHQtc20gJHtcbiAgICAgICAgICAgICAgICAgICAgbXNnLnNlbmRlclR5cGUgPT09ICdjdXN0b21lcidcbiAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ncmFkaWVudC10by1yIGZyb20taW5kaWdvLTYwMCB0by1wdXJwbGUtNjAwIHRleHQtd2hpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgOiAnYmctc2xhdGUtNzAwIHRleHQtc2xhdGUtMTAwIGJvcmRlciBib3JkZXItc2xhdGUtNjAwJ1xuICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGRpdj57bXNnLm1lc3NhZ2V9PC9kaXY+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIHsvKiBTaG93IHRlbXBsYXRlIGJ1dHRvbiBmb3IgY2FzZV90ZW1wbGF0ZSBtZXNzYWdlcyAqL31cbiAgICAgICAgICAgICAgICAgIHttc2cubWVzc2FnZVR5cGUgPT09ICdjYXNlX3RlbXBsYXRlJyAmJiBtc2cuc2VuZGVyVHlwZSA9PT0gJ3Byb3ZpZGVyJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVDYXNlVGVtcGxhdGVDbGljayhtc2cpfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTIgcHgtMyBweS0xIGJnLWdyYWRpZW50LXRvLXIgZnJvbS1pbmRpZ28tNTAwIHRvLXB1cnBsZS01MDAgdGV4dC13aGl0ZSB0ZXh0LXhzIHJvdW5kZWQgaG92ZXI6c2hhZG93LWxnIHRyYW5zZm9ybSBob3ZlcjpzY2FsZS0xMDUgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgIPCfk4sg0J/QvtC/0YrQu9C90Lgg0YTQvtGA0LzQsNGC0LBcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB7LyogU2hvdyBzZXJ2aWNlIHJlcXVlc3QgYnV0dG9uIGZvciBzZXJ2aWNlX3JlcXVlc3QgbWVzc2FnZXMgKi99XG4gICAgICAgICAgICAgICAgICB7bXNnLm1lc3NhZ2VUeXBlID09PSAnc2VydmljZV9yZXF1ZXN0JyAmJiBtc2cuc2VuZGVyVHlwZSA9PT0gJ3Byb3ZpZGVyJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxTZXJ2aWNlUmVxdWVzdEJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTmFtZT17cHJvdmlkZXIuYnVzaW5lc3NOYW1lIHx8IHByb3ZpZGVyLmJ1c2luZXNzX25hbWUgfHwgYCR7cHJvdmlkZXIuZmlyc3ROYW1lIHx8IHByb3ZpZGVyLmZpcnN0X25hbWV9ICR7cHJvdmlkZXIubGFzdE5hbWUgfHwgcHJvdmlkZXIubGFzdF9uYW1lfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldE1vZGFsTW9kZSgnZGlyZWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dVbmlmaWVkTW9kYWwodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgICAgey8qIFNob3cgc3VydmV5IGJ1dHRvbiBmb3Igc3VydmV5X3JlcXVlc3QgbWVzc2FnZXMgKi99XG4gICAgICAgICAgICAgICAgICB7bXNnLm1lc3NhZ2VUeXBlID09PSAnc3VydmV5X3JlcXVlc3QnICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgY2FzZSBJRCBmcm9tIG1lc3NhZ2UgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gU3VydmV5IGJ1dHRvbiBjbGlja2VkLCBtZXNzYWdlIGRhdGE6JywgbXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYXNlSWQgPSBtc2cuY2FzZUlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gcGFyc2UgZGF0YSBmaWVsZCBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSB0eXBlb2YgbXNnLmRhdGEgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShtc2cuZGF0YSkgOiBtc2cuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBQYXJzZWQgbWVzc2FnZSBkYXRhOicsIHBhcnNlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VJZCA9IHBhcnNlZERhdGEuY2FzZUlkIHx8IGNhc2VJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb3VsZCBub3QgcGFyc2UgbWVzc2FnZSBkYXRhOicsIG1zZy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBGaW5hbCBjYXNlSWQgZXh0cmFjdGVkOicsIGNhc2VJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGZXRjaCBjYXNlIGRldGFpbHMgZm9yIHRoZSBzdXJ2ZXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaUNsaWVudC5nZXRDYXNlKGNhc2VJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGE/LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFN1cnZleUNhc2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogY2FzZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlck5hbWU6IHByb3ZpZGVyLmJ1c2luZXNzTmFtZSB8fCBwcm92aWRlci5idXNpbmVzc19uYW1lIHx8IGAke3Byb3ZpZGVyLmZpcnN0TmFtZSB8fCBwcm92aWRlci5maXJzdF9uYW1lfSAke3Byb3ZpZGVyLmxhc3ROYW1lIHx8IHByb3ZpZGVyLmxhc3RfbmFtZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlVHlwZTogcmVzcG9uc2UuZGF0YS5kYXRhLnNlcnZpY2VfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkQXQ6IHJlc3BvbnNlLmRhdGEuZGF0YS5jb21wbGV0ZWRfYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiByZXNwb25zZS5kYXRhLmRhdGEuZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1N1cnZleU1vZGFsKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjYXNlIGRldGFpbHM6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCfQktGK0LfQvdC40LrQvdCwINCz0YDQtdGI0LrQsCDQv9GA0Lgg0LfQsNGA0LXQttC00LDQvdC10YLQviDQvdCwINC00LXRgtCw0LnQu9C40YLQtSDQt9CwINC30LDRj9Cy0LrQsNGC0LAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ9Cd0LUg0LzQvtC20LUg0LTQsCDRgdC1INC90LDQvNC10YDQuCBJRCDQvdCwINC30LDRj9Cy0LrQsNGC0LAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTIgcHgtNCBweS0yIGJnLWdyYWRpZW50LXRvLXIgZnJvbS15ZWxsb3ctNTAwIHRvLW9yYW5nZS01MDAgdGV4dC13aGl0ZSB0ZXh0LXNtIHJvdW5kZWQtbGcgaG92ZXI6ZnJvbS15ZWxsb3ctNjAwIGhvdmVyOnRvLW9yYW5nZS02MDAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwIGZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj7irZA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+0J7RhtC10L3QtdGC0LUg0YPRgdC70YPQs9Cw0YLQsDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHRleHQteHMgbXQtMSAke1xuICAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyVHlwZSA9PT0gJ2N1c3RvbWVyJyA/ICd0ZXh0LXdoaXRlLzYwJyA6ICd0ZXh0LXNsYXRlLTQwMCdcbiAgICAgICAgICAgICAgICAgIH1gfT5cbiAgICAgICAgICAgICAgICAgICAge25ldyBEYXRlKG1zZy50aW1lc3RhbXApLnRvTG9jYWxlVGltZVN0cmluZygnYmctQkcnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgaG91cjogJzItZGlnaXQnLFxuICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogJzItZGlnaXQnXG4gICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSlcbiAgICAgICAgICApfVxuICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIElucHV0IFNlY3Rpb24gKi99XG4gICAgICAgIHtpc1N0YXJ0ZWQgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTcwMCBwLTQgYmctc2xhdGUtODAwLzUwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggc3BhY2UteC0yIG1iLTNcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtuZXdNZXNzYWdlfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0TmV3TWVzc2FnZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgb25LZXlQcmVzcz17KGUpID0+IGUua2V5ID09PSAnRW50ZXInICYmIHNlbmRNZXNzYWdlKCl9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLQndCw0L/QuNGI0LXRgtC1INGB0YrQvtCx0YnQtdC90LjQtS4uLlwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIGJnLXNsYXRlLTcwMCBib3JkZXIgYm9yZGVyLXNsYXRlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgcHgtMyBweS0yIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWluZGlnby01MDAgcGxhY2Vob2xkZXI6dGV4dC1zbGF0ZS00MDBcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17c2VuZE1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFuZXdNZXNzYWdlLnRyaW0oKSB8fCBsb2FkaW5nfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLXIgZnJvbS1pbmRpZ28tNjAwIHRvLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBweC00IHB5LTIgcm91bmRlZC1sZyBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBob3ZlcjpzaGFkb3ctbGcgdHJhbnNmb3JtIGhvdmVyOnNjYWxlLTEwNSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2xvYWRpbmcgPyAnLi4uJyA6ICfQmNC30L/RgNCw0YLQuCd9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHsvKiBRdWljayBBY3Rpb24gQnV0dG9uICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRNb2RhbE1vZGUoJ2RpcmVjdCcpO1xuICAgICAgICAgICAgICAgICAgc2V0U2hvd1VuaWZpZWRNb2RhbCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLXIgZnJvbS1ncmVlbi01MDAgdG8tYmx1ZS01MDAgdGV4dC13aGl0ZSBweC00IHB5LTIgcm91bmRlZC1sZyB0ZXh0LXNtIGZvbnQtbWVkaXVtIGhvdmVyOmZyb20tZ3JlZW4tNjAwIGhvdmVyOnRvLWJsdWUtNjAwIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHNwYW4+8J+Upzwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3Bhbj7QodGK0LfQtNCw0Lkg0LfQsNGP0LLQutCwINC30LAg0YPRgdC70YPQs9CwPC9zcGFuPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIHsvKiBTdGFydCBDaGF0IEZvcm0gKi99XG4gICAgICAgIHshaXNTdGFydGVkICYmICFsb2FkaW5nICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBib3JkZXItdCBib3JkZXItc2xhdGUtNzAwIGJnLXNsYXRlLTgwMC81MFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwi0JLQsNGI0LXRgtC+INC40LzQtVwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e2N1c3RvbWVyTmFtZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEN1c3RvbWVyTmFtZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXNsYXRlLTcwMCBib3JkZXIgYm9yZGVyLXNsYXRlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgcHgtMyBweS0yIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWluZGlnby01MDAgcGxhY2Vob2xkZXI6dGV4dC1zbGF0ZS00MDBcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW1haWwg0LDQtNGA0LXRgVwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e2N1c3RvbWVyRW1haWx9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDdXN0b21lckVtYWlsKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctc2xhdGUtNzAwIGJvcmRlciBib3JkZXItc2xhdGUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyBweC0zIHB5LTIgdGV4dC1zbSBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTUwMCBwbGFjZWhvbGRlcjp0ZXh0LXNsYXRlLTQwMFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZWxcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwi0KLQtdC70LXRhNC+0L1cIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtjdXN0b21lclBob25lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0Q3VzdG9tZXJQaG9uZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXNsYXRlLTcwMCBib3JkZXIgYm9yZGVyLXNsYXRlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgcHgtMyBweS0yIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWluZGlnby01MDAgcGxhY2Vob2xkZXI6dGV4dC1zbGF0ZS00MDBcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc3RhcnRDb252ZXJzYXRpb24oKX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWN1c3RvbWVyTmFtZSB8fCAhY3VzdG9tZXJFbWFpbH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JhZGllbnQtdG8tciBmcm9tLWluZGlnby02MDAgdG8tcHVycGxlLTYwMCB0ZXh0LXdoaXRlIHB5LTIgcm91bmRlZC1sZyBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBob3ZlcjpzaGFkb3ctbGcgdHJhbnNmb3JtIGhvdmVyOnNjYWxlLTEwNSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAg0JfQsNC/0L7Rh9C90Lgg0YDQsNC30LPQvtCy0L7RgFxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgIDwvZGl2PlxuXG4gICAgey8qIFVuaWZpZWQgQ2FzZSBNb2RhbCAqL31cbiAgICB7c2hvd1VuaWZpZWRNb2RhbCAmJiAoXG4gICAgICA8VW5pZmllZENhc2VNb2RhbFxuICAgICAgICBpc09wZW49e3Nob3dVbmlmaWVkTW9kYWx9XG4gICAgICAgIG1vZGU9e21vZGFsTW9kZX1cbiAgICAgICAgdGVtcGxhdGVEYXRhPXtjdXJyZW50VGVtcGxhdGU/LnRlbXBsYXRlRGF0YX1cbiAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgIHNldFNob3dVbmlmaWVkTW9kYWwoZmFsc2UpO1xuICAgICAgICAgIHNldEN1cnJlbnRUZW1wbGF0ZShudWxsKTtcbiAgICAgICAgfX1cbiAgICAgICAgb25TdWJtaXQ9e21vZGFsTW9kZSA9PT0gJ3RlbXBsYXRlJyA/IGhhbmRsZVRlbXBsYXRlU3VibWl0IDogaGFuZGxlQ2FzZUNyZWF0aW9ufVxuICAgICAgICBpc1N1Ym1pdHRpbmc9e2lzU3VibWl0dGluZ1RlbXBsYXRlfVxuICAgICAgICBwcm92aWRlck5hbWU9e3Byb3ZpZGVyLmJ1c2luZXNzTmFtZSB8fCBwcm92aWRlci5idXNpbmVzc19uYW1lIHx8ICfRgdC/0LXRhtC40LDQu9C40YHRgtCwJ31cbiAgICAgICAgcHJvdmlkZXJJZD17cHJvdmlkZXIuaWR9XG4gICAgICAgIHByb3ZpZGVyQ2F0ZWdvcnk9e3Byb3ZpZGVyLnNlcnZpY2VDYXRlZ29yeSB8fCBwcm92aWRlci5zZXJ2aWNlX2NhdGVnb3J5fVxuICAgICAgICBjdXN0b21lclBob25lPXtjdXN0b21lclBob25lfVxuICAgICAgLz5cbiAgICApfVxuXG4gICAgey8qIFN1cnZleSBNb2RhbCAqL31cbiAgICB7c2hvd1N1cnZleU1vZGFsICYmIHN1cnZleUNhc2UgJiYgKFxuICAgICAgPFN1cnZleU1vZGFsXG4gICAgICAgIGlzT3Blbj17c2hvd1N1cnZleU1vZGFsfVxuICAgICAgICBvbkNsb3NlPXsoKSA9PiB7XG4gICAgICAgICAgc2V0U2hvd1N1cnZleU1vZGFsKGZhbHNlKTtcbiAgICAgICAgICBzZXRTdXJ2ZXlDYXNlKG51bGwpO1xuICAgICAgICB9fVxuICAgICAgICBjYXNlSWQ9e3N1cnZleUNhc2UuaWR9XG4gICAgICAgIHByb3ZpZGVySWQ9e3Byb3ZpZGVyLmlkfVxuICAgICAgICBwcm92aWRlck5hbWU9e3Byb3ZpZGVyLmJ1c2luZXNzTmFtZSB8fCBwcm92aWRlci5idXNpbmVzc19uYW1lIHx8IGAke3Byb3ZpZGVyLmZpcnN0TmFtZSB8fCBwcm92aWRlci5maXJzdF9uYW1lfSAke3Byb3ZpZGVyLmxhc3ROYW1lIHx8IHByb3ZpZGVyLmxhc3RfbmFtZX1gfVxuICAgICAgICBvblN1Ym1pdFN1Y2Nlc3M9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAvLyBTZW5kIGEgdGhhbmsgeW91IG1lc3NhZ2UgdG8gdGhlIGNoYXRcbiAgICAgICAgICBjb25zdCB0aGFua1lvdU1lc3NhZ2UgPSBg4pyFINCR0LvQsNCz0L7QtNCw0YDQuNC8INCy0Lgg0LfQsCDQvtGG0LXQvdC60LDRgtCwISBcblxu0JLQsNGI0LXRgtC+INC80L3QtdC90LjQtSDQtSDQstCw0LbQvdC+INC30LAg0L3QsNGBINC4INC/0L7QvNCw0LPQsCDQvdCwINC00YDRg9Cz0Lgg0LrQu9C40LXQvdGC0Lgg0LTQsCDQvdCw0L/RgNCw0LLRj9GCINC/0YDQsNCy0LjQu9C90LjRjyDQuNC30LHQvtGALmA7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXBpQ2xpZW50LnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IGNvbnZlcnNhdGlvbklkISxcbiAgICAgICAgICAgICAgc2VuZGVyVHlwZTogJ2N1c3RvbWVyJyxcbiAgICAgICAgICAgICAgc2VuZGVyTmFtZTogY3VzdG9tZXJOYW1lLFxuICAgICAgICAgICAgICBtZXNzYWdlOiB0aGFua1lvdU1lc3NhZ2UsXG4gICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiAndGV4dCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhhbmsgeW91IG1lc3NhZ2UgdG8gbG9jYWwgc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IG5ld01lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkOiBjb252ZXJzYXRpb25JZCEsXG4gICAgICAgICAgICAgIHNlbmRlclR5cGU6ICdjdXN0b21lcicsXG4gICAgICAgICAgICAgIHNlbmRlck5hbWU6IGN1c3RvbWVyTmFtZSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogdGhhbmtZb3VNZXNzYWdlLFxuICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNldE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIG5ld01lc3NhZ2VdKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyB0aGFuayB5b3UgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0U2hvd1N1cnZleU1vZGFsKGZhbHNlKTtcbiAgICAgICAgICBzZXRTdXJ2ZXlDYXNlKG51bGwpO1xuICAgICAgICAgIGFsZXJ0KCfQkdC70LDQs9C+0LTQsNGA0LjQvCDQstC4INC30LAg0L7RhtC10L3QutCw0YLQsCEnKTtcbiAgICAgICAgfX1cbiAgICAgIC8+XG4gICAgKX1cbiAgPC9kaXY+XG4pXG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIlVuaWZpZWRDYXNlTW9kYWwiLCJTZXJ2aWNlUmVxdWVzdEJ1dHRvbiIsIlN1cnZleU1vZGFsIiwiYXBpQ2xpZW50IiwidXNlQXV0aCIsIkNoYXRNb2RhbCIsInByb3ZpZGVyIiwiaXNPcGVuIiwib25DbG9zZSIsInVzZXIiLCJpc0F1dGhlbnRpY2F0ZWQiLCJtZXNzYWdlcyIsInNldE1lc3NhZ2VzIiwibmV3TWVzc2FnZSIsInNldE5ld01lc3NhZ2UiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImNvbnZlcnNhdGlvbklkIiwic2V0Q29udmVyc2F0aW9uSWQiLCJjdXN0b21lck5hbWUiLCJzZXRDdXN0b21lck5hbWUiLCJjdXN0b21lckVtYWlsIiwic2V0Q3VzdG9tZXJFbWFpbCIsImN1c3RvbWVyUGhvbmUiLCJzZXRDdXN0b21lclBob25lIiwiaXNTdGFydGVkIiwic2V0SXNTdGFydGVkIiwic29ja2V0Iiwic2V0U29ja2V0Iiwic2hvd1VuaWZpZWRNb2RhbCIsInNldFNob3dVbmlmaWVkTW9kYWwiLCJjdXJyZW50VGVtcGxhdGUiLCJzZXRDdXJyZW50VGVtcGxhdGUiLCJpc1N1Ym1pdHRpbmdUZW1wbGF0ZSIsInNldElzU3VibWl0dGluZ1RlbXBsYXRlIiwibW9kYWxNb2RlIiwic2V0TW9kYWxNb2RlIiwic2hvd1N1cnZleU1vZGFsIiwic2V0U2hvd1N1cnZleU1vZGFsIiwic3VydmV5Q2FzZSIsInNldFN1cnZleUNhc2UiLCJtZXNzYWdlc0VuZFJlZiIsInN0b3JhZ2VLZXkiLCJpZCIsImNvbnZlcnNhdGlvbktleSIsInNjcm9sbFRvQm90dG9tIiwiY3VycmVudCIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJjb25zb2xlIiwibG9nIiwiZnVsbE5hbWUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInRyaW0iLCJmaW5hbE5hbWUiLCJlbWFpbCIsInBob25lTnVtYmVyIiwic2F2ZWRDb252ZXJzYXRpb25JZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJsb2FkTWVzc2FnZXMiLCJzdGFydENvbnZlcnNhdGlvbiIsIm5hbWUiLCJwaG9uZSIsImluaXRTb2NrZXQiLCJhcGlVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsInNvY2tldFVybCIsInJlcGxhY2UiLCJzb2NrZXRJbnN0YW5jZSIsImlvIiwidHJhbnNwb3J0cyIsInRpbWVvdXQiLCJyZWNvbm5lY3Rpb24iLCJyZWNvbm5lY3Rpb25BdHRlbXB0cyIsInJlY29ubmVjdGlvbkRlbGF5Iiwib24iLCJlbWl0IiwicmVhc29uIiwiZXJyb3IiLCJkaXNjb25uZWN0IiwiaGFuZGxlTmV3TWVzc2FnZSIsImRhdGEiLCJtZXNzYWdlSWQiLCJzZW5kZXJUeXBlIiwic2VuZGVyTmFtZSIsIm1lc3NhZ2UiLCJtZXNzYWdlVHlwZSIsInRpbWVzdGFtcCIsInByZXYiLCJtZXNzYWdlRXhpc3RzIiwic29tZSIsIm1zZyIsIm9mZiIsIm92ZXJyaWRlRGF0YSIsInJlc3BvbnNlIiwicHJvdmlkZXJJZCIsImNyZWF0ZU9yR2V0Q29udmVyc2F0aW9uIiwic3VjY2VzcyIsIm5ld0NvbnZlcnNhdGlvbklkIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb252SWQiLCJnZXRNYXJrZXRwbGFjZU1lc3NhZ2VzIiwiQXJyYXkiLCJpc0FycmF5Iiwic3RhdHVzIiwicmVjcmVhdGVDb252ZXJzYXRpb24iLCJoYW5kbGVDYXNlVGVtcGxhdGVDbGljayIsInNlcnZpY2VDYXRlZ29yeSIsInNlcnZpY2VfY2F0ZWdvcnkiLCJnZXRDYXNlVGVtcGxhdGUiLCJ0ZW1wbGF0ZURhdGEiLCJwYXJzZSIsInRlbXBsYXRlX2RhdGEiLCJoYW5kbGVUZW1wbGF0ZVN1Ym1pdCIsImZvcm1EYXRhIiwiY3JlYXRlU2VydmljZUNhc2UiLCJ0ZW1wbGF0ZUlkIiwiY2FzZURhdGEiLCJzdW1tYXJ5TWVzc2FnZSIsIk9iamVjdCIsImVudHJpZXMiLCJtYXAiLCJrZXkiLCJ2YWx1ZSIsImZpZWxkIiwiZmllbGRzIiwiZmluZCIsImYiLCJsYWJlbCIsImpvaW4iLCJtZXNzYWdlUmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwib2siLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJ0b0lTT1N0cmluZyIsImFsZXJ0IiwiaGFuZGxlQ2FzZUNyZWF0aW9uIiwiY2FzZVJlc3BvbnNlIiwiYXNzaWdubWVudFR5cGUiLCJjYXNlUGF5bG9hZCIsInNlcnZpY2VUeXBlIiwiZGVzY3JpcHRpb24iLCJwcmVmZXJyZWREYXRlIiwicHJlZmVycmVkVGltZSIsInByaW9yaXR5IiwiYWRkcmVzcyIsImFkZGl0aW9uYWxEZXRhaWxzIiwiY3VzdG9tZXJJZCIsImNyZWF0ZUNhc2UiLCJjcmVhdGVkQ2FzZSIsIm5vdGlmaWNhdGlvbk1lc3NhZ2UiLCJidXNpbmVzc05hbWUiLCJidXNpbmVzc19uYW1lIiwic2VuZE1lc3NhZ2UiLCJjaGF0RXJyb3IiLCJFcnJvciIsIm5ld01zZyIsInNldFRpbWVvdXQiLCJoYW5kbGVDbG9zZSIsImRpdiIsImNsYXNzTmFtZSIsImgzIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsInAiLCJidXR0b24iLCJvbkNsaWNrIiwic3ZnIiwiZmlsbCIsInN0cm9rZSIsInZpZXdCb3giLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwibGVuZ3RoIiwicHJvdmlkZXJOYW1lIiwiY2FzZUlkIiwicGFyc2VkRGF0YSIsImUiLCJnZXRDYXNlIiwic2VydmljZV90eXBlIiwiY29tcGxldGVkQXQiLCJjb21wbGV0ZWRfYXQiLCJzcGFuIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsInJlZiIsImlucHV0IiwidHlwZSIsIm9uQ2hhbmdlIiwidGFyZ2V0Iiwib25LZXlQcmVzcyIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiLCJtb2RlIiwib25TdWJtaXQiLCJpc1N1Ym1pdHRpbmciLCJwcm92aWRlckNhdGVnb3J5Iiwib25TdWJtaXRTdWNjZXNzIiwidGhhbmtZb3VNZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/ChatModal.tsx\n"));

/***/ })

});